!function(e){function t(t){for(var _,n,i=t[0],a=t[1],l=t[2],u=0,d=[];u<i.length;u++)n=i[u],Object.prototype.hasOwnProperty.call(o,n)&&o[n]&&d.push(o[n][0]),o[n]=0;for(_ in a)Object.prototype.hasOwnProperty.call(a,_)&&(e[_]=a[_]);for(c&&c(t);d.length;)d.shift()();return s.push.apply(s,l||[]),r()}function r(){for(var e,t=0;t<s.length;t++){for(var r=s[t],_=!0,i=1;i<r.length;i++){var a=r[i];0!==o[a]&&(_=!1)}_&&(s.splice(t--,1),e=n(n.s=r[0]))}return e}var _={},o={"web/restore":0},s=[];function n(t){if(_[t])return _[t].exports;var r=_[t]={i:t,l:!1,exports:{}};return e[t].call(r.exports,r,r.exports,n),r.l=!0,r.exports}n.m=e,n.c=_,n.d=function(e,t,r){n.o(e,t)||Object.defineProperty(e,t,{enumerable:!0,get:r})},n.r=function(e){"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})},n.t=function(e,t){if(1&t&&(e=n(e)),8&t)return e;if(4&t&&"object"==typeof e&&e&&e.__esModule)return e;var r=Object.create(null);if(n.r(r),Object.defineProperty(r,"default",{enumerable:!0,value:e}),2&t&&"string"!=typeof e)for(var _ in e)n.d(r,_,function(t){return e[t]}.bind(null,_));return r},n.n=function(e){var t=e&&e.__esModule?function(){return e.default}:function(){return e};return n.d(t,"a",t),t},n.o=function(e,t){return Object.prototype.hasOwnProperty.call(e,t)},n.p="/js/cmodules/";var i=window.webpackJsonp=window.webpackJsonp||[],a=i.push.bind(i);i.push=t,i=i.slice();for(var l=0;l<i.length;l++)t(i[l]);var c=a;s.push([245,"bundles/common","bundles/vendors","bundles/1c6a9b415901224f27daf60c6bc90be0"]),r()}({"+/AQ":function(e,t,r){"use strict";r.r(t),r.d(t,"getNativeOption",(function(){return o})),r.d(t,"setNativeOption",(function(){return s})),r.d(t,"createScroll",(function(){return l}));var _=r("ofcU");function o(e,t){return bodyNode[e]||document.documentElement[e]}function s(e,t,r){"scrollTop"===e&&window.scrollTo(0,t)}class n{constructor(e,t){this.el=e,this.opts=t,this.module=Object(_.createModule)({handlers:(e,t)=>{e(window,"scroll",this.onScroll.bind(this)),e(window,"resize",this.resize.bind(this))}}),this.innerHeight=window.innerHeight,this.prevScroll=this.scrollTop()}update(){}resize(){this.innerHeight=window.innerHeight}scrollTop(e){if(void 0===e)return o("scrollTop",this.el);s("scrollTop",e,this.el)}contHeight(){return o("scrollHeight")}smoothScroll(e){scrollToY(e+this.scrollTop(),300)}getContainer(){return this.el}getScroller(){return null}scrollBottom(e){if(void 0===e)return this.contHeight()-this.scrollTop()-this.getScrollHeight();var t=this.contHeight()-e-this.getScrollHeight();this.scrollTop(t)}scrollBottomFixSave(e){var t=()=>{Date.now()-r<500&&this.scrollBottom(e),window.removeEventListener("scroll",t)},r=Date.now();window.addEventListener("scroll",t),this.scrollBottom(e)}onScroll(e){var t=this.scrollTop(),r=t-this.prevScroll,_=this.contHeight();this.opts.onScroll&&this.opts.onScroll(-r,this),this.opts.scrollChange&&this.opts.scrollChange(t),this.opts.more&&_-t<2*this.innerHeight&&this.opts.more(this),this.prevScroll=t}getScrollHeight(){return this.innerHeight}destroy(){Object(_.destroyModule)(this.module)}}class i{constructor(e,t){this.prevTop=0,this.scroll=new uiScroll(e,{hidden:void 0===t.hidden||t.hidden,shadows:t.shadows,stopScrollPropagation:!1,theme:t.scrollTheme,onmore:()=>t.more&&t.more(this),onscroll:e=>{var r=this.scrollTop(),_=this.prevTop-r;this.prevTop=r,t.scrollChange&&t.scrollChange(r),t.onScroll&&t.onScroll(_,this)}})}update(){this.scroll.update("sync")}scrollTop(e){return void 0!==e?this.scroll.scrollTop(e):this.scroll.data.scrollTop}getContainer(){return this.scroll.content}getScroller(){return this.scroll.scroller}contHeight(){return this.scroll.data.scrollHeight}smoothScroll(e){this.scroll.scrollTop(this.scrollTop()+e,300)}scrollBottom(e){return void 0!==e?this.scroll.scrollBottom(e):this.scroll.data.scrollBottom}scrollBottomFixSave(e){var t=Date.now();this.scroll.emitter.addOnceListener("resize",()=>{Date.now()-t<500&&this.scroll&&this.scrollBottom(e)}),this.scrollBottom(e)}getScrollHeight(){return this.scroll.data.viewportHeight}destroy(){this.scroll.destroy()}}class a{constructor(e,t){this.el=e}update(){}getContainer(){return this.el}getScroller(){return null}scrollTop(e){return 0}contHeight(){return 0}smoothScroll(e){}scrollBottom(e){return 0}scrollBottomFixSave(e){}getScrollHeight(){return 0}destroy(){}}function l(e,t){return t.noScroll?new a(e):t.nativeScroll?new n(e,t):new i(e,t)}},"0toi":function(e,t,r){"use strict";r.r(t);r("91GP");var _=r("q1tI"),o=(r("17x9"),r("r7nW")),s=r("6aSF"),n=r("pemR");function i(){return(i=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var _ in r)Object.prototype.hasOwnProperty.call(r,_)&&(e[_]=r[_])}return e}).apply(this,arguments)}var a=e=>{var t=e.title,r=e.onClose,o=e.appearance,s=Object(n.classNames)("Modal__header","Modal__header--"+o);return _.createElement("div",{className:s},_.createElement("div",{className:"Modal__headerInner"},_.createElement("h1",{className:"Modal__headerTitle"},t),_.createElement("button",{className:"Modal__headerCross",type:"button",onClick:r},"Закрыть")))};a.defaultProps={appearance:"white"};var l=e=>{var t=e.children;return e.hasScroll?_.createElement(s.default,{className:"Modal__body"},t):_.createElement("div",{className:"Modal__body"},t)};l.defaultProps={children:null,hasScroll:!0};var c=e=>{var t=e.className,r=e.appearance,s=e.title,a=e.actionButtons,l=e.onClose,u=e.children,d=e.footerHint,h=e.hasScroll,p=Object(n.classNames)("Modal","Modal--"+r,t);return _.createElement(o.default,i({},e,{className:p}),_.createElement(c.Header,{title:s,onClose:l,appearance:r}),Boolean(u)&&_.createElement(c.Body,{hasScroll:h},u),_.createElement(c.Footer,{actionButtons:a,hint:d}))};c.Header=a,c.Body=l,c.Footer=e=>{var t=e.actionButtons,r=e.hint;return _.createElement("div",{className:"Modal__footer"},_.createElement("div",{className:"Modal__footerInner"},r&&_.createElement("div",{className:"Modal__footerHint"},r),t))},c.defaultProps=i({},o.default.defaultProps,{appearance:"white",hasScroll:l.defaultProps.hasScroll}),t.default=c},245:function(e,t,r){e.exports=r("GhLK")},"6aSF":function(e,t,r){"use strict";r.r(t),r.d(t,"default",(function(){return a}));r("91GP"),r("ioFf"),r("rGqo"),r("Btvt");var _=r("q1tI"),o=(r("17x9"),r("+/AQ")),s=r("pemR");function n(){return(n=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var _ in r)Object.prototype.hasOwnProperty.call(r,_)&&(e[_]=r[_])}return e}).apply(this,arguments)}function i(e,t){if(null==e)return{};var r,_,o=function(e,t){if(null==e)return{};var r,_,o={},s=Object.keys(e);for(_=0;_<s.length;_++)r=s[_],t.indexOf(r)>=0||(o[r]=e[r]);return o}(e,t);if(Object.getOwnPropertySymbols){var s=Object.getOwnPropertySymbols(e);for(_=0;_<s.length;_++)r=s[_],t.indexOf(r)>=0||Object.prototype.propertyIsEnumerable.call(e,r)&&(o[r]=e[r])}return o}class a extends _.Component{constructor(){super(...arguments),this.getWrapperRef=e=>{this.wrapper=e}}componentDidMount(){var e=this.props,t=e.isNative,r=e.isShadows,_=e.neverHide,s=e.onScroll;this.scroller||(this.scroller=Object(o.createScroll)(this.wrapper,{shadows:r,nativeScroll:t,hidden:!_,onScroll:s}))}componentDidUpdate(){this.scroller.update()}componentWillUnmount(){this.scroller.destroy(),this.scroller=null}render(){var e=this.props,t=e.children,r=(e.isNative,e.isShadows,e.neverHide,e.className),o=void 0===r?"":r,a=i(e,["children","isNative","isShadows","neverHide","className"]);return _.createElement("div",n({},a,{className:Object(s.classNames)("Scroll",o),ref:this.getWrapperRef}),t)}}a.defaultProps={isNative:!1,isShadows:!1,neverHide:!1,onScroll:null}},"6krn":function(e,t,r){"use strict";r.r(t),r.d(t,"getLang",(function(){return n}));var _=r("nAFc"),o=r("4+be"),s={};function n(e,t,r){void 0===t&&(t=!1);var n="number"==typeof t,i=t||n,a=e+(i?".raw":"");if(void 0===s[a]){var l=i?Object(o.getLang)(e,"raw"):Object(o.getLang)(e);"string"==typeof l?s[a]=Object(_.decodeHTMLEntities)(l):Array.isArray(l)&&(s[a]=l.map(_.decodeHTMLEntities))}if(n){var c=t;return Object(o.langNumeric)(c,s[a],r)}return s[a]||""}t.default={getLang:n}},"9nD0":function(e,t,r){"use strict";r.r(t),r.d(t,"default",(function(){return h}));var _=r("q1tI"),o=(r("17x9"),r("6krn")),s=r("6raB"),n=r("0toi"),i=r("Ht+d"),a=r("r7nW"),l=r("nAFc");class c extends _.Component{constructor(){var e;super(...arguments),e=this,this.state={code:"",errorMessage:"",loading:!1},this.codeInput=_.createRef(),this.onChange=e=>this.setState({code:e.currentTarget.value}),this.onClose=()=>{this.setState({code:"",errorMessage:"",loading:!1}),this.props.closeModal()},this.setButtonLoading=function(){var t=arguments.length>0&&void 0!==arguments[0]&&arguments[0];return e.setState({loading:t})},this.tryValidateCode=()=>{var e=this.state,t=e.code;if(!e.loading)return t.length<6?this.codeInput.current.focus():void ajax.post("restore?act=a_validate_trusted_code",{id:this.props.id,hash:this.props.hash,code:this.state.code},{showProgress:()=>this.setButtonLoading(!0),hideProgress:()=>this.setButtonLoading(!1),onFail:e=>(e&&this.setState({errorMessage:Object(l.decodeHTMLEntities)(e)}),!0),onDone:e=>{var t=e.flood,r=e.status,_=e.finished;if(this.onClose(),t)return window.nav.reload();this.props.setStatus({status:r,finished:_})}})}}render(){var e=this.state,t=e.errorMessage,r=e.code;return _.createElement(_.Fragment,null,this.props.opened&&_.createElement(a.default,{onClose:this.onClose},_.createElement(n.default.Header,{appearance:"blue",title:Object(o.getLang)("restore_trusted_request_view_code_title"),onClose:this.onClose}),_.createElement("div",{className:"RestoreTrustedRequest__codeModal"},_.createElement("div",null,Object(o.getLang)("restore_trusted_request_view_code_description")),t&&_.createElement("div",{className:"box_error",children:t}),_.createElement("div",null,_.createElement("h3",null,Object(o.getLang)("join_enter_code")),_.createElement("input",{ref:this.codeInput,maxLength:6,value:r,className:"dark",onChange:this.onChange}))),_.createElement(n.default.Footer,{actionButtons:[_.createElement(i.default,{key:0,appearance:"tertiary",onClick:this.onClose},Object(o.getLang)("box_cancel")),_.createElement(s.default,{key:1,disabled:r.length<6,onClick:this.tryValidateCode,loading:this.state.loading},Object(o.getLang)("global_submit"))]})))}}var u=r("pemR"),d=r("XpgC");class h extends _.Component{constructor(){super(...arguments),this.state={openedModal:!1,status:this.props.status,finished:!1,showUpdatedMessage:!1,showFloodLimitMessage:this.props.showFloodLimitMessage},this.toggleModal=()=>this.setState({openedModal:!this.state.openedModal}),this.showFloodLimitMessage=()=>this.setState({showFloodLimitMessage:!0}),this.setStatus=e=>{var t=e.status,r=e.finished;this.setState({status:t,finished:r}),this.timeout&&clearTimeout(this.timeout),t.not_used>0&&this.setState({showUpdatedMessage:!0})},this.goToRestore=()=>window.nav.go("/restore?act=return_page&hash="+this.props.restoreHash)}render(){var e=this.state.finished;return _.createElement("div",{className:"RestoreTrustedRequest_view"},_.createElement(c,{showFloodLimitMessage:this.showFloodLimitMessage,hash:this.props.hash,id:this.props.id,setStatus:this.setStatus,opened:this.state.openedModal,closeModal:this.toggleModal}),!e&&_.createElement("div",null,this.props.showSuccessMessage&&_.createElement("div",{className:"msg info_msg"},Object(o.getLang)("restore_trusted_request_create_success")),_.createElement("div",{className:"info"},_.createElement("h2",null,Object(o.getLang)("restore_trusted_request_view_title")),Object(o.getLang)("restore_trusted_request_view_description")),this.state.showUpdatedMessage&&_.createElement("div",{className:"msg info_msg"},Object(o.getLang)("restore_trusted_request_status_updated",this.state.status.not_used)),this.state.showFloodLimitMessage&&_.createElement("div",null,_.createElement("div",{className:"msg error"},Object(o.getLang)("restore_trusted_request_flood_limit")),this.props.restoreHash&&_.createElement("div",null,_.createElement("div",{className:"info"},Object(o.getLang)("restore_trusted_request_flood_limit_about")),_.createElement("div",{className:"info"},_.createElement(s.default,{onClick:this.goToRestore},Object(o.getLang)("restore_trusted_request_flood_limit_button"))))),!this.state.showFloodLimitMessage&&_.createElement("div",null,_.createElement("div",{className:"info"},_.createElement(s.default,{onClick:this.toggleModal},Object(o.getLang)("restore_trusted_request_view_enter_code_btn"))),_.createElement("div",{className:"RestoreTrustedRequest__friendsList RestoreTrustedRequest__friendsListView"},this.state.status.friends_statuses.map(e=>{var t=e.name,r=e.photo,s=e.used;return _.createElement("div",{className:"RestoreTrustedRequest__friendItem",key:t},_.createElement(d.default,{text:s?Object(o.getLang)("restore_trusted_request_status_validated"):Object(o.getLang)("restore_trusted_request_status_waiting"),position:"t",marginTop:0},_.createElement("div",{className:Object(u.classNames)("RestoreTrustedRequest__friendItemStatus",{"RestoreTrustedRequest__friendItemStatus--validated":s})})),_.createElement("img",{className:"RestoreTrustedRequest__friendItemPhoto",src:r,alt:t}),_.createElement("div",{className:"RestoreTrustedRequest__friendItemName"},t))})))),e&&_.createElement("div",{className:"info_msg msg_multiline"},_.createElement("h2",null,Object(o.getLang)("restore_trusted_request_success_message_title")),_.createElement("div",null,Object(o.getLang)("restore_trusted_request_success_message_description"))))}}},"BN/X":function(e,t,r){"use strict";r.r(t),r.d(t,"default",(function(){return i}));r("91GP"),r("ioFf"),r("rGqo"),r("Btvt");var _=r("q1tI"),o=(r("17x9"),r("pemR"));function s(){return(s=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var _ in r)Object.prototype.hasOwnProperty.call(r,_)&&(e[_]=r[_])}return e}).apply(this,arguments)}function n(e,t){if(null==e)return{};var r,_,o=function(e,t){if(null==e)return{};var r,_,o={},s=Object.keys(e);for(_=0;_<s.length;_++)r=s[_],t.indexOf(r)>=0||(o[r]=e[r]);return o}(e,t);if(Object.getOwnPropertySymbols){var s=Object.getOwnPropertySymbols(e);for(_=0;_<s.length;_++)r=s[_],t.indexOf(r)>=0||Object.prototype.propertyIsEnumerable.call(e,r)&&(o[r]=e[r])}return o}class i extends _.Component{render(){var e=this.props,t=e.hovered,r=e.className,i=e.children,a=n(e,["hovered","className","children"]),l=Object(o.classNames)("Link",{"Link--hovered":!!t},r);return this.props.href?_.createElement("a",s({},a,{className:l}),i):_.createElement("span",s({},a,{className:l}),i)}}i.defaultProps={href:void 0,hovered:!1}},FABD:function(e,t,r){"use strict";r.r(t),r.d(t,"default",(function(){return h}));r("91GP"),r("ioFf"),r("rGqo"),r("a1Th"),r("Btvt");var _=r("q1tI"),o=(r("17x9"),r("pemR")),s=r("vRp6"),n=r("p+C8"),i=r("XpgC");function a(){return(a=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var _ in r)Object.prototype.hasOwnProperty.call(r,_)&&(e[_]=r[_])}return e}).apply(this,arguments)}function l(e,t){if(null==e)return{};var r,_,o=function(e,t){if(null==e)return{};var r,_,o={},s=Object.keys(e);for(_=0;_<s.length;_++)r=s[_],t.indexOf(r)>=0||(o[r]=e[r]);return o}(e,t);if(Object.getOwnPropertySymbols){var s=Object.getOwnPropertySymbols(e);for(_=0;_<s.length;_++)r=s[_],t.indexOf(r)>=0||Object.prototype.propertyIsEnumerable.call(e,r)&&(o[r]=e[r])}return o}function c(e){var t=e.id,r=e.name,s=e.tokens,n=e.onRemoveToken,c=e.removeTokenTooltip,u=e.removeTokenAriaLabel,d=e.renderToken,h=e.onChange,p=e.value,E=e.placeholder,m=e.onSubmit,b=e.className,O=l(e,["id","name","tokens","onRemoveToken","removeTokenTooltip","removeTokenAriaLabel","renderToken","onChange","value","placeholder","onSubmit","className"]),g=_.useRef(),P=_.useCallback(e=>h(e),[h]),M=_.useCallback(e=>{"Esc"===e.key&&g.current&&(g.current.value="",g.current.blur(),h(e),e.stopPropagation()),"Enter"===e.key&&m()},[m]),f=_.useCallback(e=>{var t=e.target.dataset.id;n(t),g.current&&g.current.focus()},[n]);return _.createElement("div",{className:Object(o.classNames)("TokenInput",b)},_.createElement("label",{htmlFor:t,className:"TokenInput__back"}),s.map(e=>_.createElement("span",{key:e.id,className:"TokenInput__token"},_.createElement("input",{type:"hidden",name:r+"[]",value:e.value||e.id}),_.createElement("span",{className:"TokenInput__label"},d?d(e):e.text),!e.locked&&c&&_.createElement(i.default,{text:c},_.createElement("button",{"data-id":e.id,className:"TokenInput__remove",onClick:f,"aria-label":u})),!e.locked&&!c&&_.createElement("button",{"data-id":e.id,className:"TokenInput__remove",onClick:f,"aria-label":u}))),_.createElement("div",{className:"TokenInput__caret"},_.createElement("div",{className:"TokenInput__caretIn"},_.createElement("input",a({},O,{id:t,type:"text",value:p,onChange:P,onPaste:P,placeholder:0===s.length?E:"",onKeyDown:M,className:"TokenInput__input",ref:g})))))}function u(){return(u=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var _ in r)Object.prototype.hasOwnProperty.call(r,_)&&(e[_]=r[_])}return e}).apply(this,arguments)}function d(e,t){if(null==e)return{};var r,_,o=function(e,t){if(null==e)return{};var r,_,o={},s=Object.keys(e);for(_=0;_<s.length;_++)r=s[_],t.indexOf(r)>=0||(o[r]=e[r]);return o}(e,t);if(Object.getOwnPropertySymbols){var s=Object.getOwnPropertySymbols(e);for(_=0;_<s.length;_++)r=s[_],t.indexOf(r)>=0||Object.prototype.propertyIsEnumerable.call(e,r)&&(o[r]=e[r])}return o}c.defaultProps={id:"token-input",name:"tokens",removeTokenTooltip:"",removeTokenAriaLabel:"Remove item",placeholder:"",className:""};class h extends _.PureComponent{constructor(e){super(e),this.onRemoveToken=e=>{var t=this.searchContainer.offsetHeight;this.props.onRemoveToken(e.target.getAttribute("data-id")).then(()=>{this.updateScroll(t)})},this.onChange=e=>{var t=e.target.value;t!==this.value&&(this.value=t,this.props.onChange(e),this.scrollContainer.scrollTop=0)},this.onSelect=e=>{var t=this.searchContainer.offsetHeight;this.props.onSelect(e.currentTarget.getAttribute("data-id")).then(()=>{this.updateScroll(t)})},this.updateScroll=e=>{var t=this.searchContainer.offsetHeight;this.searchContainer.querySelector("#"+this.inputId).focus(),this.searchContainer.scrollTop=this.searchContainer.scrollHeight,e!==t&&(this.scrollContainer.scrollTop=this.scrollContainer.scrollTop+t-e)},this.searchContainerRef=e=>{this.searchContainer=e},this.scrollContainerRef=e=>{var t=e;if(e&&e.container)for(t=e;t.container;)t=t.container;this.scrollContainer=t},this.value=e.value,this.inputId="token-input-"+Math.floor(1e6*Math.random()).toString(16)}render(){var e=this.props,t=e.className,r=e.tokens,i=(e.onSelect,e.renderToken),a=e.onRemoveToken,l=e.removeTokenPlaceholder,h=e.value,p=e.placeholder,E=e.useInfiniteScroll,m=e.loadMore,b=e.hasMore,O=e.virtualized,g=e.notFoundText,P=e.children,M=e.emptyText,f=e.isSearching,v=d(e,["className","tokens","onSelect","renderToken","onRemoveToken","removeTokenPlaceholder","value","placeholder","useInfiniteScroll","loadMore","hasMore","virtualized","notFoundText","children","emptyText","isSearching"]),D=E?s.default:"div",R=E?{loadMore:m,hasMore:b,virtualized:O,useCapture:!1}:{},T=[].concat(P);return _.createElement("div",{className:Object(o.classNames)("MultiSelect",t)},_.createElement("div",{className:"MultiSelect__search",ref:this.searchContainerRef},_.createElement(c,u({id:this.inputId,tokens:r,onRemoveToken:a,removeTokenTooltip:l,removeTokenAriaLabel:l,placeholder:p,onChange:this.onChange,onSubmit:()=>{},renderToken:i,value:h},v))),0===T.length&&(h||M)&&!f&&_.createElement("div",{className:"MultiSelect__empty"},_.createElement("div",{className:"MultiSelect__emptyIn"},h?g:M)),_.createElement(D,u({className:"MultiSelect__scroll",ref:this.scrollContainerRef},R),T.map(e=>_.createElement(n.default,{className:"MultiSelect__suggestsItem","data-id":e.props["data-id"],onClick:this.onSelect,key:e.key},e))))}}h.defaultProps={removeTokenPlaceholder:"",placeholder:"",value:"",useInfiniteScroll:!1,notFoundText:"Not found"}},GhLK:function(e,t,r){"use strict";r.r(t);var _=r("aPhM");window.Restore=_.Restore;try{stManager.done(jsc("web/restore.js"))}catch(e){}},NsuH:function(e,t,r){"use strict";r.r(t),r.d(t,"default",(function(){return n}));var _=r("q1tI"),o=(r("17x9"),r("pemR")),s=r("BN/X");class n extends _.PureComponent{constructor(e){super(e),this.onError=()=>{this.setState({errored:!0})},this.state={}}getPhotoImage(){var e=this.props,t=e.photo,r=e.title;return _.createElement("img",{src:this.state.errored?"/images/camera_c.gif":t,alt:r,onError:this.onError,className:"Entity__photo"})}render(){var e=this.props,t=e.className,r=e.style,n=e.size,i=e.photo,a=e.href,l=e.title,c=e.description,u=e.target,d={["Entity--size"+n]:!!n};return _.createElement("div",{className:Object(o.classNames)("Entity",t,d),style:r},_.createElement("div",{className:"Entity__aside"},"string"==typeof i?a?_.createElement("a",{href:a,target:u},this.getPhotoImage()):this.getPhotoImage():i),_.createElement("div",{className:"Entity__main"},l&&a?_.createElement("div",{className:"Entity__title"},_.createElement(s.default,{href:a,dangerouslySetInnerHTML:{__html:l},target:u})):_.createElement("div",{className:"Entity__title",dangerouslySetInnerHTML:{__html:l}}),"string"!=typeof c?_.createElement("div",{className:"Entity__description"},c):_.createElement("div",{className:"Entity__description",dangerouslySetInnerHTML:{__html:c}})))}}n.defaultProps={size:null,photo:"",title:"",description:"",href:"",target:null}},PjZB:function(e,t,r){"use strict";r.r(t),r.d(t,"default",(function(){return s}));r("rGqo"),r("a1Th"),r("Btvt");var _=r("q1tI"),o=(r("17x9"),r("pemR"));class s extends _.Component{constructor(e){super(e),this.id=Math.round(1e6*Math.random()).toString(16),this.setSpinnerParams(e)}componentWillReceiveProps(e){this.setSpinnerParams(e)}setSpinnerParams(e){this.offset=Math.round(Math.PI*e.size),this.c=.5*e.size,this.animation=function(e,t){if(!e||!t)return"";var r=Object.keys(t).map(e=>e+" {"+Object.keys(t[e]).map(r=>r+":"+t[e][r]).join(";")+"}").join("");return`@-webkit-keyframes ${e} {${r}} @keyframes ${e} {${r}}`}("dash"+this.id,{"0%":{"stroke-dashoffset":this.offset},"50%":{"stroke-dashoffset":Math.round(.25*this.offset),transform:"rotate(135deg)"},"100%":{"stroke-dashoffset":this.offset,transform:"rotate(360deg)"}})}render(){var e=this.props,t=e.style,r=e.color,s=e.size,n=e.duration,i=e.strokeWidth,a=e.className,l=this.id,c=this.offset,u=this.animation,d=Object(o.classNames)("Spinner",a);return _.createElement("div",{className:d,style:t},_.createElement("svg",{className:"Spinner__svg",width:s,height:s,viewBox:`0 0 ${s} ${s}`,xmlns:"http://www.w3.org/2000/svg"},_.createElement("g",{style:{width:s,height:s,transformOrigin:.5*s+"px "+.5*s+"px"}},_.createElement("style",{dangerouslySetInnerHTML:{__html:u}}),_.createElement("circle",{className:"Spinner__path",fill:"none",stroke:r,strokeDasharray:c,strokeDashoffset:c,strokeWidth:i,style:{animationName:"dash"+l,animationTimingFunction:"ease-in-out",animationDuration:n+"s",animationIterationCount:"infinite"},cx:.5*s,cy:.5*s,r:.5*s-.5*i}))))}}s.defaultProps={color:"#5181b8",size:19,strokeWidth:2,duration:1.4,className:""}},RLcI:function(e,t,r){"use strict";r.r(t),r.d(t,"default",(function(){return m}));r("rGqo"),r("Btvt");var _=r("q1tI"),o=(r("17x9"),r("6krn")),s=r("6raB"),n=(r("91GP"),r("OG14"),r("VRzm"),r("0toi")),i=r("Ht+d"),a=r("FABD"),l=r("NsuH"),c=r("pemR"),u=r("r7nW"),d=r("RdBX");function h(){return(h=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var _ in r)Object.prototype.hasOwnProperty.call(r,_)&&(e[_]=r[_])}return e}).apply(this,arguments)}class p extends _.Component{constructor(){super(...arguments),this.state={selected:{},value:""},this.onChange=e=>{this.setState({value:e.currentTarget.value})},this.onRemoveToken=e=>new Promise(t=>{var r=this.selected;if(!r.hasOwnProperty(e))return t();delete r[e],this.setSelected(r),t()}),this.onSelect=e=>new Promise(t=>{var r=h({},this.selected);r.hasOwnProperty(e)?delete r[e]:r[e]=!0,this.setSelected(r),t()}),this.setSelected=e=>{this.setState({selected:e})},this.onClose=()=>{this.setState({value:""}),this.props.closeModal()},this.saveSelected=()=>{this.onClose(),this.props.setSelected(this.selected)}}componentDidMount(){this.indexer=new d.vkIndexer(this.props.friendsList,e=>e.name)}componentDidUpdate(e,t,r){e.opened!==this.props.opened&&!e.opened&&this.props.opened&&this.props.selected!==this.state.selected&&Object.keys(this.props.selected).length>0&&this.setState({selected:this.props.selected})}get friendsList(){var e=this.state.value.trim();return e?this.indexer.search(e):this.props.friendsList}get selected(){return this.state.selected}get selectedCount(){return Object.keys(this.selected).length}get neededCountSelected(){return this.selectedCount>=this.props.minFriendsCount}get tokens(){return Object.keys(this.selected).map(e=>({text:unclean(this.props.friendsList.slice().filter(t=>{var r=t.id;return e===r})[0].name),id:e}))}get remainingCount(){var e=this.props.minFriendsCount-this.selectedCount;return Object(o.getLang)("restore_trusted_request_create_select_X_friends",e)}render(){return _.createElement(_.Fragment,null,this.props.opened&&_.createElement(u.default,{onClose:this.onClose},_.createElement(n.default.Header,{appearance:"blue",title:Object(o.getLang)("restore_trusted_request_create_search_box_title"),onClose:this.onClose}),_.createElement("div",{className:"RestoreTrustedRequest__modal"},_.createElement(a.default,{className:"RestoreTrustedRequest__multiSelect",tokens:this.tokens,removeTokenPlaceholder:Object(o.getLang)("restore_trusted_request_create_remove_selected"),onRemoveToken:this.onRemoveToken,placeholder:Object(o.getLang)("restore_trusted_request_create_search_placeholder"),value:this.state.value,onChange:this.onChange,onSelect:this.onSelect,useInfiniteScroll:!0,hasMore:!1,virtualized:!0,loadMore:()=>{},notFoundText:Object(o.getLang)("restore_trusted_request_search_not_found"),autoFocus:!0,isSearching:!1},this.friendsList.slice().map(e=>{var t=e.id,r=e.name,o=e.photo;return _.createElement("div",{className:Object(c.classNames)("RestoreTrustedRequest__entity",{"RestoreTrustedRequest__entity--selected":this.selected.hasOwnProperty(t)}),key:t,"data-id":t},_.createElement(l.default,{size:"34",title:r,photo:o}))}))),_.createElement(n.default.Footer,{hint:this.neededCountSelected?"":this.remainingCount,actionButtons:[_.createElement(i.default,{key:0,appearance:"tertiary",onClick:this.onClose},Object(o.getLang)("box_cancel")),_.createElement(i.default,{key:1,disabled:!this.neededCountSelected,onClick:this.saveSelected,appearance:"primary"},Object(o.getLang)("global_save"))]})))}}var E=r("nAFc");class m extends _.Component{constructor(){var e;super(...arguments),e=this,this.state={openedModal:!1,loading:!1,selected:{},errorMessage:""},this.setButtonLoading=function(){var t=arguments.length>0&&void 0!==arguments[0]&&arguments[0];return e.setState({loading:t})},this.tryCreateRequest=()=>{var e=this.selected;0!==e.length&&ajax.post("restore?act=a_create_trusted_request",{fhash:this.props.forgotHash,hash:this.props.createHash,friends:e.join(",")},{showProgress:()=>this.setButtonLoading(!0),hideProgress:()=>this.setButtonLoading(!1),onFail:e=>(this.setState({errorMessage:Object(E.decodeHTMLEntities)(e)}),!0),onDone:e=>{window.nav.go(e+"&m=1")}})},this.toggleModal=()=>this.setState({openedModal:!this.state.openedModal}),this.setSelected=e=>{this.setState({selected:e})}}get selected(){return Object.keys(this.state.selected)}get selectedFriends(){return this.props.friendsList.slice().filter(e=>{var t=e.id;return inArray(t,this.selected)})}render(){var e=this.selected.length>0,t=this.state.errorMessage;return _.createElement("div",null,_.createElement(p,{selected:this.state.selected,setSelected:this.setSelected,closeModal:this.toggleModal,opened:this.state.openedModal,minFriendsCount:this.props.minFriendsCount,friendsList:this.props.friendsList}),_.createElement("div",{className:"page_block_header clear_fix"},_.createElement("div",{className:"page_block_header_inner _header_inner"},_.createElement("div",{className:"ui_crumb"},Object(o.getLang)("restore_title")),_.createElement("div",{className:"ui_crumb_sep"}),_.createElement("div",{className:"ui_crumb"},Object(o.getLang)("restore_trusted_request_create_title")))),_.createElement("div",{className:"page_section restore_page_section"},!e&&_.createElement("div",null,_.createElement("div",{className:"info"},_.createElement("h2",null,Object(o.getLang)("restore_trusted_request_create_title_count",this.props.minFriendsCount)),Object(o.getLang)("restore_trusted_request_create_description")),_.createElement("div",{className:"info"},_.createElement(s.default,{appearance:"secondary",onClick:this.toggleModal},Object(o.getLang)("restore_trusted_request_create_select_friends_btn")))),e&&_.createElement("div",null,_.createElement("div",{className:"info"},_.createElement("h2",null,Object(o.getLang)("restore_trusted_request_create_check_title")),Object(o.getLang)("restore_trusted_request_create_check_description")),t&&_.createElement("div",{className:"error RestoreTrustedRequest__error"},t),_.createElement("div",{className:"section_row RestoreTrustedRequest__friendsList"},this.selectedFriends.map(e=>{var t=e.id,r=e.name,o=e.photo;return _.createElement("div",{className:"RestoreTrustedRequest__friendItem",key:t},_.createElement("img",{className:"RestoreTrustedRequest__friendItemPhoto",src:o,alt:r}),_.createElement("div",{className:"RestoreTrustedRequest__friendItemName"},r))})),_.createElement("div",{className:"info RestoreTrustedRequest__buttons"},_.createElement(s.default,{onClick:this.tryCreateRequest,loading:this.state.loading},Object(o.getLang)("restore_trusted_request_create_check_finish_btn")),_.createElement(s.default,{appearance:"secondary",onClick:this.toggleModal},Object(o.getLang)("restore_trusted_request_create_check_edit_btn"))))))}}},RdBX:function(e,t,r){"use strict";r.r(t),r.d(t,"vkIndexer",(function(){return _}));r("Vd3H"),r("OG14"),r("a1Th"),r("Btvt"),r("KKXr"),r("Oyvg");function _(e,t,r){this.list=e,this.iterCur=0,this.iterEnd=e?e.length:0,this.index={},this.callback=r||function(){},this.prepareFunc=t||function(e){return e},setTimeout(this.indexIteration.bind(this),10)}_.prototype.delimiter=_.delimiter=new RegExp("[\\s\\-\\.,\\\"\\'\\«\\(\\)\\[\\]\\{\\}\\#\\+\\?\\\\]+","g"),_.prototype.trimmer=new RegExp("^[\\s\\-\\.,\\\"\\'\\«\\(\\)\\[\\]\\{\\}\\+\\?\\\\]+|[\\s\\-,\\\"\\'\\«\\(\\)\\[\\]\\{\\}\\\\]+$","g"),_.prototype.toTranslit={1072:"a",1073:"b",1074:"v",1075:"g",1076:"d",1077:"e",1078:"zh",1079:"z",1080:"i",1081:"y",1082:"k",1083:"l",1084:"m",1085:"n",1086:"o",1087:"p",1088:"r",1089:"s",1090:"t",1091:"u",1092:"f",1093:"h",1094:"ts",1095:"ch",1096:"sh",1097:"sh",1099:"y",1101:"e",1102:"yu",1103:"ya",1105:"e",1098:"",1100:""},_.prototype.toLocalCase={f:"a",",":"b","<":"b",d:"v",u:"g",l:"d",t:"e",";":"zh",":":"zh",p:"z",b:"i",q:"y",r:"k",k:"l",v:"m",y:"n",j:"o",g:"p",h:"r",c:"s",n:"t",e:"u",a:"f","[":"h","{":"kh",w:"ts",x:"ch",i:"sh",o:"sh",s:"y","'":"e",'"':"e",".":"yu",">":"yu",z:"ya","`":"e","~":"e",m:"","]":"","}":""},_.prototype.toLocalTranslit={1072:"f",1074:"d",1075:"u",1076:"l",1077:"t",1079:"p",1080:"b",1081:"q",1082:"r",1083:"k",1084:"v",1085:"y",1086:"j",1087:"g",1088:"h",1089:"c",1090:"n",1091:"e",1092:"a",1094:"w",1095:"x",1096:"i",1097:"o",1099:"s",1103:"z",1098:"m"},_.prototype.indexIteration=function(){for(var e=Math.min(this.iterEnd,this.iterCur+200),t=this.iterCur;t<e;t++){var r=this.list[t];try{r._order=t}catch(e){}this.add(r)}this.iterCur=t,t>=this.iterEnd?this.callback(this):setTimeout(this.indexIteration.bind(this),10)},_.prototype.strToPrefixes=function(e){for(var t={},r=winToUtf(e).toLowerCase().split(this.delimiter),_=r.length;_--;){var o=r[_],s="";if(o){for(var n=0;n<6;n++){var i=o.charCodeAt(n);if(i){var a=this.toTranslit[i],l=o.substr(n,1);s+=null!=a?a:l}}t[s]=1}}return t},_.prototype.strToSearchPrefixes=function(e){for(var t=[],r=e.toLowerCase().split(this.delimiter),_=r.length;_--;){var o={},s=r[_],n="",i="",a="",l=s.length>1;if(s){for(var c=0;c<6;c++){var u=s.charCodeAt(c);if(u){var d=this.toTranslit[u],h=s.substr(c,1);if(n+=null!=d?d:h,l){var p=this.toLocalCase[h],E=this.toLocalTranslit[u];i+=null!=p?p:h,a+=null!=E?E:h}}}o[n]=1,l&&(o[i]=2,o[a]=3),t.push(o)}}return t},_.prototype.toIndexTree=function(e,t){for(var r=this.index,_=0;_<6;_++){var o=e.substr(_,1)||-1;r=r[o]?r[o]:r[o]=5==_?[]:{}}r.push(t)},_.prototype.remove=function(e){var t=this.prepareFunc(e),r=this.strToPrefixes(t);for(var _ in r)if(r.hasOwnProperty(_)){for(var o=this.index,s=0;s<6;s++){var n=_.substr(s,1)||-1;if(!o[n])break;o=o[n]}if(o.length)for(var i in o)if(this.equals(o[i],e)){o.splice(i,1);break}}},_.prototype.equals=function(e,t){for(var r in e)if(e.hasOwnProperty(r))switch(typeof e[r]){case"object":if(!this.equals(e[r],t[r]))return!1;break;case"function":if(void 0===e[r]||e[r].toString()!=t[r].toString())return!1;break;default:if(e[r]!=t[r])return!1}for(var _ in t)if(void 0===t[_])return!1;return!0},_.prototype.intersect=function(e,t){var r=[];if(isNumeric(e[0])||isNumeric(t[0]))return e.filter((function(e){return-1!==t.indexOf(e)}));for(;e.length>0&&t.length>0;)e[0]._order<t[0]._order?e.shift():(e[0]._order>t[0]._order||this.equals(e[0],t[0])&&r.push(e.shift()),t.shift());return r},_.prototype.add=function(e){var t=this.prepareFunc(e),r=this.strToPrefixes(t);for(var _ in r)r.hasOwnProperty(_)&&this.toIndexTree(_,e)},_.prototype.search=function(e){var t=this.index,r=this.strToSearchPrefixes(e),_=[],o=!1;for(var s in r)if(r.hasOwnProperty(s)){if(o&&!_)break;var n=this.localSearch(r[s],0,t);n.sort((function(e,t){return e._order-t._order})),_=o?this.intersect(_,n):n,o=!0}for(var i=_[0],a=_.length+1,l=[],c=1;c<a;c++){var u=_[c];u!=i&&(l.push(i),i=u)}return l},_.prototype.localSearch=function(e,t,r){if(!r)return[];var _={};for(var o in e)if(e.hasOwnProperty(o)){var s=o.substr(t,1)||-1;_[s]||(_[s]={}),_[s][o]=1}if(6==t++||!r)return r;var n=[];for(var i in _)if(-1==i)for(var a in r)r.hasOwnProperty(a)&&n.push.apply(n,this.localSearch(_[i],t,r[a]));else{var l=this.localSearch(_[i],t,r[i]);n.push.apply(n,l)}return n}},UlUB:function(e,t,r){"use strict";function _(e,t){var r,_,o=!1;return function s(){if(o)return r=arguments,void(_=this);e.apply(this,arguments),o=!0,setTimeout((function(){o=!1,r&&(s.apply(_,r),r=_=null)}),t)}}r.r(t),r.d(t,"throttle",(function(){return _}))},XpgC:function(e,t,r){"use strict";r.r(t),r.d(t,"default",(function(){return l}));r("91GP");var _=r("q1tI"),o=r("i8i4"),s=(r("17x9"),r("pemR")),n=r("clTp");function i(){return(i=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var _ in r)Object.prototype.hasOwnProperty.call(r,_)&&(e[_]=r[_])}return e}).apply(this,arguments)}var a=e=>{var t=e.position,r=e.align,_=e.text,o=e.rect,s=e.marginTop,n=e.marginLeft,i=e.maxWidth,a=e.appearance,l=e.className,c=o.left,u=o.top;switch(t){case"t":c+=.5*o.width;break;case"r":c+=o.width,u+=.5*o.height;break;case"b":c+=.5*o.width,u+=o.height;break;case"l":u+=.5*o.height}return{tooltip:{position:t,align:r,text:_,x:c=Math.round(c+n),y:u=Math.round(u+s),maxWidth:i,appearance:a,className:l}}};class l extends _.Component{constructor(e){super(e),this.onMouseEnter=e=>{if(this.state.el){var t=this.props,r=t.text,_=t.position,o=t.align,s=t.marginTop,i=t.marginLeft,a=t.maxWidth,l=t.appearance,c=t.className,u=Object(n.default)(this.state.el);this.update({text:r,position:_,align:o,rect:u,marginTop:s,marginLeft:i,maxWidth:a,appearance:l,className:c})}},this.onMouseLeave=e=>this.update(),this.onTransitionEnd=e=>{"visibility"===e.propertyName&&this.state.tooltip&&this.setState({tooltip:void 0})},this.renderTooltip=()=>{if(!this.state.tooltip)return null;var e=this.state.tooltip,t=e.x,r=e.y,o=e.position,n=e.align,i=e.text,a=e.removed,l=e.maxWidth,c=e.appearance,u=e.className,d=Object(s.classNames)("Tooltip","Tooltip--"+o,"Tooltip--"+c,{"Tooltip--removed":!!a,["Tooltip--align-"+n]:"t"===o||"b"===o},u);return _.createElement("div",{className:d,style:{top:r,left:t},onTransitionEnd:this.onTransitionEnd},_.createElement("div",{className:"Tooltip__in",style:{maxWidth:l},dangerouslySetInnerHTML:{__html:i}}))},this.state={}}componentDidMount(){var e=o.findDOMNode(this);this.setState({el:e}),e.addEventListener("mouseenter",this.onMouseEnter),e.addEventListener("mouseleave",this.onMouseLeave)}componentWillUnmount(){this.state.el.removeEventListener("mouseenter",this.onMouseEnter),this.state.el.removeEventListener("mouseleave",this.onMouseLeave)}static getDerivedStateFromProps(e,t){return t.tooltip&&["text","position","align","maxWidth","appearance"].some(r=>e[r]!==t.tooltip[r])?a(i({},e,{rect:Object(n.default)(t.el)})):null}update(e){if(!e)return this.setState({tooltip:Object.assign({},this.state.tooltip,{removed:!0})});this.setState(a(e))}render(){var e=this.renderTooltip();return e?(this.defaultNode||"undefined"==typeof window||(this.defaultNode=document.createElement("div"),document.body.appendChild(this.defaultNode)),_.createElement(_.Fragment,null,this.props.children,o.createPortal(e,this.defaultNode))):this.props.children}}l.defaultProps={position:"b",align:"center",marginTop:0,marginLeft:0,appearance:"dark"}},aPhM:function(__webpack_module__,__webpack_exports__,__webpack_require__){"use strict";__webpack_require__.r(__webpack_exports__),__webpack_require__.d(__webpack_exports__,"Restore",(function(){return Restore}));var core_js_modules_es6_object_assign__WEBPACK_IMPORTED_MODULE_0__=__webpack_require__("91GP"),core_js_modules_web_dom_iterable__WEBPACK_IMPORTED_MODULE_1__=__webpack_require__("rGqo"),core_js_modules_es6_object_to_string__WEBPACK_IMPORTED_MODULE_2__=__webpack_require__("Btvt"),core_js_modules_es6_regexp_split__WEBPACK_IMPORTED_MODULE_3__=__webpack_require__("KKXr"),core_js_modules_es6_regexp_constructor__WEBPACK_IMPORTED_MODULE_4__=__webpack_require__("Oyvg"),core_js_modules_es6_regexp_replace__WEBPACK_IMPORTED_MODULE_5__=__webpack_require__("pIFo"),_lib_dom__WEBPACK_IMPORTED_MODULE_6__=__webpack_require__("zxIV"),_lib_scroll__WEBPACK_IMPORTED_MODULE_7__=__webpack_require__("lXE5"),_lib_ui__WEBPACK_IMPORTED_MODULE_8__=__webpack_require__("v+DW"),react__WEBPACK_IMPORTED_MODULE_9__=__webpack_require__("q1tI"),react_dom__WEBPACK_IMPORTED_MODULE_10__=__webpack_require__("i8i4"),_web_restore_TrustedRequest_TrustedRequest__WEBPACK_IMPORTED_MODULE_11__=__webpack_require__("RLcI"),_web_restore_TrustedRequest_TrustedRequestView__WEBPACK_IMPORTED_MODULE_12__=__webpack_require__("9nD0"),_web_lib_react_lang_utils__WEBPACK_IMPORTED_MODULE_13__=__webpack_require__("6krn");function _extends(){return(_extends=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var _ in r)Object.prototype.hasOwnProperty.call(r,_)&&(e[_]=r[_])}return e}).apply(this,arguments)}var Restore={maxPhotosWithType:1,maxPhotos:2,onlineInDayNoOwner:1,onlineInDayOwner:2,onlineInWeeksNoOwner:3,onlineInWeeksOwner:4,submitAuthCode(e){var t=Object(_lib_dom__WEBPACK_IMPORTED_MODULE_6__.ge)("authBtn"),r=Object(_lib_dom__WEBPACK_IMPORTED_MODULE_6__.ge)("code_input"),_=trim(Object(_lib_dom__WEBPACK_IMPORTED_MODULE_6__.val)(r));if(_.length<5)return Object(_lib_ui__WEBPACK_IMPORTED_MODULE_8__.notaBene)(r);ajax.post("login?act=a_auth_by_code",{hash:e,code:_},{onDone(e,r){showMsg("error",e,"error",!0),r&&Object(_lib_ui__WEBPACK_IMPORTED_MODULE_8__.disableButton)(t,!0)},showProgress:_lib_ui__WEBPACK_IMPORTED_MODULE_8__.lockButton.pbind(t),hideProgress:_lib_ui__WEBPACK_IMPORTED_MODULE_8__.unlockButton.pbind(t)})},submitInstantAuthAsk(e,t){cur.authAskSureBox.hide(),cur.resetPasswordIA=t,Restore.submitForgotPassword(e)},startCreateTrustedRequest(e,t,r){var _=Object(_lib_dom__WEBPACK_IMPORTED_MODULE_6__.ge)("forgot_panel");ajax.post("restore?act=a_start_trusted_request",{fhash:t,hash:r},{showProgress:()=>Object(_lib_ui__WEBPACK_IMPORTED_MODULE_8__.lockButton)(e),hideProgress:()=>Object(_lib_ui__WEBPACK_IMPORTED_MODULE_8__.unlockButton)(e),onDone:(e,t,r,o)=>react_dom__WEBPACK_IMPORTED_MODULE_10__.render(react__WEBPACK_IMPORTED_MODULE_9__.createElement(_web_restore_TrustedRequest_TrustedRequest__WEBPACK_IMPORTED_MODULE_11__.default,{createHash:t,forgotHash:e,friendsList:r,minFriendsCount:o}),_)})},initTrustedRequestView(e,t,r){var _=arguments.length>3&&void 0!==arguments[3]&&arguments[3],o=arguments.length>4&&void 0!==arguments[4]?arguments[4]:null,s=Object(_lib_dom__WEBPACK_IMPORTED_MODULE_6__.ge)("trusted_request_page"),n=nav.objLoc.m;n&&nav.setLoc(_extends({},nav.objLoc,{m:void 0})),react_dom__WEBPACK_IMPORTED_MODULE_10__.render(react__WEBPACK_IMPORTED_MODULE_9__.createElement(_web_restore_TrustedRequest_TrustedRequestView__WEBPACK_IMPORTED_MODULE_12__.default,{showFloodLimitMessage:_>0,restoreHash:o,showSuccessMessage:n,hash:t,status:r,id:e}),s)},forgotNoEmailAccess:(e,t,r)=>(cancelEvent(t),Restore.submitForgotPassword(r,null,1)),submitForgotPassword(hash){var canContactFriends=arguments.length>1&&void 0!==arguments[1]?arguments[1]:null,noEmailAccess=arguments.length>2&&void 0!==arguments[2]?arguments[2]:0,btn=Object(_lib_dom__WEBPACK_IMPORTED_MODULE_6__.ge)("submitBtn"),loginInput=Object(_lib_dom__WEBPACK_IMPORTED_MODULE_6__.ge)("login_input"),lastNameInput=Object(_lib_dom__WEBPACK_IMPORTED_MODULE_6__.ge)("lastname_input");if(loginInput){var login=Object(_lib_dom__WEBPACK_IMPORTED_MODULE_6__.val)(loginInput);if(login.length<3)return Object(_lib_ui__WEBPACK_IMPORTED_MODULE_8__.notaBene)(loginInput);cur.restoreForgotPassParams.login=login}if(lastNameInput){var lastName=Object(_lib_dom__WEBPACK_IMPORTED_MODULE_6__.val)(lastNameInput);if(lastName.length<1)return Object(_lib_dom__WEBPACK_IMPORTED_MODULE_6__.elfocus)("lastname_input");cur.restoreForgotPassParams.lastName=lastName}ajax.post("login?act=a_forgot",{login:cur.restoreForgotPassParams.login,lname:cur.restoreForgotPassParams.lastName,hash:cur.resetPasswordTHash,ia:cur.resetPasswordIA,sure:hash,can_contact_friends:canContactFriends,no_email_access:noEmailAccess},{onDone(result,content,script){if(result=intval(result),0===result)showMsg("error",content,"error",!0);else if(1===result)""!==content&&(Object(_lib_dom__WEBPACK_IMPORTED_MODULE_6__.val)("forgot_panel",content),showBackLink("/restore"),Object(_lib_dom__WEBPACK_IMPORTED_MODULE_6__.hide)(geByClass1("top_nav_link",Object(_lib_dom__WEBPACK_IMPORTED_MODULE_6__.ge)("top_links"))),Object(_lib_dom__WEBPACK_IMPORTED_MODULE_6__.show)("top_links")),""!==script&&eval(script);else{if(2===result)return Restore.startCreateTrustedRequest(btn,content.forgot_hash,content.trusted_hash);if(3===result){var processRequest=e=>{curBox().hide(),Restore.submitForgotPassword(hash,e,noEmailAccess)};return showFastBox(Object(_web_lib_react_lang_utils__WEBPACK_IMPORTED_MODULE_13__.getLang)("restore_trusted_request_create_message_title"),Object(_web_lib_react_lang_utils__WEBPACK_IMPORTED_MODULE_13__.getLang)("restore_trusted_request_create_message"),Object(_web_lib_react_lang_utils__WEBPACK_IMPORTED_MODULE_13__.getLang)("restore_trusted_request_create_message_yes"),()=>processRequest(1),Object(_web_lib_react_lang_utils__WEBPACK_IMPORTED_MODULE_13__.getLang)("restore_trusted_request_create_message_no"),()=>processRequest(0))}}},showProgress:_lib_ui__WEBPACK_IMPORTED_MODULE_8__.lockButton.pbind(btn),hideProgress:_lib_ui__WEBPACK_IMPORTED_MODULE_8__.unlockButton.pbind(btn)})},submitForgotPasswordByPhone(e,t,r){var _=Object(_lib_dom__WEBPACK_IMPORTED_MODULE_6__.ge)("submitBtn"),o=Object(_lib_dom__WEBPACK_IMPORTED_MODULE_6__.val)("password"),s=Object(_lib_dom__WEBPACK_IMPORTED_MODULE_6__.val)("password2"),n=null;if(""===e){if(""===(e=trim(Object(_lib_dom__WEBPACK_IMPORTED_MODULE_6__.val)("phone_login"))))return Object(_lib_ui__WEBPACK_IMPORTED_MODULE_8__.notaBene)("phone_login");n=1}return o.length?s.length?void ajax.post("login?act=a_forgot_by_phone",{hash:t,shash:r,login:e,password:o,password2:s,manually:n},{onDone(e,t){1==e?Object(_lib_dom__WEBPACK_IMPORTED_MODULE_6__.val)("restore_password_form",t):(Object(_lib_dom__WEBPACK_IMPORTED_MODULE_6__.val)("error",t),Object(_lib_dom__WEBPACK_IMPORTED_MODULE_6__.show)("error"))},showProgress:_lib_ui__WEBPACK_IMPORTED_MODULE_8__.lockButton.pbind(_),hideProgress:_lib_ui__WEBPACK_IMPORTED_MODULE_8__.unlockButton.pbind(_)}):Object(_lib_ui__WEBPACK_IMPORTED_MODULE_8__.notaBene)("password2"):Object(_lib_ui__WEBPACK_IMPORTED_MODULE_8__.notaBene)("password")},initForgotPassword(){showBackLink(),cur.oldLd=window.onLoginDone,cur.restoreForgotPassParams={},window.onLoginDone=()=>{nav.go("/",{force:!0,noback:!0})},cur.destroy.push(e=>{window.onLoginDone=e.oldLd,delete cur.restoreForgotPassParams}),Object(_lib_dom__WEBPACK_IMPORTED_MODULE_6__.elfocus)("login_input")},showMsgBox(e,t,r){setTimeout(showFastBox({title:t,width:440,onHide(){Object(_lib_dom__WEBPACK_IMPORTED_MODULE_6__.elfocus)(r)}},e).hide,8e3)},closeRequest(e){var t={hash:cur.options.cancel_hash,rhash:cur.options.hash,rid:cur.options.request_id};ajax.post("restore?act=a_cancel_request_by_author",t,{showProgress:_lib_ui__WEBPACK_IMPORTED_MODULE_8__.lockButton.pbind(e),hideProgress:_lib_ui__WEBPACK_IMPORTED_MODULE_8__.unlockButton.pbind(e),onDone(){curBox().hide()}})},closeRequestBox(){showFastBox(Object(_web_lib_react_lang_utils__WEBPACK_IMPORTED_MODULE_13__.getLang)("global_box_confirm_title"),Object(_web_lib_react_lang_utils__WEBPACK_IMPORTED_MODULE_13__.getLang)("restore_you_sure_want_cancel_request"),Object(_web_lib_react_lang_utils__WEBPACK_IMPORTED_MODULE_13__.getLang)("box_no"),!1,Object(_web_lib_react_lang_utils__WEBPACK_IMPORTED_MODULE_13__.getLang)("box_yes"),Restore.closeRequest)},showResult(e,t,r){var _=arguments.length>3&&void 0!==arguments[3]&&arguments[3],o=arguments.length>4&&void 0!==arguments[4]&&arguments[4];cur.wasShown&&cur.wasShown!=e&&Object(_lib_dom__WEBPACK_IMPORTED_MODULE_6__.hide)(cur.wasShown),cur.wasShown=e;var s=Object(_lib_dom__WEBPACK_IMPORTED_MODULE_6__.ge)(e);return Object(_lib_dom__WEBPACK_IMPORTED_MODULE_6__.val)(s,t),Object(_lib_dom__WEBPACK_IMPORTED_MODULE_6__.isVisible)(s)||Object(_lib_dom__WEBPACK_IMPORTED_MODULE_6__.show)(s),Object(_lib_dom__WEBPACK_IMPORTED_MODULE_6__.toggleClass)(s,"msg_multiline",!o),setTimeout(()=>{_?Object(_lib_scroll__WEBPACK_IMPORTED_MODULE_7__.scrollToY)(Object(_lib_dom__WEBPACK_IMPORTED_MODULE_6__.getXY)(r)[1]-100,200):Object(_lib_scroll__WEBPACK_IMPORTED_MODULE_7__.scrollToY)(Object(_lib_dom__WEBPACK_IMPORTED_MODULE_6__.getXY)(s)[1]-20,200),setTimeout(_lib_dom__WEBPACK_IMPORTED_MODULE_6__.elfocus.pbind(r),201)},1),!1},checkPhoneOnBlur(e){var t=e,r=Object(_lib_dom__WEBPACK_IMPORTED_MODULE_6__.val)(t).replace(/[^0-9]/g,"");if(!Object(_lib_dom__WEBPACK_IMPORTED_MODULE_6__.isVisible)(t)||/^[1-9][0-9]{6,14}$/.test(r)){var _=function(e,t){var _="request_phone_check_res";if(2===e?(cur.wasShown&&cur.wasShown!=_&&Object(_lib_dom__WEBPACK_IMPORTED_MODULE_6__.hide)(cur.wasShown),cur.wasShown=_,Object(_lib_dom__WEBPACK_IMPORTED_MODULE_6__.val)(_,t),Object(_lib_dom__WEBPACK_IMPORTED_MODULE_6__.isVisible)(_)||setTimeout(()=>{slideDown(_,150)},50),cur.checkedPhones[r]=[e,t]):Object(_lib_dom__WEBPACK_IMPORTED_MODULE_6__.isVisible)(_)&&slideUp(_,200),3==e&&!cur.restoreNoEmailAccess)return Object(_lib_dom__WEBPACK_IMPORTED_MODULE_6__.hide)("submit_wrapper"),Restore.changeFormStep("phones","back_link");Restore.checkedPasswordStatus()};cur.checkedPhones=cur.checkedPhones||{},r in cur.checkedPhones?_(cur.checkedPhones[r][0],cur.checkedPhones[r][1]):ajax.post("restore?act=a_check_phone",{hash:cur.options.fhash,phone:r},{onDone:_})}},checkEmailOnBlur(){var e=Object(_lib_dom__WEBPACK_IMPORTED_MODULE_6__.val)("login");e&&/^\s*[a-zA-Z0-9_\.]+@[a-zA-Z0-9_\.]+\s*$/.test(e)&&(cur.restoreNoEmailAccess||ajax.post("restore?act=a_check_email",{hash:cur.options.fhash,email:e},{onDone(e){if(e)return Object(_lib_dom__WEBPACK_IMPORTED_MODULE_6__.hide)("submit_wrapper"),Restore.changeFormStep("phones","back_link")}}))},getUploadedPhotosIds(e){var t=[];return each(cur.images,(function(r,_){!e&&_.deleted||t.push(_.id)})),t},submitDocPhoto:()=>Restore.checkFile(0),submitPersonalPhoto:()=>Restore.checkFile(1),checkFile(e,t){if(!t){var r;r=1==e?Object(_lib_dom__WEBPACK_IMPORTED_MODULE_6__.val)("photo_input"):Object(_lib_dom__WEBPACK_IMPORTED_MODULE_6__.val)("doc_input");try{if(new RegExp(cur.screenshot_regex,"gi").test(r)){var _=new MessageBox({title:Object(_web_lib_react_lang_utils__WEBPACK_IMPORTED_MODULE_13__.getLang)("global_action_confirmation")}).addButton(Object(_web_lib_react_lang_utils__WEBPACK_IMPORTED_MODULE_13__.getLang)("restore_no_other_photo"));return void _.addButton(Object(_web_lib_react_lang_utils__WEBPACK_IMPORTED_MODULE_13__.getLang)("box_yes"),()=>{Restore.checkFile(e,!0),_.hide()},"gray").content(Object(_web_lib_react_lang_utils__WEBPACK_IMPORTED_MODULE_13__.getLang)("restore_screenshoot_confirm_box_text")).show()}if(new RegExp(cur.scan_regex,"gi").test(r))return Restore.showMsgBox(Object(_web_lib_react_lang_utils__WEBPACK_IMPORTED_MODULE_13__.getLang)("restore_scan_error_msg"),Object(_web_lib_react_lang_utils__WEBPACK_IMPORTED_MODULE_13__.getLang)("global_error"))}catch(e){}}var o=1==e?Object(_lib_dom__WEBPACK_IMPORTED_MODULE_6__.ge)("photo_file_button"):Object(_lib_dom__WEBPACK_IMPORTED_MODULE_6__.ge)("doc_file_button");Object(_lib_ui__WEBPACK_IMPORTED_MODULE_8__.lockButton)(o);var s=1==e?"photo_upload_ids":"doc_upload_ids";Object(_lib_dom__WEBPACK_IMPORTED_MODULE_6__.val)(s,Restore.getUploadedPhotosIds(!0).join(",")),Object(_lib_ui__WEBPACK_IMPORTED_MODULE_8__.lockButton)("restore_extend_request_button"),cur.restoreTTLTimeout&&clearTimeout(cur.restoreTTLTimeout),1==e?document.photo_upload.submit():document.doc_upload.submit()},uploadError(e,t){Object(_lib_ui__WEBPACK_IMPORTED_MODULE_8__.unlockButton)("restore_extend_request_button"),cur.regenerateHash&&cur.regenerateHash();var r="",_=4e3;e?1==e||4==e?r=Object(_web_lib_react_lang_utils__WEBPACK_IMPORTED_MODULE_13__.getLang)("restore_not_uploaded"):2==e?r=Object(_web_lib_react_lang_utils__WEBPACK_IMPORTED_MODULE_13__.getLang)("restore_bad_format"):5==e?r=Object(_web_lib_react_lang_utils__WEBPACK_IMPORTED_MODULE_13__.getLang)("restore_bad_size"):7==e?(r=Object(_web_lib_react_lang_utils__WEBPACK_IMPORTED_MODULE_13__.getLang)("restore_too_small_image"),_=8e3):8==e?(r=Object(_web_lib_react_lang_utils__WEBPACK_IMPORTED_MODULE_13__.getLang)("restore_photo_already_attached"),_=8e3):9==e?(r=Object(_web_lib_react_lang_utils__WEBPACK_IMPORTED_MODULE_13__.getLang)("restore_photo_incorrect"),_=8e3):10==e&&(r=Object(_web_lib_react_lang_utils__WEBPACK_IMPORTED_MODULE_13__.getLang)("support_mobile_restore_no_face_found"),_=0):r=Object(_web_lib_react_lang_utils__WEBPACK_IMPORTED_MODULE_13__.getLang)("global_unknown_error"),_?setTimeout(showFastBox({title:Object(_web_lib_react_lang_utils__WEBPACK_IMPORTED_MODULE_13__.getLang)("global_error"),width:470},r).hide,_):showFastBox({title:Object(_web_lib_react_lang_utils__WEBPACK_IMPORTED_MODULE_13__.getLang)("global_error"),width:470},r);var o=t?"photo_":"doc_",s=Object(_lib_dom__WEBPACK_IMPORTED_MODULE_6__.ge)(o+"file_button");Object(_lib_ui__WEBPACK_IMPORTED_MODULE_8__.unlockButton)(s)},uploadComplete(e,t,r,_,o,s){var n=(_?"photo":"doc")+"_",i=Object(_lib_dom__WEBPACK_IMPORTED_MODULE_6__.ge)(n+"file_button")||Object(_lib_dom__WEBPACK_IMPORTED_MODULE_6__.ge)("restore_extend_request_button");Object(_lib_ui__WEBPACK_IMPORTED_MODULE_8__.unlockButton)(i);var a=cur.images.length,l=!0;each(cur.images,(e,t)=>{if(t.type==_&&t.deleted)return a=e,l=!1,!1}),cur.images[a]={id:t,hash:r,type:_},++cur.images_count[_];var c=2==s||3==s?Restore.maxPhotosWithType:Restore.maxPhotos;Object(_lib_dom__WEBPACK_IMPORTED_MODULE_6__.ge)(n+"input").disabled=cur.images_count[_]>=c,Object(_lib_dom__WEBPACK_IMPORTED_MODULE_6__.ge)(n+"input").disabled&&3!=s&&Object(_lib_dom__WEBPACK_IMPORTED_MODULE_6__.hide)(n+"upload"),Object(_lib_dom__WEBPACK_IMPORTED_MODULE_6__.show)(n+"photos"),o=o.split("%index%").join(a).split("%type%").join(_);var u=se(o),d=Object(_lib_dom__WEBPACK_IMPORTED_MODULE_6__.ge)(n+"photos");d&&(l?d.appendChild(u):domReplaceEl(d,u)),Object(_lib_dom__WEBPACK_IMPORTED_MODULE_6__.hide)("simple_request_incorrect"),3==s?Restore.extendRequest(Object(_lib_dom__WEBPACK_IMPORTED_MODULE_6__.ge)("restore_extend_request_button")):Restore.changeFullRequestButton(!0)},deleteImage(e,t,r){var _=e?"photo":"doc",o=_+"_";if(cur.images[t].deleted){if(cur.images_count[e]>=2)return;cur.images[t].deleted=!1,removeClass("photo_img"+t,"restore_uploaded_image__img_removed");var s=2==r||3==r?Restore.maxPhotosWithType:Restore.maxPhotos;++cur.images_count[e]>=s&&(Object(_lib_dom__WEBPACK_IMPORTED_MODULE_6__.ge)(o+"input").disabled=!0,Object(_lib_dom__WEBPACK_IMPORTED_MODULE_6__.hide)(o+"upload")),Object(_lib_dom__WEBPACK_IMPORTED_MODULE_6__.val)("del_link"+t,Object(_web_lib_react_lang_utils__WEBPACK_IMPORTED_MODULE_13__.getLang)("global_delete")),Object(_lib_dom__WEBPACK_IMPORTED_MODULE_6__.show)("restore_roll_button_"+_)}else cur.images[t].deleted=!0,addClass("photo_img"+t,"restore_uploaded_image__img_removed"),--cur.images_count[e],Object(_lib_dom__WEBPACK_IMPORTED_MODULE_6__.ge)(o+"input").disabled=!1,Object(_lib_dom__WEBPACK_IMPORTED_MODULE_6__.show)(o+"upload"),Object(_lib_dom__WEBPACK_IMPORTED_MODULE_6__.val)("del_link"+t,Object(_web_lib_react_lang_utils__WEBPACK_IMPORTED_MODULE_13__.getLang)("global_dont_delete")),cur.images_count[e]||Object(_lib_dom__WEBPACK_IMPORTED_MODULE_6__.hide)("restore_roll_button_"+_)},checkedPasswordStatus(){if(cur.restorePasswordChecked){var e=Object(_lib_dom__WEBPACK_IMPORTED_MODULE_6__.val)("old_password");cur.restorePasswordChecked[e]&&1!==cur.restorePasswordChecked[e]&&Restore.toFullRequest(1)}},checkPassword(e){e.timeout&&clearTimeout(e.timeout),e.timeout=setTimeout((function(){var e=Object(_lib_dom__WEBPACK_IMPORTED_MODULE_6__.val)("old_password");cur.restorePasswordChecked||(cur.restorePasswordChecked={});var t=Object(_lib_dom__WEBPACK_IMPORTED_MODULE_6__.isVisible)("new_phone_wrap")?"new_phone":"phone",r=Object(_lib_dom__WEBPACK_IMPORTED_MODULE_6__.val)(t).replace(/[^0-9]/g,"");e.length>0&&!cur.restorePasswordChecked[e]&&ajax.post("restore?act=a_check_password",{hash:cur.options.fhash,password:e},{onDone(t){cur.restorePasswordChecked[e]=t,1!==t&&r&&Restore.toFullRequest(1)}})}),400)},submitPageLink(){var e=Object(_lib_dom__WEBPACK_IMPORTED_MODULE_6__.ge)("submitBtn"),t=Object(_lib_dom__WEBPACK_IMPORTED_MODULE_6__.val)("link");t?(Object(_lib_dom__WEBPACK_IMPORTED_MODULE_6__.hide)("error"),ajax.post("restore?act=a_profile_link",{link:t,from:!!nav.objLoc.from&&nav.objLoc.from},{onDone(e){Object(_lib_dom__WEBPACK_IMPORTED_MODULE_6__.val)("error",e),Object(_lib_dom__WEBPACK_IMPORTED_MODULE_6__.show)("error")},showProgress:()=>Object(_lib_ui__WEBPACK_IMPORTED_MODULE_8__.lockButton)(e),hideProgress:()=>Object(_lib_ui__WEBPACK_IMPORTED_MODULE_8__.unlockButton)(e)})):Object(_lib_dom__WEBPACK_IMPORTED_MODULE_6__.elfocus)("link")},usePhoneAsLogin(){var e=Object(_lib_dom__WEBPACK_IMPORTED_MODULE_6__.ge)("usePhoneBtn"),t={rid:cur.options.request_id,hash:cur.options.lhash,login:-1};ajax.post("restore?act=a_new_email",t,{showProgress:_lib_ui__WEBPACK_IMPORTED_MODULE_8__.lockButton.pbind(e),hideProgress:_lib_ui__WEBPACK_IMPORTED_MODULE_8__.unlockButton.pbind(e),onDone(e){e?Restore.showMsgBox(e,Object(_web_lib_react_lang_utils__WEBPACK_IMPORTED_MODULE_13__.getLang)("global_error")):nav.reload()}})},useAnotherEmail(){var e=Object(_lib_dom__WEBPACK_IMPORTED_MODULE_6__.ge)("anotherEmailBtn"),t=Object(_lib_dom__WEBPACK_IMPORTED_MODULE_6__.val)("login");if(/^\s*[a-zA-Z0-9_\.]+@[a-zA-Z0-9_\.]+\s*$/.test(t)){var r={rid:cur.options.request_id,hash:cur.options.lhash,login:t};ajax.post("restore?act=a_new_email",r,{showProgress:_lib_ui__WEBPACK_IMPORTED_MODULE_8__.lockButton.pbind(e),hideProgress:_lib_ui__WEBPACK_IMPORTED_MODULE_8__.unlockButton.pbind(e),onDone(e){Restore.showMsgBox(e,Object(_web_lib_react_lang_utils__WEBPACK_IMPORTED_MODULE_13__.getLang)("global_error"))}})}else Restore.showMsgBox(Object(_web_lib_react_lang_utils__WEBPACK_IMPORTED_MODULE_13__.getLang)("restore_error_email"),Object(_web_lib_react_lang_utils__WEBPACK_IMPORTED_MODULE_13__.getLang)("global_error"),"login")},extendRequest(e,t){var r={rid:cur.options.request_id,hash:cur.options.phash,comment:Object(_lib_dom__WEBPACK_IMPORTED_MODULE_6__.val)("comment"),images:[]};!0===t&&(r.force=1);for(var _=0;_<cur.images.length;++_)cur.images[_].deleted||r.images.push(cur.images[_].hash);if(trim(r.comment).length||!Object(_lib_dom__WEBPACK_IMPORTED_MODULE_6__.ge)("comment")||r.images.length)if(cur.restoreTTLTimeout&&clearTimeout(cur.restoreTTLTimeout),r.images.length||!cur.restorePhotosRequested||t)cur.selfieHash&&Restore.deleteImage(1,0,3),ajax.post("al_restore.php?act=a_extend",r,{showProgress:_lib_ui__WEBPACK_IMPORTED_MODULE_8__.lockButton.pbind(e),hideProgress:_lib_ui__WEBPACK_IMPORTED_MODULE_8__.unlockButton.pbind(e),onDone(e,t){0==e?Restore.showMsgBox(t,Object(_web_lib_react_lang_utils__WEBPACK_IMPORTED_MODULE_13__.getLang)("global_error")):1==e?(Object(_lib_dom__WEBPACK_IMPORTED_MODULE_6__.val)("request_result_msg",t),Object(_lib_dom__WEBPACK_IMPORTED_MODULE_6__.hide)("request_result_wrap"),Object(_lib_dom__WEBPACK_IMPORTED_MODULE_6__.show)("request_result_msg")):2==e&&Object(_lib_ui__WEBPACK_IMPORTED_MODULE_8__.notaBene)("comment")},onFail(){cur.regenerateHash&&cur.regenerateHash()}});else{var o={title:Object(_web_lib_react_lang_utils__WEBPACK_IMPORTED_MODULE_13__.getLang)("global_warning"),width:620};cur.restoreConfirmNoPhotos=showFastBox(o,Object(_web_lib_react_lang_utils__WEBPACK_IMPORTED_MODULE_13__.getLang)("restore_extend_no_photos_are_you_sure"),Object(_web_lib_react_lang_utils__WEBPACK_IMPORTED_MODULE_13__.getLang)("restore_extend"),(function(){cur.regenerateHash&&cur.regenerateHash(),cur.restoreConfirmNoPhotos.hide()}),Object(_web_lib_react_lang_utils__WEBPACK_IMPORTED_MODULE_13__.getLang)("restore_dont_extend_with_photos"),(function(){cur.restoreConfirmNoPhotos.hide(),Restore.extendRequest(e,!0)}))}else Object(_lib_dom__WEBPACK_IMPORTED_MODULE_6__.elfocus)("comment")},noEmailAccessSimpleRequest(){Object(_lib_dom__WEBPACK_IMPORTED_MODULE_6__.hide)("restore_roll_back_link"),Object(_lib_dom__WEBPACK_IMPORTED_MODULE_6__.show)("submit_wrapper"),cur.restoreNoEmailAccess=1},getSimpleRequestFields:()=>({login:Object(_lib_dom__WEBPACK_IMPORTED_MODULE_6__.val)("login").toLowerCase(),oldPhone:Object(_lib_dom__WEBPACK_IMPORTED_MODULE_6__.val)("old_phone").replace(/[^0-9]/g,""),oldPassword:Object(_lib_dom__WEBPACK_IMPORTED_MODULE_6__.val)("old_password")}),submitSimpleRequest(){var e=Object(_lib_dom__WEBPACK_IMPORTED_MODULE_6__.ge)("submitBtn"),t=Object(_lib_dom__WEBPACK_IMPORTED_MODULE_6__.val)("email"),r=Object(_lib_dom__WEBPACK_IMPORTED_MODULE_6__.isVisible)("new_phone_wrap")?"new_phone":"phone",_=Object(_lib_dom__WEBPACK_IMPORTED_MODULE_6__.val)(r).replace(/[^0-9\*]/g,"");_&&Restore.checkedPasswordStatus();var o=Restore.getSimpleRequestFields(),s=o.login,n=o.oldPhone,i=o.oldPassword;if(Object(_lib_dom__WEBPACK_IMPORTED_MODULE_6__.isVisible)("email_wrap")&&!/^\s*$/.test(s)&&!/^\s*[a-zA-Z0-9_\.\-]+@[a-zA-Z0-9_\.\-]+\s*$/.test(s)&&!/^\s*[a-zA-Z0-9_]{6,32}\s*$/.test(s))return Restore.showResult("request_email_res",Object(_web_lib_react_lang_utils__WEBPACK_IMPORTED_MODULE_13__.getLang)("restore_login_error"),"login");if(!/^\s*$/.test(n)&&!/^[1-9][0-9]{6,14}$/.test(n))return Restore.showResult("request_phone_res",Object(_web_lib_react_lang_utils__WEBPACK_IMPORTED_MODULE_13__.getLang)("restore_old_phone_error"),"old_phone");if(Object(_lib_dom__WEBPACK_IMPORTED_MODULE_6__.isVisible)(r)&&!/^[1-9][0-9\*]{6,14}$/.test(_))return Restore.showResult("request_phone_res",Object(_web_lib_react_lang_utils__WEBPACK_IMPORTED_MODULE_13__.getLang)("restore_phone_error"),r);if(cur.checkedPhones&&cur.checkedPhones[_]&&2==cur.checkedPhones[_][0])return Restore.showResult("request_email_res",cur.checkedPhones[_][1],r,!0);if(!Object(_lib_dom__WEBPACK_IMPORTED_MODULE_6__.isVisible)("new_phone_wrap")&&!s&&!n){var a=Object(_web_lib_react_lang_utils__WEBPACK_IMPORTED_MODULE_13__.getLang)("restore_need_email_or_phone"),l=!cur.skipEmptyFieldsError&&Restore.checkLoginTriesLeft();return l&&(a+="<br>"+Object(_web_lib_react_lang_utils__WEBPACK_IMPORTED_MODULE_13__.getLang)("restore_need_email_or_phone_desc")),Restore.showResult("request_phone_res",a,"old_phone",!1,!l)}if(!i){if(cur.skipEmptyFieldsError){var c=Object(_lib_dom__WEBPACK_IMPORTED_MODULE_6__.ge)("old_password");return Object(_lib_dom__WEBPACK_IMPORTED_MODULE_6__.elfocus)(c),void Object(_lib_ui__WEBPACK_IMPORTED_MODULE_8__.notaBene)(c)}return Restore.showResult("request_old_password_res",Object(_web_lib_react_lang_utils__WEBPACK_IMPORTED_MODULE_13__.getLang)("restore_need_old_password")+"<br>"+Object(_web_lib_react_lang_utils__WEBPACK_IMPORTED_MODULE_13__.getLang)("restore_need_old_password_desc"),"old_password")}cur.validationLastCallback=function(e){Object(_lib_dom__WEBPACK_IMPORTED_MODULE_6__.hide)("request_phone_res"),e?Restore.submitSimpleRequest():Object(_lib_dom__WEBPACK_IMPORTED_MODULE_6__.elfocus)("phone")},ajax.post("restore?act=a_simple_request",{hash:cur.options.fhash,login:s,email:t,phone:_,old_phone:n,password:i,no_email_access:cur.restoreNoEmailAccess||0},{onDone(e,t,r,_,o,s){if(0==intval(e)&&(s=r),"back_link"==s)return Object(_lib_dom__WEBPACK_IMPORTED_MODULE_6__.hide)("submit_wrapper"),Restore.changeFormStep("phones","back_link");Restore.processSubmitResult(e,t,r,_,o,!1)},showProgress:_lib_ui__WEBPACK_IMPORTED_MODULE_8__.lockButton.pbind(e),hideProgress:_lib_ui__WEBPACK_IMPORTED_MODULE_8__.unlockButton.pbind(e)})},checkOldPasswordTriesLeft(){var e=Restore.getSimpleRequestFields().oldPassword;return cur.checkedPasswords[e]||(cur.checkedPasswords[e]=1),Object.keys(cur.checkedPasswords).length<3},checkLoginTriesLeft(){var e=Restore.getSimpleRequestFields(),t=e.login+"|"+e.oldPhone;return cur.checkedValues[t]||(cur.checkedValues[t]=1),Object.keys(cur.checkedValues).length<3},processSubmitResult(e,t,r,_,o,s){var n,i,a=intval(e);if(-2==a)return s?(n=Object(_lib_dom__WEBPACK_IMPORTED_MODULE_6__.ge)("restore_submit_full_request"),i=Restore.submitFullRequest):(n=Object(_lib_dom__WEBPACK_IMPORTED_MODULE_6__.ge)("submitBtn"),i=Restore.submitSimpleRequest),Object(_lib_ui__WEBPACK_IMPORTED_MODULE_8__.lockButton)(n),setTimeout(i,1e3);-3==a?("old_password"===_?Restore.checkOldPasswordTriesLeft()?t+="<br>"+Object(_web_lib_react_lang_utils__WEBPACK_IMPORTED_MODULE_13__.getLang)("restore_try_one_more_time"):t+="<br>"+Object(_web_lib_react_lang_utils__WEBPACK_IMPORTED_MODULE_13__.getLang)("restore_need_old_password_desc"):"login"===o&&(Restore.checkLoginTriesLeft()?t+="<br>"+Object(_web_lib_react_lang_utils__WEBPACK_IMPORTED_MODULE_13__.getLang)("restore_try_one_more_time"):t+="<br>"+Object(_web_lib_react_lang_utils__WEBPACK_IMPORTED_MODULE_13__.getLang)("restore_need_email_or_phone_desc")),Restore.showResult(r,t,_)):(Object(_lib_dom__WEBPACK_IMPORTED_MODULE_6__.isVisible)("simple_request_incorrect")&&Object(_lib_dom__WEBPACK_IMPORTED_MODULE_6__.hide)("simple_request_incorrect"),Restore.showResult("request_phone_res",t,_))},toFullRequest(e){var t,r={act:"return_page",full:1};(t=Object(_lib_dom__WEBPACK_IMPORTED_MODULE_6__.isVisible)("new_phone_wrap")?Object(_lib_dom__WEBPACK_IMPORTED_MODULE_6__.val)("new_phone").replace(/[^0-9]/g,""):Object(_lib_dom__WEBPACK_IMPORTED_MODULE_6__.val)("phone").replace(/[^0-9]/g,""))&&(r.phone=t),e&&(r.m=e),nav.change(r)},infoCheckSubmit(e){var t=trim(Object(_lib_dom__WEBPACK_IMPORTED_MODULE_6__.val)("page_link")),r=Object(_lib_dom__WEBPACK_IMPORTED_MODULE_6__.val)("phone").replace(/[^0-9]/g,""),_=Object(_lib_dom__WEBPACK_IMPORTED_MODULE_6__.ge)("restore_info_error");return t.length?r.length?(Object(_lib_dom__WEBPACK_IMPORTED_MODULE_6__.hide)(_),removeClass(_,"restore_info_error_big_text"),void ajax.post("/restore?act=a_check_info",{link:t,phone:r},{showProgress:_lib_ui__WEBPACK_IMPORTED_MODULE_8__.lockButton.pbind(e),hideProgress:_lib_ui__WEBPACK_IMPORTED_MODULE_8__.unlockButton.pbind(e),onDone(e,t,r){1!=e&&t&&(Object(_lib_dom__WEBPACK_IMPORTED_MODULE_6__.val)(_,t),-1==e&&addClass(_,"restore_info_error_big_text"),Object(_lib_dom__WEBPACK_IMPORTED_MODULE_6__.show)(_),r&&Object(_lib_ui__WEBPACK_IMPORTED_MODULE_8__.notaBene)(r))}})):Object(_lib_ui__WEBPACK_IMPORTED_MODULE_8__.notaBene)("phone"):Object(_lib_ui__WEBPACK_IMPORTED_MODULE_8__.notaBene)("page_link")},initCheckInfo(){Restore.initFormTT(Object(_lib_dom__WEBPACK_IMPORTED_MODULE_6__.ge)("page_link"),"restore_info_page_link_tooltip")},initResendCounter(e){var t=Object(_lib_dom__WEBPACK_IMPORTED_MODULE_6__.ge)("resend_sms_button");if(e>0){addClass(t,"button_disabled"),t.time=e;var r=function(){if(t.time<=1)return removeClass(t,"button_disabled"),Object(_lib_dom__WEBPACK_IMPORTED_MODULE_6__.val)(t,Object(_web_lib_react_lang_utils__WEBPACK_IMPORTED_MODULE_13__.getLang)("restore_resend_sms_data")),void clearInterval(t.timeInterval);t.time-=1;var e=formatTime(t.time);Object(_lib_dom__WEBPACK_IMPORTED_MODULE_6__.val)(t,Object(_web_lib_react_lang_utils__WEBPACK_IMPORTED_MODULE_13__.getLang)("restore_can_resend_sms_after").replace("{time}",e))};r(),t.timeInterval=setInterval(r,1e3)}},resendSMS(e){hasClass(e,"button_disabled")||(Object(_lib_ui__WEBPACK_IMPORTED_MODULE_8__.lockButton)(e),ajax.post("restore?act=a_resend_sms",{hash:cur.resend_hash,id:cur.rid},{onDone(t,r,_,o){Object(_lib_ui__WEBPACK_IMPORTED_MODULE_8__.unlockButton)(e),1==t?(_&&Restore.initResendCounter(_),0==r&&Object(_lib_dom__WEBPACK_IMPORTED_MODULE_6__.hide)(e),o&&(addClass("resend_success","active"),setTimeout(removeClass.pbind("resend_success","active"),1e4))):Object(_lib_dom__WEBPACK_IMPORTED_MODULE_6__.hide)(e)}}))},initTimeButton(){cur.resend_counter>0&&Restore.initResendCounter(cur.resend_counter)},initRequest(e){extend(cur,{images:[],images_count:[0,0],request_id:!1,request_hash:!1});var t=e?"new_phone":"phone",r=Object(_lib_dom__WEBPACK_IMPORTED_MODULE_6__.ge)("comment");Restore.initFormTT(r,"restore_lost_phone_your_comment_short");var _=Object(_lib_dom__WEBPACK_IMPORTED_MODULE_6__.ge)(t);Object(_lib_dom__WEBPACK_IMPORTED_MODULE_6__.isVisible)(_)&&Restore.initFormTT(_,"restore_form_available_phone_tooltip");var o=Object(_lib_dom__WEBPACK_IMPORTED_MODULE_6__.ge)("old_phone");Object(_lib_dom__WEBPACK_IMPORTED_MODULE_6__.isVisible)(o)&&Object(_lib_dom__WEBPACK_IMPORTED_MODULE_6__.ge)("email_wrap")&&Object(_lib_dom__WEBPACK_IMPORTED_MODULE_6__.isVisible)("email_wrap")&&Restore.initFormTT(o,"restore_form_old_phone_tooltip");var s=Object(_lib_dom__WEBPACK_IMPORTED_MODULE_6__.ge)("login");Object(_lib_dom__WEBPACK_IMPORTED_MODULE_6__.isVisible)(s)&&Restore.initFormTT(s,"restore_form_old_email_tooltip");var n=Object(_lib_dom__WEBPACK_IMPORTED_MODULE_6__.ge)("old_password");Object(_lib_dom__WEBPACK_IMPORTED_MODULE_6__.isVisible)(n)&&Restore.initFormTT(n,"restore_about_old_password"),cur.destroy.push(()=>{delete cur.requestStep,delete cur.requestParams,delete cur.restoreNoEmailAccess})},initFormTT(e,t){addEvent(e,"focus",showTooltip.pbind(e,{dir:"right",text:Object(_web_lib_react_lang_utils__WEBPACK_IMPORTED_MODULE_13__.getLang)(t),shift:()=>[225,-Math.round((getSize(e.tt.container)[1]+getSize(e)[1])/2),0],width:215,slideX:-15,hasover:1,forcetoup:!0,nohide:!0})),addEvent(e,"blur",()=>{e.tthide&&e.tthide()})},changeFormStep(e,t){var r="restore_roll_";removeClass(r+e,"_restore_roll_active"),cur.requestStep=t,"back_link"==e&&Object(_lib_dom__WEBPACK_IMPORTED_MODULE_6__.hide)(r+e);var _=Object(_lib_dom__WEBPACK_IMPORTED_MODULE_6__.ge)(r+t);if(Object(_lib_dom__WEBPACK_IMPORTED_MODULE_6__.show)(_),removeClass(_,"restore_roll_colored"),Object(_lib_scroll__WEBPACK_IMPORTED_MODULE_7__.scrollToY)(Object(_lib_dom__WEBPACK_IMPORTED_MODULE_6__.getXY)(_)[1],400),removeClass("restore_roll_"+t,"restore_roll_hidden"),addClass(_,"_restore_roll_active"),"comment"==t){var o=Object(_lib_dom__WEBPACK_IMPORTED_MODULE_6__.ge)("comment");autosizeSetup(o,{minHeight:55,maxHeight:300}),addEvent(o,"focus keyup",()=>{o.timeout&&clearTimeout(o.timeout),o.timeout=setTimeout(()=>{try{var e,t=Object(_lib_dom__WEBPACK_IMPORTED_MODULE_6__.val)(o);e=new RegExp(cur.delete_regex,"gi").test(t)?cur.goto_support:Object(_web_lib_react_lang_utils__WEBPACK_IMPORTED_MODULE_13__.getLang)("restore_lost_phone_your_comment_short"),Object(_lib_dom__WEBPACK_IMPORTED_MODULE_6__.val)(o.tt.container,'<div class="wrapped"><div class="tt_text">'+e+"</div></div>")}catch(e){}},300)})}},checkSimpleRequestFields(){var e=Object(_lib_dom__WEBPACK_IMPORTED_MODULE_6__.val)("old_phone").replace(/[^0-9]/g,"");if(!/^\s*$/.test(e)&&!/^[1-9][0-9]{6,14}$/.test(e))return Restore.showResult("request_phone_res",Object(_web_lib_react_lang_utils__WEBPACK_IMPORTED_MODULE_13__.getLang)("restore_old_phone_error"),"old_phone");var t=Object(_lib_dom__WEBPACK_IMPORTED_MODULE_6__.isVisible)("new_phone_wrap")?"new_phone":"phone",r=Object(_lib_dom__WEBPACK_IMPORTED_MODULE_6__.val)(t).replace(/[^0-9]/g,"");return Object(_lib_dom__WEBPACK_IMPORTED_MODULE_6__.isVisible)(t)&&!r?(Object(_lib_ui__WEBPACK_IMPORTED_MODULE_8__.notaBene)(t),!1):Object(_lib_dom__WEBPACK_IMPORTED_MODULE_6__.isVisible)(t)&&!/^[1-9][0-9]{6,14}$/.test(r)?Restore.showResult("request_phone_res",Object(_web_lib_react_lang_utils__WEBPACK_IMPORTED_MODULE_13__.getLang)("restore_phone_error"),t):(Restore.checkedPasswordStatus(),!cur.checkedPhones||!cur.checkedPhones[r]||2!=cur.checkedPhones[r][0]||Restore.showResult("request_email_res",cur.checkedPhones[r][1],t,!0))},checkSimpleRequestPhone(e){e&&!cur.restoreNoEmailAccess&&(clearTimeout(e.timeout),e.timeout=setTimeout(()=>{Restore.checkSimpleRequestFields(e)&&Restore.checkPhoneOnBlur(e)},1e3))},submitFullRequest(e){var t=Object(_lib_dom__WEBPACK_IMPORTED_MODULE_6__.ge)("restore_submit_full_request");if(cur.requestParams||(cur.requestParams={},cur.requestStep="phones"),"phones"==cur.requestStep){var r=Object(_lib_dom__WEBPACK_IMPORTED_MODULE_6__.val)("new_phone").replace(/[^0-9\*]/g,"");if(!r)return Object(_lib_ui__WEBPACK_IMPORTED_MODULE_8__.notaBene)("new_phone");if(!/^[1-9][0-9\*]{6,14}$/.test(r))return Restore.showResult("request_phone_res",Object(_web_lib_react_lang_utils__WEBPACK_IMPORTED_MODULE_13__.getLang)("restore_phone_error"),"new_phone");cur.requestParams.phone=r}if("back_link"==cur.requestStep&&e)return Restore.changeFormStep("back_link","photo");if("photo"==cur.requestStep&&cur.images_count[1]<1)return Restore.showResult("request_photo_res",Object(_web_lib_react_lang_utils__WEBPACK_IMPORTED_MODULE_13__.getLang)("restore_photo_error")+"<br>"+Object(_web_lib_react_lang_utils__WEBPACK_IMPORTED_MODULE_13__.getLang)("restore_attention"));if("doc"==cur.requestStep&&cur.images_count[0]<1)return Restore.showResult("request_doc_res",Object(_web_lib_react_lang_utils__WEBPACK_IMPORTED_MODULE_13__.getLang)("restore_doc_error")+"<br>"+Object(_web_lib_react_lang_utils__WEBPACK_IMPORTED_MODULE_13__.getLang)("restore_attention"));if("doc"==cur.requestStep||"photo"==cur.requestStep){var _=[];each(cur.images,(function(e,t){t.deleted||_.push(t.hash)})),cur.requestParams.images=_}if("doc"==cur.requestStep)return Restore.changeFullRequestButton(!0,Object(_web_lib_react_lang_utils__WEBPACK_IMPORTED_MODULE_13__.getLang)("restore_submit")),Restore.changeFormStep("doc","comment");"comment"==cur.requestStep&&(cur.requestParams.comment=Object(_lib_dom__WEBPACK_IMPORTED_MODULE_6__.val)("comment"));var o=extend({hash:cur.options.fhash},cur.requestParams);ajax.post("restore?act=a_request",o,{onDone(e,t,r,_,o,s){var n=intval(e);if(0==n&&(s=r),1==n)return Object(_lib_dom__WEBPACK_IMPORTED_MODULE_6__.val)("request_result",t),Object(_lib_dom__WEBPACK_IMPORTED_MODULE_6__.show)("request_result"),Object(_lib_dom__WEBPACK_IMPORTED_MODULE_6__.hide)("request_form"),void scrollToTop();if(-5!=n)if(-6!=n){if("back_link"==s)return Restore.changeFullRequestButton(!1),Restore.changeFormStep("phones","back_link");if("photo"==s)return Restore.changeFullRequestButton(!1),Restore.changeFormStep("phones","photo");if("doc"==s)return Restore.changeFullRequestButton(!1),Restore.changeFormStep("photo","doc");-3==n&&Object(_lib_dom__WEBPACK_IMPORTED_MODULE_6__.hide)("simple_request_incorrect"),Restore.processSubmitResult(e,t,r,_,o,!0)}else Restore.getNoOnlineBox("restore_last_weeks_online_modal",Restore.onlineInWeeksOwner,Restore.onlineInWeeksNoOwner).show();else Restore.getNoOnlineBox("restore_last_online_modal",Restore.onlineInDayOwner,Restore.onlineInDayNoOwner).show()},showProgress:_lib_ui__WEBPACK_IMPORTED_MODULE_8__.lockButton.pbind(t),hideProgress:_lib_ui__WEBPACK_IMPORTED_MODULE_8__.unlockButton.pbind(t)})},resetPasswordByEmail(e){ajax.post("/login?act=a_forgot",{login:Object(_lib_dom__WEBPACK_IMPORTED_MODULE_6__.val)("login"),sure:cur.options.fhash,hash:cur.resetPasswordTHash,from_request:1},{showProgress:_lib_ui__WEBPACK_IMPORTED_MODULE_8__.lockButton.pbind(e),hideProgress:_lib_ui__WEBPACK_IMPORTED_MODULE_8__.unlockButton.pbind(e),onDone(t,r){1==t?(Object(_lib_dom__WEBPACK_IMPORTED_MODULE_6__.hide)(e),Object(_lib_dom__WEBPACK_IMPORTED_MODULE_6__.val)("reset_password_button",r)):Restore.showResult("restore_back_link_error",r)}})},changeFullRequestButton(e,t){toggle("restore_roll_button",e),t&&Object(_lib_dom__WEBPACK_IMPORTED_MODULE_6__.val)("restore_submit_full_request",t)},activate(e,t,r){isButtonLocked(e)||ajax.post("restore?act=a_activate",{id:t,hash:r},{showProgress:_lib_ui__WEBPACK_IMPORTED_MODULE_8__.lockButton.pbind(e),hideProgress:_lib_ui__WEBPACK_IMPORTED_MODULE_8__.unlockButton.pbind(e)})},showCancelBox(e,t,r){showBox("/restore?act=cancel_box",{settings:r,req_id:e,hash:t},{onDone(e,t){t||(e.hide(),showDoneBox(Object(_web_lib_react_lang_utils__WEBPACK_IMPORTED_MODULE_13__.getLang)("restore_cancel_by_owner_success"),nav.reload))}})},getNoOnlineBox(e,t,r){var _=new MessageBox({title:Object(_web_lib_react_lang_utils__WEBPACK_IMPORTED_MODULE_13__.getLang)("global_action_confirmation")});return _.addButton(Object(_web_lib_react_lang_utils__WEBPACK_IMPORTED_MODULE_13__.getLang)("restore_last_online_yes"),()=>{cur.requestParams.no_online=t,_.hide(),Restore.submitFullRequest(!0)}),_.addButton(Object(_web_lib_react_lang_utils__WEBPACK_IMPORTED_MODULE_13__.getLang)("restore_last_online_no"),()=>{cur.requestParams.no_online=r,_.hide(),Restore.submitFullRequest(!0)},"gray"),_.content(Object(_web_lib_react_lang_utils__WEBPACK_IMPORTED_MODULE_13__.getLang)(e)),_}}},clTp:function(e,t,r){"use strict";function _(e){var t=e.getBoundingClientRect(),r=document.body,_=document.documentElement,o=window.pageYOffset||_.scrollTop||r.scrollTop,s=window.pageXOffset||_.scrollLeft||r.scrollLeft,n=_.clientTop||r.clientTop||0,i=_.clientLeft||r.clientLeft||0;return{top:Math.round(t.top+o-n),left:Math.round(t.left+s-i),width:e.offsetWidth,height:e.offsetHeight}}r.r(t),r.d(t,"default",(function(){return _}))},ofcU:function(e,t,r){"use strict";r.r(t),r.d(t,"createMutations",(function(){return a})),r.d(t,"createModule",(function(){return u})),r.d(t,"destroyModule",(function(){return d}));r("HEwt"),r("a1Th"),r("rE2o"),r("ioFf"),r("rGqo"),r("Btvt"),r("KKXr");function _(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){if("undefined"==typeof Symbol||!(Symbol.iterator in Object(e)))return;var r=[],_=!0,o=!1,s=void 0;try{for(var n,i=e[Symbol.iterator]();!(_=(n=i.next()).done)&&(r.push(n.value),!t||r.length!==t);_=!0);}catch(e){o=!0,s=e}finally{try{_||null==i.return||i.return()}finally{if(o)throw s}}return r}(e,t)||function(e,t){if(!e)return;if("string"==typeof e)return o(e,t);var r=Object.prototype.toString.call(e).slice(8,-1);"Object"===r&&e.constructor&&(r=e.constructor.name);if("Map"===r||"Set"===r)return Array.from(r);if("Arguments"===r||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r))return o(e,t)}(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function o(e,t){(null==t||t>e.length)&&(t=e.length);for(var r=0,_=new Array(t);r<t;r++)_[r]=e[r];return _}var s=new window.Map;function n(e){var t=s.get(e.currentTarget);if(t){var r=t[e.type];if(r)for(var o,n=0;n<r.length;n++){var i=_(r[n],2),a=i[0],l=i[1],c=void 0;if(hasClass(e.target,a)?c=l(e,e.target):(o=gpeByClass(a,e.target,e.currentTarget))&&(c=l(e,o)),!1===c)break}}}var i=r("Egk5");function a(e){return{callMutations:function(){if("function"==typeof e)throw console.trace(),new Error("Mutations are not initialized");return e},bindMutations:function(){for(var t=[],r=0;r<arguments.length;r++)t[r]=arguments[r];if("function"!=typeof e)throw console.trace(),new Error("Mutations are already initialized");return e=e.apply(void 0,t)}}}function l(e,t,r,_){Object(i.addEvent)(t,r,_),e._registeredHandlers.push({handlerType:"bind",elem:t,types:r,handler:_})}function c(e,t,r,_,o){!function(e,t,r,_){var o=s.get(e);o||(s.set(e,{}),o=s.get(e));for(var i=t.split(" "),a=0;a<i.length;a++){var l=i[a];o[l]||(o[l]=[],addEvent(e,l,n)),o[l].push([r,_])}}(t,r,_,o),e._registeredHandlers.push({handlerType:"delegate",elem:t,types:r,selector:_,handler:o})}function u(e){var t={_registeredHandlers:[]};return e.handlers(l.bind(null,t),c.bind(null,t)),t}function d(e){e._registeredHandlers.forEach((function(e){var t,r,_,o,a;"delegate"===e.handlerType?(t=e.elem,r=e.types,_=e.selector,o=e.handler,(a=s.get(t))&&(r.split(" ").forEach(e=>{a[e]&&(a[e]=a[e].filter(e=>e[0]!==_||e[1]!==o),0===a[e].length&&removeEvent(t,e,n))}),0===Object.keys(a).map(e=>a[e].length).reduce((e,t)=>e+t)&&s.delete(t))):Object(i.removeEvent)(e.elem,e.types,e.handler)})),e._registeredHandlers=[]}},"p+C8":function(e,t,r){"use strict";r.r(t),r.d(t,"default",(function(){return i}));r("91GP"),r("ioFf"),r("rGqo"),r("Btvt");var _=r("q1tI"),o=r("pemR");r("17x9");function s(){return(s=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var _ in r)Object.prototype.hasOwnProperty.call(r,_)&&(e[_]=r[_])}return e}).apply(this,arguments)}function n(e,t){if(null==e)return{};var r,_,o=function(e,t){if(null==e)return{};var r,_,o={},s=Object.keys(e);for(_=0;_<s.length;_++)r=s[_],t.indexOf(r)>=0||(o[r]=e[r]);return o}(e,t);if(Object.getOwnPropertySymbols){var s=Object.getOwnPropertySymbols(e);for(_=0;_<s.length;_++)r=s[_],t.indexOf(r)>=0||Object.prototype.propertyIsEnumerable.call(e,r)&&(o[r]=e[r])}return o}function i(e){var t=e.icon,r=e.aside,i=e.chevron,a=e.selectable,l=e.border,c=e.className,u=e.children,d=e.active,h=e.canBeHovered,p=void 0===h||h,E=n(e,["icon","aside","chevron","selectable","border","className","children","active","canBeHovered"]),m={"ListItem--chevron":!!i,"ListItem--selectable":!!a,"ListItem--border":!!l,"ListItem--active":!!d,"ListItem--can-be-hovered":p};return _.createElement("li",s({},E,{className:Object(o.classNames)("ListItem",m,c)}),t&&_.createElement("div",{className:"ListItem__icon"},t),_.createElement("div",{className:"ListItem__main"},u),_.createElement("div",{className:"ListItem__aside"},r))}i.defaultProps={onClick:()=>{},icon:null,aside:null,chevron:!1,selectable:!0,border:!0}},r7nW:function(e,t,r){"use strict";r.r(t);var _=r("q1tI"),o=r("i8i4"),s=(r("17x9"),r("pemR"));class n extends _.Component{constructor(){super(...arguments),this.getScrollbarWidth=()=>{var e=document.createElement("div");e.classList.add("BaseModal__scrollbarMeasure"),document.body.appendChild(e);var t=e.getBoundingClientRect().width-e.clientWidth;return document.body.removeChild(e),t},this.hideScrollBar=()=>{var e=document.body.getBoundingClientRect(),t=e.left+e.right<window.innerWidth,r=this.getScrollbarWidth();this.calculatedPadding=window.getComputedStyle(document.body)["padding-right"],t&&(document.body.style.paddingRight=parseFloat(this.calculatedPadding)+r+"px"),document.body.classList.add("BaseModal__bodyHiddenOverflow")},this.showScrollBar=()=>{document.body.style.paddingRight=this.calculatedPadding,document.body.classList.remove("BaseModal__bodyHiddenOverflow")},this.onDocumentKeyDown=e=>{var t=this.props.onClose;"Escape"===e.key&&t()},this.onBackdropClick=()=>{var e=this.props,t=e.onClose;!e.disableBackdropClick&&t()}}componentDidMount(){var e=this.props,t=e.disableEscapeClose,r=e.disableBodyScroll;t||document.body.addEventListener("keydown",this.onDocumentKeyDown),r&&this.hideScrollBar()}componentWillUnmount(){var e=this.props,t=e.disableEscapeClose,r=e.disableBodyScroll;t||document.body.removeEventListener("keydown",this.onDocumentKeyDown),r&&this.showScrollBar()}renderModal(){var e=this.props.className,t=Object(s.classNames)("BaseModal",e);return _.createElement("div",{className:t,"aria-modal":"true"},_.createElement("div",{className:"BaseModal__backdrop",onClick:this.onBackdropClick}),_.createElement("div",{className:"BaseModal__content"},this.props.children))}render(){return o.createPortal(this.renderModal(),document.body)}}n.defaultProps={className:"",children:null,disableBackdropClick:!1,disableEscapeClose:!1,disableBodyScroll:!1},t.default=n},vRp6:function(e,t,r){"use strict";r.r(t),r.d(t,"default",(function(){return l}));r("HEwt"),r("a1Th"),r("Btvt"),r("rGqo"),r("rE2o"),r("ioFf");var _=r("q1tI"),o=(r("17x9"),r("UlUB")),s=r("PjZB"),n=r("pemR");function i(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){if("undefined"==typeof Symbol||!(Symbol.iterator in Object(e)))return;var r=[],_=!0,o=!1,s=void 0;try{for(var n,i=e[Symbol.iterator]();!(_=(n=i.next()).done)&&(r.push(n.value),!t||r.length!==t);_=!0);}catch(e){o=!0,s=e}finally{try{_||null==i.return||i.return()}finally{if(o)throw s}}return r}(e,t)||function(e,t){if(!e)return;if("string"==typeof e)return a(e,t);var r=Object.prototype.toString.call(e).slice(8,-1);"Object"===r&&e.constructor&&(r=e.constructor.name);if("Map"===r||"Set"===r)return Array.from(r);if("Arguments"===r||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r))return a(e,t)}(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function a(e,t){(null==t||t>e.length)&&(t=e.length);for(var r=0,_=new Array(t);r<t;r++)_[r]=e[r];return _}class l extends _.Component{constructor(e){super(e),this.checkLoad=Object(o.throttle)(e=>{var t=i(e,3),r=t[0],_=t[1],o=t[2];if(!this.loading)return this.props.virtualized||this.props.hasMore?void(_-r-o<=this.props.threshold&&(this.loading=!0,this.props.loadMore().then(()=>{this.loading=!1}))):this.detachListeners()},34),this.onScroll=e=>{var t=this.getScrollData();this.props.virtualized&&this.processChildren(this.props.children,t),this.props.hasMore&&this.checkLoad(t)},this.getRef=e=>{this.container=e,this.props.virtualized&&this.setState(this.getChildrenData(this.props.children,this.getScrollData()))},this.useWindowScroll=e.useWindowScroll,e.virtualized&&(this.state={before:0,after:e.children.length,start:0,end:0})}getScrollData(){var e=this.useWindowScroll?document.documentElement:this.container;return[this.getScrollTop(),e?e.scrollHeight:0,e?e.clientHeight:0]}getScrollTop(){var e=document.documentElement||document.body.parentNode||document.body;return this.useWindowScroll?void 0!==window.pageYOffset?window.pageYOffset:e.scrollTop:this.container?this.container.scrollTop:0}attachListeners(){var e=this.useWindowScroll?window:this.container;this.container&&(e.addEventListener("scroll",this.onScroll,this.props.useCapture),e.addEventListener("resize",this.onScroll,this.props.useCapture))}detachListeners(){var e=this.useWindowScroll?window:this.container;this.container&&(e.removeEventListener("scroll",this.onScroll,this.props.useCapture),e.removeEventListener("resize",this.onScroll,this.props.useCapture))}processChildren(e,t){var r=this.state,_=this.getChildrenData(e,t||this.getScrollData()),o=_.start,s=_.end,n=_.before,i=_.after;o===r.start&&s===r.end&&n===r.before&&i===r.after||this.setState(_)}getChildrenData(e,t){var r=i(t,3),_=r[0],o=r[1],s=r[2],n=this.useWindowScroll?window:this.container,a=n&&n.offsetHeight;if(!n||0===o||0===s)return{start:0,end:0,before:0,after:e.length};s=Math.max(s,a);var l=e.length,c=Math.max(Math.floor(_/this.props.itemHeight)-1,0),u=Math.min(Math.floor((_+2*s)/this.props.itemHeight+1),l);return{start:c,end:u,before:c,after:l-u}}componentWillReceiveProps(e){this.props.virtualized&&this.processChildren(e.children)}componentDidMount(){this.attachListeners()}componentWillUnmount(){this.detachListeners()}render(){return _.createElement("div",{className:Object(n.classNames)("InfiniteScroll",this.props.className),ref:this.getRef,style:this.props.style},this.props.virtualized&&this.state.before>0&&_.createElement("div",{style:{height:this.state.before*this.props.itemHeight},key:"before"}),this.props.virtualized?[].concat(this.props.children).slice(this.state.start,this.state.end):this.props.children,this.props.virtualized&&this.state.after>0&&_.createElement("div",{style:{height:this.state.after*this.props.itemHeight},key:"after"}),this.props.hasMore&&(this.props.loader||_.createElement("div",{className:"InfiniteScroll__loader",key:"loader"},_.createElement(s.default,null))))}}l.defaultProps={useWindowScroll:!1,virtualized:!1,hasMore:!0,useCapture:!1,threshold:100,itemHeight:55}}});