!function(e){function t(t){for(var i,s,n=t[0],r=t[1],l=t[2],d=0,p=[];d<n.length;d++)s=n[d],Object.prototype.hasOwnProperty.call(_,s)&&_[s]&&p.push(_[s][0]),_[s]=0;for(i in r)Object.prototype.hasOwnProperty.call(r,i)&&(e[i]=r[i]);for(c&&c(t);p.length;)p.shift()();return o.push.apply(o,l||[]),a()}function a(){for(var e,t=0;t<o.length;t++){for(var a=o[t],i=!0,n=1;n<a.length;n++){var r=a[n];0!==_[r]&&(i=!1)}i&&(o.splice(t--,1),e=s(s.s=a[0]))}return e}var i={},_={"web/support":0},o=[];function s(t){if(i[t])return i[t].exports;var a=i[t]={i:t,l:!1,exports:{}};return e[t].call(a.exports,a,a.exports,s),a.l=!0,a.exports}s.m=e,s.c=i,s.d=function(e,t,a){s.o(e,t)||Object.defineProperty(e,t,{enumerable:!0,get:a})},s.r=function(e){"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})},s.t=function(e,t){if(1&t&&(e=s(e)),8&t)return e;if(4&t&&"object"==typeof e&&e&&e.__esModule)return e;var a=Object.create(null);if(s.r(a),Object.defineProperty(a,"default",{enumerable:!0,value:e}),2&t&&"string"!=typeof e)for(var i in e)s.d(a,i,function(t){return e[t]}.bind(null,i));return a},s.n=function(e){var t=e&&e.__esModule?function(){return e.default}:function(){return e};return s.d(t,"a",t),t},s.o=function(e,t){return Object.prototype.hasOwnProperty.call(e,t)},s.p="/js/cmodules/";var n=window.webpackJsonp=window.webpackJsonp||[],r=n.push.bind(n);n.push=t,n=n.slice();for(var l=0;l<n.length;l++)t(n[l]);var c=r;o.push([265,"bundles/common","bundles/vendors","bundles/1c6a9b415901224f27daf60c6bc90be0"]),a()}({"+tmx":function(e,t,a){"use strict";a.r(t),a.d(t,"MILLISECOND",(function(){return i})),a.d(t,"SECOND",(function(){return _})),a.d(t,"MINUTE",(function(){return o})),a.d(t,"HOUR",(function(){return s})),a.d(t,"DAY",(function(){return n})),a.d(t,"WEEK",(function(){return r})),a.d(t,"MONTH",(function(){return l})),a.d(t,"ruLocale",(function(){return c})),a.d(t,"EVENTS",(function(){return d}));var i=1,_=1e3*i,o=60*_,s=60*o,n=24*s,r=7*n,l=30*n,c="ru-RU",d={MOUSE_DOWN:"mousedown",KEY_DOWN:"keydown",SCROLL:"scroll",CLICK:"click"}},265:function(e,t,a){e.exports=a("DX8J")},"6b4t":function(e,t,a){"use strict";a.r(t),a.d(t,"default",(function(){return _}));a("KKXr");var i=a("q1tI");a("17x9");class _ extends i.Component{static mapFilterOptionsToDropdownOptions(e){return e?e.map(e=>[e.constant,e.name]):[]}constructor(e){super(e),this.state={filterWrapElementId:this.props.config.id+"_filter_wrap",filterElementId:this.props.config.id+"_filter"}}componentDidMount(){var e=this.props.config.placeholder||"",t=this.onChange.bind(this);this.state.input=new Dropdown(ge(this.state.filterElementId),_.mapFilterOptionsToDropdownOptions(this.props.config.options),{selectedItems:this.props.config.selected,onChange:t,placeholder:e,multiselect:!this.props.singleSelectCrutch,autocomplete:!0,width:this.props.width,big:!0,maxItems:this.props.maxItems})}componentDidUpdate(e,t,a){if(this.props.singleSelectCrutch){var i=this.state.input.selectedItems(),_=i&&i[0]&&i[0][0]?i[0][0]:null;if(!_)return;this.props.config.selected!==e.config.selected&&_!=this.props.config.selected&&this.state.input.selectItem(this.props.config.selected[0])}}onChange(e){var t=_.convertOldValueToJson(e);this.props.onFilterChange(this.props.config.id,t)}static convertOldValueToJson(e){return e?e.split(","):null}render(){var e=this.props.config.header?i.createElement("div",{className:"search_filter_main"},this.props.config.header):"";return i.createElement("div",{className:"filter"},e,i.createElement("div",{id:this.state.filterWrapElementId,className:"search_control"},i.createElement("input",{id:this.state.filterElementId,type:"text",className:"dark"})))}}_.defaultProps={width:200,maxItems:50,singleSelectCrutch:!1}},"6krn":function(e,t,a){"use strict";a.r(t),a.d(t,"getLang",(function(){return s}));var i=a("nAFc"),_=a("4+be"),o={};function s(e,t,a){void 0===t&&(t=!1);var s="number"==typeof t,n=t||s,r=e+(n?".raw":"");if(void 0===o[r]){var l=n?Object(_.getLang)(e,"raw"):Object(_.getLang)(e);"string"==typeof l?o[r]=Object(i.decodeHTMLEntities)(l):Array.isArray(l)&&(o[r]=l.map(i.decodeHTMLEntities))}if(s){var c=t;return Object(_.langNumeric)(c,o[r],a)}return o[r]||""}t.default={getLang:s}},DX8J:function(e,t,a){"use strict";a.r(t);var i=a("Glos");function _(e,t,a,i){ajax.post("support?act=a_faq_clicked",{faq_id:e,hash:t,from_action:a?1:0,n:i,q:nav.objLoc.q},{cache:1})}var o={rate(e,t,a,i){if(!vk.id)return!1;if(ajax.post("support?act=a_faq_rate",{faq_id:e,val:t,hash:a}),o.setClicked(e,a,!0),!i)if(hide("tickets_faq_links"+e),t>0)show("tickets_faq_useful"+e);else{var _=ge("tickets_faq_unuseful"+e),s=geByClass1("help_table_question_rated_additional__btns",_);show(_,geByClass1("help_table_question_rated_additional",_)),hide(s,geByClass1("help_table_question__rated_final",_),geByClass1("help_table_question__rated_no_perm",_)),slideDown(s,200)}return!1},rateUrgent:(e,t,a)=>!!vk.id&&(ajax.post("support?act=a_faq_rate",{faq_id:e,val:t,hash:a}),o.setClicked(e,a,!0),hide("tickets_faq_urgent_links"+e),t>0?(show("tickets_faq_useful"+e),slideUp("tickets_new_wrap",450)):show("tickets_faq_unuseful"+e),!1),rateAdditional(e,t,a,_,o){if(!vk.id)return!1;t=intval(t);var s=ge("tickets_faq_unuseful"+e);(ajax.post("support?act=faq_rate_additional",{faq_id:e,additional_id:t,hash:a}),hide(geByClass1("help_table_question_rated_additional",s)),show(geByClass1("help_table_question__rated_final",s)),2===t)&&(i.Tickets.getAskQuestionData("faq_dislike").permission?i.Tickets.tryAskQuestion((function(){i.Tickets.goToForm(e,"dislike",_,o)}),"faq_dislike"):cur.isFaqTutorial&&2!==t||(hide(geByClass1("help_table_question__rated_final__t",s)),show(geByClass1("help_table_question__rated_no_perm",s))))},cancelRate:(e,t,a,i)=>!!vk.id&&(ajax.post("support?act=a_faq_rate",{faq_id:e,val:t,cancel:1,hash:a}),hide("tickets_faq_useful"+e,"tickets_faq_unuseful"+e),show("tickets_faq_links"+e),i&&i.stopPropagation(),!1),cancelRateUrgent(e,t,a){if(!vk.id)return!1;ajax.post("support?act=a_faq_rate",{faq_id:e,val:t,cancel:1,hash:a}),hide("tickets_faq_useful"+e,"tickets_faq_unuseful"+e),show("tickets_faq_urgent_links"+e);var i=ge("tickets_new_wrap");return isVisible(i)||slideDown(i,500),!1},setClicked(e,t,a){var i=arguments.length>3&&void 0!==arguments[3]&&arguments[3],o=arguments.length>4&&void 0!==arguments[4]?arguments[4]:0;a?(clearTimeout(cur.faqViewTimeouts[e]),cur.faqViewTimeouts[e]=null,_(e,t,i,o)):cur.faqViewTimeouts.hasOwnProperty(e)||(cur.faqViewTimeouts[e]=setTimeout(()=>{_(e,t,i,o)},1500))},cancelClicked(e){cur.faqViewTimeouts[e]&&(clearTimeout(cur.faqViewTimeouts[e]),delete cur.faqViewTimeouts[e])},toggleRow:(e,t,a,i,_)=>(i.target||(i.target=i.srcElement||document),"a"==i.target.tagName.toLowerCase()||(toggle("tickets_faq_short_text"+e,!isVisible("tickets_faq_short_text"+e)),toggle("tickets_faq_full_text"+e,!isVisible("tickets_faq_full_text"+e)),isVisible("tickets_faq_full_text"+e)?(addClass(a,"detailed"),vk.id&&o.setClicked(e,t,!1,!0,_)):(removeClass(a,"detailed"),o.cancelClicked(e)),!1)),toggleListRow(e,t,a,i){if(checkEvent(e))return!0;var _=document.getElementById("help_table_question_"+t),s=_.getElementsByClassName("help_table_question__ans")[0],n=s.getElementsByClassName("help_table_question__ans_text")[0],r=document.getElementById("attachs"+t);if(""===n.innerHTML){n.innerHTML='<div class="help_load_spinner"></div>';var l={ajax:!0,hash:a};ajax.post("faq"+t,l,{onDone:(e,t)=>{n.innerHTML=e,r.innerHTML=t}})}return isVisible(s)?(removeClass(_,"help_table_question_visible"),slideUp(s,200),o.cancelClicked(t)):(addClass(_,"help_table_question_visible"),slideDown(s,200),o.setClicked(t,a,!1,!0,i)),!1},updateSearchSuggests(e){e=trim(e);var t=ge("faq_search_form");if(t.hideTimeout&&(clearTimeout(t.hideTimeout),t.hideTimeout=null),t.searchTimeout&&(clearTimeout(t.searchTimeout),t.searchTimeout=null),!e)return removeClass(t,"faq_search_form_with_suggests",e),void hide("faq_search_form_suggests");t.searchTimeout=setTimeout((function(){var a=ge("faq_search_form_suggests");a||(a=ce("div",{id:"faq_search_form_suggests",className:"tickets_suggests"}),t.appendChild(a),hide(a)),ajax.post("support?act=a_load_faq_suggests",{q:e,section:cur.searchSection,union_id:nav.objLoc.union_id},{cache:1,onDone(i){i&&(show(a),addClass(t,"faq_search_form_with_suggests",e)),val(a,i)}})}),200)},goToSearchResult(e,t,a){if(""!==(a=trim(a))||"faqs"===nav.objLoc.act){var i={0:"support",act:e};""!==a&&(i.q=a),nav.objLoc.union_id&&(i.union_id=nav.objLoc.union_id),nav.objLoc.from&&"market_platform"===nav.objLoc.from&&(i.from=nav.objLoc.from),nav.go(i)}},hideSearchSuggests(){var e=ge("faq_search_form");e.hideTimeout=setTimeout((function(){clearTimeout(e.hideTimeout),e.hideTimeout=null,hide("faq_search_form_suggests"),removeClass(e,"faq_search_form_with_suggests")}),500)}},s=a("aicB"),n=a("MZbF"),r=a("zxIV"),l=a("v+DW"),c=a("El3O");function d(e){Object(l.lockButton)(e),Object(r.addClass)("tickets_thank_you_form","processing")}function p(e){Object(l.unlockButton)(e),Object(r.removeClass)("tickets_thank_you_form","processing")}window.FAQ=o,window.Tickets=i.Tickets,window.TicketsEF=s.TicketsEF,window.FAQTutorial=n.FAQTutorial,window.TicketsThanks=new class{close(e,t,a){ajax.post("support?act=a_close_ticket_by_author",{ticket_id:t,hash:a},{onDone:()=>Object(r.addClass)("tickets_thank_you_form","you_re_welcome"),showProgress:()=>d(e),hideProgress:()=>p(e)})}reopen(e,t,a){ajax.post("support?act=a_reopen_ticket_by_author",{ticket_id:t,hash:a},{onDone:()=>Object(r.removeClass)("tickets_thank_you_form","you_re_welcome")})}skipClose(e,t,a){t&&a?ajax.post("support?act=a_skip_thanks",{ticket_id:t,hash:a},{onDone:()=>this.showPostField(),showProgress:()=>d(e),hideProgress:()=>p(e)}):this.showPostField()}undoSkipClose(e,t,a){t&&a?ajax.post("support?act=a_undo_skip_thanks",{ticket_id:t,hash:a},{onDone:()=>this.hidePostField(),showProgress:()=>d(e),hideProgress:()=>p(e)}):this.hidePostField()}showPostField(){hide("tickets_thank_you_form"),Object(r.addClass)("tickets_post_form__panel","tickets_post_form__panel_shown"),show("tickets_post_field"),Object(c.autosizeSetup)("tickets_reply",{minHeight:50,maxHeight:500}),Object(r.elfocus)("tickets_reply")}hidePostField(){show("tickets_thank_you_form"),hide("tickets_post_field")}};try{stManager.done(jsc("web/support.js"))}catch(e){}},Glos:function(__webpack_module__,__webpack_exports__,__webpack_require__){"use strict";__webpack_require__.r(__webpack_exports__),__webpack_require__.d(__webpack_exports__,"Tickets",(function(){return Tickets}));var core_js_modules_es6_regexp_split__WEBPACK_IMPORTED_MODULE_0__=__webpack_require__("KKXr"),core_js_modules_es6_regexp_replace__WEBPACK_IMPORTED_MODULE_1__=__webpack_require__("pIFo"),core_js_modules_es6_regexp_match__WEBPACK_IMPORTED_MODULE_2__=__webpack_require__("SRfc"),_tickets_ef__WEBPACK_IMPORTED_MODULE_3__=__webpack_require__("aicB"),_web_lib_dom__WEBPACK_IMPORTED_MODULE_4__=__webpack_require__("zxIV"),_web_lib_dom_events__WEBPACK_IMPORTED_MODULE_5__=__webpack_require__("Egk5"),_web_lib_tooltip_utils__WEBPACK_IMPORTED_MODULE_6__=__webpack_require__("FWc3"),_web_lib_ui__WEBPACK_IMPORTED_MODULE_7__=__webpack_require__("v+DW"),_web_lib_utils_common__WEBPACK_IMPORTED_MODULE_8__=__webpack_require__("t7n3"),_web_lib_layout_utils__WEBPACK_IMPORTED_MODULE_9__=__webpack_require__("El3O"),_web_lib_fx__WEBPACK_IMPORTED_MODULE_10__=__webpack_require__("7jxN"),_shared_lib_ls__WEBPACK_IMPORTED_MODULE_11__=__webpack_require__("Xrg9"),_web_lib_message_box__WEBPACK_IMPORTED_MODULE_12__=__webpack_require__("EasH"),_web_lib_scroll__WEBPACK_IMPORTED_MODULE_13__=__webpack_require__("lXE5"),_web_lib_box_utils__WEBPACK_IMPORTED_MODULE_14__=__webpack_require__("kcIO"),_shared_lib_convert__WEBPACK_IMPORTED_MODULE_15__=__webpack_require__("cGUQ"),MAX_TEXT_PART_LENGTH=4096;function replyIsSending(){return Object(_web_lib_ui__WEBPACK_IMPORTED_MODULE_7__.isButtonLocked)("tickets_send")}var Tickets={getRequestUrl(){var e=nav.objLoc[0];return"aovk"===e||"helpdesk"===e?e:"support"},getSaveTicketUrl(){var e=nav.objLoc[0];return"aovk"===e||"helpdesk"===e?e+"?act=a_save":"support_save_ticket"},gotoTicket:(e,t)=>!!Object(_web_lib_dom_events__WEBPACK_IMPORTED_MODULE_5__.checkEvent)(t)||nav.go(e,t),getBrowser(){var e,t,a=!1,i=window.browser;if(each(["opera_mini","opera_mobile","safari_mobile","msie_mobile","bada","android","ipad","ipod","iphone","mozilla","opera","chrome","safari","msie10","msie9","msie8","msie7","msie6","msie"],(function(e,t){if(!0===i[t])return a=t,!1})),window._ua&&/yabrowser/i.test(window._ua)&&(a="yabrowser"),a){if(i&&i.msie&&(!i.version||i.version<10))t="";else{var _=(window._ua.match(/.+(?:mini|bada|mobi)[\/: ]([\d.]+)/)||[0,"0"])[1];t="0"!=_?" "+_:" "+i.version}e=a+t}else e=navigator.userAgent.toLowerCase();var o=i.flashfull;return e+="|"+o.major+"."+o.minor+"."+o.rev},showTooltip(e,t,a,i,_){var o="right"===(i=i||"left");Object(_web_lib_tooltip_utils__WEBPACK_IMPORTED_MODULE_6__.showTooltip)(e,{dir:i,text:t,slideX:o?-15:15,className:"tickets_side_tt "+a,shift(){var t=Object(_web_lib_dom__WEBPACK_IMPORTED_MODULE_4__.getSize)(e.tt.container),a=Object(_web_lib_dom__WEBPACK_IMPORTED_MODULE_4__.getSize)(e);if("bottom"===i)return[-(a[0]-t[0])/2,7];return[o?t[0]+7:-a[0]-7,0,-(a[1]+t[1])/2]},forcetodown:!0,hasover:1,onCreate(){_&&Object(_web_lib_dom_events__WEBPACK_IMPORTED_MODULE_5__.removeEvent)(e,"mouseout")}})},hideTooltip(e){e.tt&&e.tt.hide&&e.tt.hide()},doSaveTicket(e){ajax.post(Tickets.getSaveTicketUrl(),e,{onDone(t,a){0==t?Object(_web_lib_box_utils__WEBPACK_IMPORTED_MODULE_14__.showDoneBox)(a):1==t&&Tickets.showAverageTime(a,Tickets.doSaveTicket.pbind(extend({},e,{force:1})))},showProgress:()=>Object(_web_lib_ui__WEBPACK_IMPORTED_MODULE_7__.lockButton)("tickets_send"),hideProgress:()=>Object(_web_lib_ui__WEBPACK_IMPORTED_MODULE_7__.unlockButton)("tickets_send")})},getFromObjLoc(e){var t={};return each(e,(function(e,a){nav.objLoc[a]&&(t[a]=nav.objLoc[a])})),t},getAudioFields(){var e={};if(cur.samples&&cur.samples.audio||ge("audio_checking")){e.audio_html=ge("audio_checking").innerHTML;var t=(cur.samples||{}).audio||"";window.ag&&window.sh&&(e.audio_html=e.audio_html.replace(/_info/g,"vkontakte_info")),(window.dwnl_video||window.add_js)&&(e.audio_html=e.audio_html.replace(/_info/g,"dwnl_info")),e.audio_orig=Object(_web_lib_dom__WEBPACK_IMPORTED_MODULE_4__.ce)("div",{innerHTML:t.replace(/z9q2m/g,"audio")}).innerHTML}return e},saveTicket(e){var t=Object(_web_lib_utils_common__WEBPACK_IMPORTED_MODULE_8__.trim)(val("tickets_title")),a=Object(_web_lib_utils_common__WEBPACK_IMPORTED_MODULE_8__.trim)(val("tickets_text")),i=!0;t||(Object(_web_lib_ui__WEBPACK_IMPORTED_MODULE_7__.notaBene)("tickets_title",!1,!i),i=!1);var _=Tickets.getUploadAttachs();a||cur.descriptionNotNeeded||_.length||(Object(_web_lib_ui__WEBPACK_IMPORTED_MODULE_7__.notaBene)("tickets_text",!1,!i),i=!1);var o=Tickets.getBrowser(),s=extend({title:t,text:a,hash:e,attachs:_,browser:o,section:cur.faqSection},Tickets.getAudioFields(),Tickets.getFromObjLoc(["id","mid","group_id","app_id","union_id","from","mobile","bhash"]));nav.objLoc.hasOwnProperty("hds")&&(s.hds=nav.objLoc.hds);var n=_tickets_ef__WEBPACK_IMPORTED_MODULE_3__.TicketsEF.getValues();if(!1===n&&(i=!1),!i)return!1;if(extend(s,n),39==s.faqSection){var r=_shared_lib_ls__WEBPACK_IMPORTED_MODULE_11__.default.get("support_outdated_left");r&&r.ts&&Math.floor((new Date).getTime()/1e3)-r.ts<3600&&(s.outdated_ticket_id=r.id),_shared_lib_ls__WEBPACK_IMPORTED_MODULE_11__.default.remove("support_outdated_left")}Tickets.doSaveTicket(s)},savePayTicket(e){var t=Object(_web_lib_utils_common__WEBPACK_IMPORTED_MODULE_8__.trim)(val("tickets_title")),a=Object(_web_lib_utils_common__WEBPACK_IMPORTED_MODULE_8__.trim)(val("tickets_text"));if(t){var i=Tickets.getUploadAttachs();if(a||i.length){if(Tickets.checkPayForm()){var _=Tickets.getBrowser(),o=extend({title:t,text:a,hash:e,attachs:i,browser:_,section:cur.faqSection},Tickets.getAudioFields(),Tickets.getPayFields(),Tickets.getFromObjLoc(["id","group_id","app_id","union_id","from"]));Tickets.doSaveTicket(o)}}else Object(_web_lib_ui__WEBPACK_IMPORTED_MODULE_7__.notaBene)("tickets_text")}else Object(_web_lib_ui__WEBPACK_IMPORTED_MODULE_7__.notaBene)("tickets_title")},saveDMCATicket(e){if(Tickets.checkDMCAForm()){var t=Tickets.getUploadAttachs(),a=Tickets.getBrowser(),i=extend({hash:e,section:cur.faqSection,attachs:t,browser:a},Tickets.getDMCAFields(),Tickets.getAudioFields());Tickets.doSaveTicket(i)}},checkDMCAForm(){var e=Tickets.getDMCAFields(),t=1==e.type,a=t?"_legal":"",i=!1;return(!e.links||e.links.slice().join("").length<9)&&(Object(_web_lib_ui__WEBPACK_IMPORTED_MODULE_7__.notaBene)("tickets_links"),i=!0),e.text||(Object(_web_lib_ui__WEBPACK_IMPORTED_MODULE_7__.notaBene)("tickets_text"),i=!0),t?(e.title||(Object(_web_lib_ui__WEBPACK_IMPORTED_MODULE_7__.notaBene)("tickets_dmca_corp"),i=!0),(!e.address||e.address.length<9)&&(Object(_web_lib_ui__WEBPACK_IMPORTED_MODULE_7__.notaBene)("tickets_dmca_address"),i=!0),(!e.real_address||e.real_address.length<9)&&(Object(_web_lib_ui__WEBPACK_IMPORTED_MODULE_7__.notaBene)("tickets_dmca_real_address"),i=!0)):(e.title||(Object(_web_lib_ui__WEBPACK_IMPORTED_MODULE_7__.notaBene)("tickets_dmca_name"),i=!0),e.passport_series||(Object(_web_lib_ui__WEBPACK_IMPORTED_MODULE_7__.notaBene)("tickets_dmca_passport_series"),i=!0),e.passport_number||(Object(_web_lib_ui__WEBPACK_IMPORTED_MODULE_7__.notaBene)("tickets_dmca_passport_number"),i=!0),e.passport_date||(Object(_web_lib_ui__WEBPACK_IMPORTED_MODULE_7__.notaBene)("tickets_dmca_passport_date"),i=!0),e.passport_issued_by||(Object(_web_lib_ui__WEBPACK_IMPORTED_MODULE_7__.notaBene)("tickets_dmca_passport_issued_by"),i=!0)),(!e.phone_fax||e.phone_fax.length<7)&&(Object(_web_lib_ui__WEBPACK_IMPORTED_MODULE_7__.notaBene)("tickets_dmca_phone_fax"),i=!0),/^\s*[a-zA-Z0-9_\.\-]+@[a-zA-Z0-9_\.\-]+\s*$/.test(e.email)||(Object(_web_lib_ui__WEBPACK_IMPORTED_MODULE_7__.notaBene)("tickets_dmca_email"),i=!0),t&&((!e.repr||e.repr.length<5)&&(Object(_web_lib_ui__WEBPACK_IMPORTED_MODULE_7__.notaBene)("tickets_dmca_repr"),i=!0),(!e.post||e.post.length<3)&&(Object(_web_lib_ui__WEBPACK_IMPORTED_MODULE_7__.notaBene)("tickets_dmca_post"),i=!0)),!i&&(Object(_web_lib_ui__WEBPACK_IMPORTED_MODULE_7__.isChecked)("support_dmca_agree_owner"+a)?Object(_web_lib_ui__WEBPACK_IMPORTED_MODULE_7__.isChecked)("support_dmca_agree_unauthorized"+a)?Object(_web_lib_ui__WEBPACK_IMPORTED_MODULE_7__.isChecked)("support_dmca_agree_perjury"+a)?Object(_web_lib_ui__WEBPACK_IMPORTED_MODULE_7__.isChecked)("support_dmca_agree_email"+a)?Object(_web_lib_ui__WEBPACK_IMPORTED_MODULE_7__.isChecked)("support_dmca_agree_inform"+a)?!!Object(_web_lib_ui__WEBPACK_IMPORTED_MODULE_7__.isChecked)("support_dmca_agree_rules")||Tickets.showMsgBox(getLang("help_ccform_need_rules"),getLang("global_error")):Tickets.showMsgBox(getLang(t?"help_ccform_legal_need_inform":"help_ccform_natural_need_inform"),getLang("global_error")):Tickets.showMsgBox(getLang(t?"help_ccform_legal_need_email":"help_ccform_natural_need_email"),getLang("global_error")):Tickets.showMsgBox(getLang(t?"help_ccform_legal_need_perjury":"help_ccform_natural_need_perjury"),getLang("global_error")):Tickets.showMsgBox(getLang(t?"help_ccform_legal_need_unauthorized":"help_ccform_natural_need_unauthorized"),getLang("global_error")):Tickets.showMsgBox(getLang(t?"help_ccform_legal_need_is_owner":"help_ccform_natural_need_owner"),getLang("global_error")))},splitValueToParts(e){for(var t=[],a=0;a<e.length;)t.push(e.slice(a,a+=MAX_TEXT_PART_LENGTH));return t},getDMCAFields(){var e={text:Object(_web_lib_utils_common__WEBPACK_IMPORTED_MODULE_8__.trim)(val("tickets_text")),links:this.splitValueToParts(Object(_web_lib_utils_common__WEBPACK_IMPORTED_MODULE_8__.trim)(val("tickets_links"))),type:cur.dmcaType,phone_fax:Object(_web_lib_utils_common__WEBPACK_IMPORTED_MODULE_8__.trim)(val("tickets_dmca_phone_fax")),email:Object(_web_lib_utils_common__WEBPACK_IMPORTED_MODULE_8__.trim)(val("tickets_dmca_email"))};for(var t in 1==cur.dmcaType?(e.title=Object(_web_lib_utils_common__WEBPACK_IMPORTED_MODULE_8__.trim)(val("tickets_dmca_corp")),e.ogrn=Object(_web_lib_utils_common__WEBPACK_IMPORTED_MODULE_8__.trim)(val("tickets_dmca_ogrn")),e.address=Object(_web_lib_utils_common__WEBPACK_IMPORTED_MODULE_8__.trim)(val("tickets_dmca_address")),e.real_address=Object(_web_lib_utils_common__WEBPACK_IMPORTED_MODULE_8__.trim)(val("tickets_dmca_real_address")),e.repr=Object(_web_lib_utils_common__WEBPACK_IMPORTED_MODULE_8__.trim)(val("tickets_dmca_repr")),e.post=Object(_web_lib_utils_common__WEBPACK_IMPORTED_MODULE_8__.trim)(val("tickets_dmca_post"))):(e.title=Object(_web_lib_utils_common__WEBPACK_IMPORTED_MODULE_8__.trim)(val("tickets_dmca_name")),e.passport_series=Object(_web_lib_utils_common__WEBPACK_IMPORTED_MODULE_8__.trim)(val("tickets_dmca_passport_series")),e.passport_number=Object(_web_lib_utils_common__WEBPACK_IMPORTED_MODULE_8__.trim)(val("tickets_dmca_passport_number")),e.passport_date=Object(_web_lib_utils_common__WEBPACK_IMPORTED_MODULE_8__.trim)(val("tickets_dmca_passport_date")),e.passport_issued_by=Object(_web_lib_utils_common__WEBPACK_IMPORTED_MODULE_8__.trim)(val("tickets_dmca_passport_issued_by"))),e)""===e[t]&&delete e[t];return e},showMsgBox:(e,t,a)=>(setTimeout(Object(_web_lib_message_box__WEBPACK_IMPORTED_MODULE_12__.showFastBox)({title:t,dark:!0,bodyStyle:"line-height: 160%;",onHide(){a&&Object(_web_lib_dom__WEBPACK_IMPORTED_MODULE_4__.elfocus)(a)}},e).hide,4e3),!1),checkPhone(e){ajax.post("support?act=a_check_phone",{phone:e},{cache:1,onDone(e){cur.phone=e,val("tickets_number_from",e),e||Object(_web_lib_ui__WEBPACK_IMPORTED_MODULE_7__.notaBene)("tickets_number_from")}})},checkPayForm(){if(void 0===cur.payType)return cur.showErrorTT(ge("tickets_payment_type"),getLang("support_no_payment_type"),[-200,"show"==cur.section?-103:-113,0]),!1;switch(cur.payType){case 0:if(!cur.phone)return Object(_web_lib_ui__WEBPACK_IMPORTED_MODULE_7__.notaBene)("tickets_number_from"),!1;break;case 1:case 4:if(4==cur.payType){if(!Object(_web_lib_utils_common__WEBPACK_IMPORTED_MODULE_8__.floatval)(val("tickets_pay_sum")))return Object(_web_lib_ui__WEBPACK_IMPORTED_MODULE_7__.notaBene)("tickets_pay_sum"),!1;if(!Object(_web_lib_utils_common__WEBPACK_IMPORTED_MODULE_8__.trim)(val("tickets_organisation")))return Object(_web_lib_ui__WEBPACK_IMPORTED_MODULE_7__.notaBene)("tickets_organisation"),!1}if(!Tickets.getUploadAttachs().length){var e=1==cur.payType?getLang("support_no_bill_photo"):getLang("support_no_payment_scan");return setTimeout(Object(_web_lib_message_box__WEBPACK_IMPORTED_MODULE_12__.showFastBox)({title:getLang("global_error"),dark:!0,bodyStyle:"padding: 20px; line-height: 160%;"},e).hide,2e3),!1}break;case 2:case 3:case 5:case 6:case 8:case 9:case 7:if(2==cur.payType){if(void 0===cur.paySystem)return cur.showPaySysTT(),!1;if(4==cur.paySystem&&!Object(_web_lib_utils_common__WEBPACK_IMPORTED_MODULE_8__.trim)(val("tickets_paysystem_name")))return Object(_web_lib_ui__WEBPACK_IMPORTED_MODULE_7__.notaBene)("tickets_paysystem_name"),!1}if(!Object(_web_lib_utils_common__WEBPACK_IMPORTED_MODULE_8__.floatval)(val("tickets_pay_sum")))return Object(_web_lib_ui__WEBPACK_IMPORTED_MODULE_7__.notaBene)("tickets_pay_sum"),!1;break;case 10:if(!Object(_web_lib_utils_common__WEBPACK_IMPORTED_MODULE_8__.floatval)(val("tickets_sberbank_spasibo_pay_sum")))return Object(_web_lib_ui__WEBPACK_IMPORTED_MODULE_7__.notaBene)("tickets_sberbank_spasibo_pay_sum"),!1;break;default:return!1}return!0},getPayFields(){var e={};if(void 0===cur.payType)return e;switch(e.pay_type=cur.payType,cur.payType){case 0:e.pay_date=val("tickets_payment_date"),e.number_from=cur.phone,val("tickets_number_to")&&(e.number_to=Object(_web_lib_utils_common__WEBPACK_IMPORTED_MODULE_8__.trim)(val("tickets_number_to"))),val("tickets_sms_text")&&(e.sms_text=Object(_web_lib_utils_common__WEBPACK_IMPORTED_MODULE_8__.trim)(val("tickets_sms_text"))),val("tickets_payed_sum")&&(e.payed_sum=Object(_web_lib_utils_common__WEBPACK_IMPORTED_MODULE_8__.trim)(val("tickets_payed_sum")));break;case 1:e.pay_date=val("tickets_payment_date"),e.pay_email=val("tickets_id_email");break;case 2:case 3:e.pay_date=val("tickets_payment_date"),e.pay_sum=Object(_web_lib_utils_common__WEBPACK_IMPORTED_MODULE_8__.floatval)(val("tickets_pay_sum")),2==cur.payType&&(4==cur.paySystem?e.pay_system_name=Object(_web_lib_utils_common__WEBPACK_IMPORTED_MODULE_8__.trim)(val("tickets_paysystem_name")):e.pay_system=cur.paySystem);break;case 4:e.pay_day=val("tickets_payment_day"),e.pay_sum=Object(_web_lib_utils_common__WEBPACK_IMPORTED_MODULE_8__.floatval)(val("tickets_pay_sum")),e.pay_org=Object(_web_lib_utils_common__WEBPACK_IMPORTED_MODULE_8__.trim)(val("tickets_organisation"));break;case 8:e.pay_date=val("tickets_payment_date"),e.pay_sum=Object(_web_lib_utils_common__WEBPACK_IMPORTED_MODULE_8__.floatval)(val("tickets_pay_sum")),e.pay_gpa=val("tickets_gpa");break;case 5:case 6:case 9:case 7:e.pay_date=val("tickets_payment_date"),e.pay_sum=Object(_web_lib_utils_common__WEBPACK_IMPORTED_MODULE_8__.floatval)(val("tickets_pay_sum"));break;case 10:e.pay_date=val("tickets_payment_date"),e.pay_sum_sberbank_spasibo=Object(_web_lib_utils_common__WEBPACK_IMPORTED_MODULE_8__.floatval)(val("tickets_sberbank_spasibo_pay_sum"))}return e},getReplyQueryData(e,t,a,i){var _,o={act:"a_add_comment",ticket_id:e,text:this.splitValueToParts(t),hash:a,attachs:i,hidden:Object(_web_lib_ui__WEBPACK_IMPORTED_MODULE_7__.isChecked)("tickets_hidden"),copy_to_card:Object(_web_lib_ui__WEBPACK_IMPORTED_MODULE_7__.isChecked)("copy_reply_to_card")},s=!1;for(var n in window.browser)if(!0===window.browser[n]){s=n;break}_=s?s+" "+window.browser.version:navigator.userAgent.toLowerCase();var r=browser.flashfull;if(_+="|"+r.major+"."+r.minor+"."+r.rev,o.browser=_,cur.samples&&cur.samples.audio||ge("audio_checking")){o.audio_html=ge("audio_checking").innerHTML;var l=(cur.samples||{}).audio||"";window.ag&&window.sh&&(o.audio_html=o.audio_html.replace(/_info/g,"vkontakte_info")),(window.dwnl_video||window.add_js)&&(o.audio_html=o.audio_html.replace(/_info/g,"dwnl_info")),o.audio_orig=Object(_web_lib_dom__WEBPACK_IMPORTED_MODULE_4__.ce)("div",{innerHTML:l.replace(/z9q2m/g,"audio")}).innerHTML}if(cur.getReplyDataFields){var c=cur.getReplyDataFields();if(!1===c)return!1;extend(o,c)}return o},removeReplyDraft(e){var t="helpdesk_draft"+vk.id+"_"+e;_shared_lib_ls__WEBPACK_IMPORTED_MODULE_11__.default.get(t)&&(_shared_lib_ls__WEBPACK_IMPORTED_MODULE_11__.default.set(t,!1),_shared_lib_ls__WEBPACK_IMPORTED_MODULE_11__.default.remove(t))},getUploadAttachs(){var e=[],t=cur.ticketsNewMedia.chosenMedias;return t&&each(t,(function(t,a){var i=a[0],_=a[1];"photo"!=i&&"doc"!=i||e.push(i+","+_)})),e},addTicketReply(e,t,a){if(replyIsSending())return!1;var i=ge("tickets_reply");if(!i||i.disabled)return!1;var _=Object(_web_lib_utils_common__WEBPACK_IMPORTED_MODULE_8__.trim)(val(i)),o=Tickets.getUploadAttachs();if(!_&&!o.length)return a&&window.Helpdesk&&window.Helpdesk.closeTicket(e,t),Object(_web_lib_dom__WEBPACK_IMPORTED_MODULE_4__.elfocus)(i);var s=Tickets.getReplyQueryData(e,_,t,o);if(!1===s)return!1;if(cur.checkedTickets){var n=[];each(cur.checkedTickets,(function(e,t){n.push(e)})),s.similar=n.join(",")}Tickets.doSendReply(e,s),delete cur.photoUploadInd},addPayData(e,t){if(replyIsSending())return!1;if(Tickets.checkPayForm()){var a=Object(_web_lib_utils_common__WEBPACK_IMPORTED_MODULE_8__.trim)(val("tickets_reply")),i=Tickets.getUploadAttachs(),_=Tickets.getReplyQueryData(e,a,t,i);extend(_,Tickets.getPayFields()),Tickets.doSendReply(e,_)}},checkVkPayForm(){var e=val("tickets_vkpay_code"),t=ge("tickets_vkpay_phone"),a=!0;(e.match(/^\d{4}$/)||(Object(_web_lib_ui__WEBPACK_IMPORTED_MODULE_7__.notaBene)("tickets_vkpay_code"),a=!1),t)&&(Object(_web_lib_utils_common__WEBPACK_IMPORTED_MODULE_8__.trim)(val(t)).match(/^[\d\*]{10,}$/)||(Object(_web_lib_ui__WEBPACK_IMPORTED_MODULE_7__.notaBene)("tickets_vkpay_phone"),a=!1));return a},addVkPayData(e,t){if(replyIsSending())return!1;if(Tickets.checkVkPayForm()){var a=Tickets.getReplyQueryData(e,"",t,[]);extend(a,{ef:[val("tickets_vkpay_code"),val("tickets_vkpay_phone")]}),Tickets.doSendReply(e,a)}},doSendReply(ticketId,query){Tickets.removeReplyDraft(ticketId),ajax.post(Tickets.getRequestUrl(),query,{onDone(content,script){content&&val("tickets_content",content),script&&eval(script)},showProgress:()=>Object(_web_lib_ui__WEBPACK_IMPORTED_MODULE_7__.lockButton)("tickets_send"),hideProgress:()=>Object(_web_lib_ui__WEBPACK_IMPORTED_MODULE_7__.unlockButton)("tickets_send")})},checkTextLength(e,t,a,i){var _=Object(_web_lib_utils_common__WEBPACK_IMPORTED_MODULE_8__.trim)(e.value).replace(/\n\n\n+/g,"\n\n");if(e.lastLen!==_.length){var o=e.lastLen=_.length,s=o-_.replace(/\n/g,"").length;i=i||10,a=ge(a),o>t-100||s>i||("dmca"===nav.objLoc[0]||"new_dmca"==nav.objLoc.act)&&o>0?(show(a),a.innerHTML=o>t?getLang("text_exceeds_symbol_limit",o-t):s>i?getLang("global_recommended_lines",s-i):getLang("text_N_symbols_remain",t-o)):hide(a)}},editComment(ticketId,replyId,hash){if(cur.editStarted)return!1;cur.editing&&this.cancelEditComment(cur.editing);var cont=geByClass1("tickets_reply_text",ge("reply"+replyId));return cur.editStarted=!0,ajax.post(Tickets.getRequestUrl()+"?act=a_get_comment",{ticket_id:ticketId,cid:replyId,hash},{onDone(html,curData,attachs){var canAttach=!0;if(curData&&(curData.lang&&(cur.lang=extend(cur.lang||{},curData.lang),delete curData.lang),curData.script&&(eval(curData.script),delete curData.script),curData.noAttaches&&(canAttach=!1,delete curData.noAttaches),extend(cur,curData)),delete cur.editStarted,cont.parentNode.insertBefore(Object(_web_lib_dom__WEBPACK_IMPORTED_MODULE_4__.se)(html),cont),canAttach){var attachOpts={limit:5,oneClick:cur.oneClickUpload,target:"edit"};cur.addScreenShot&&(attachOpts.photoCallback=cur.addScreenShot),cur.ticketsEditMedia=Tickets.initAddMedia(ge("tis_add_lnk_edit").firstChild,"tis_preview_edit",cur.mediaTypes,attachOpts)}var textDiv=geByClass1("tickets_reply_text",ge("reply"+replyId)),replyInput=ge("reply"+replyId+"edit");Object(_web_lib_dom__WEBPACK_IMPORTED_MODULE_4__.setStyle)(replyInput,"height",Object(_web_lib_dom__WEBPACK_IMPORTED_MODULE_4__.getSize)(textDiv)[1]),hide(textDiv),hide(geByClass1("tickets_reply_actions",ge("reply"+replyId))),hide("attachs"+replyId),show("tickets_reply_edit"+replyId),Object(_web_lib_layout_utils__WEBPACK_IMPORTED_MODULE_9__.autosizeSetup)(replyInput,{minHeight:34}),setTimeout((function(){cur.editing=replyId,canAttach&&each(attachs,(function(e,t){cur.ticketsEditMedia.chooseMedia(t[0],t[1],t[2])})),Object(_web_lib_dom__WEBPACK_IMPORTED_MODULE_4__.elfocus)(replyInput)}),0)},onFail:e=>(delete cur.editStarted,hide("reply_actions"+replyId),Tickets.showError(e))}),!1},saveComment(e,t,a,i){e&&27==e.keyCode?this.cancelEditComment(cur.editing):e&&(e.ctrlKey||e.metaKey&&browser.mac)&&(10==e.keyCode||13==e.keyCode)&&this.doSaveComment(t,a,i)},cancelEditComment(e){show(geByClass1("tickets_reply_text",ge("reply"+e))),show(geByClass1("tickets_reply_actions",ge("reply"+e))),show("attachs"+e),Object(_web_lib_dom__WEBPACK_IMPORTED_MODULE_4__.re)("tickets_reply_edit"+e),delete cur.editing},doSaveComment(e,t,a){var i=Object(_web_lib_utils_common__WEBPACK_IMPORTED_MODULE_8__.trim)(val("reply"+e+"edit")),_=[],o=cur.ticketsEditMedia&&cur.ticketsEditMedia.chosenMedias||[];o&&each(o,(function(e,t){var a=t[0],i=t[1];"photo"!=a&&"doc"!=a||_.push(a+","+i)})),i||_.length?ajax.post(Tickets.getRequestUrl()+"?act=a_edit_comment",{ticket_id:a,cid:e,text:i,attachs:_,hash:t},{onDone(t,a){var i=geByClass1("tickets_reply_text",ge("reply"+e)),_=geByClass1("tickets_reply_actions",ge("reply"+e));if(val(i,t),show(geByClass1("tickets_reply_text",ge("reply"+e))),show(_),show("attachs"+e),0!==a)if(a){var o=ge("attachs"+e);o||(o=_.parentNode.insertBefore(Object(_web_lib_dom__WEBPACK_IMPORTED_MODULE_4__.ce)("div",{id:"attachs"+e,className:"clear_fix tr_attachs"}),_)),val(o,a)}else Object(_web_lib_dom__WEBPACK_IMPORTED_MODULE_4__.re)("attachs"+e);Object(_web_lib_dom__WEBPACK_IMPORTED_MODULE_4__.re)("tickets_reply_edit"+e),delete cur.editing},onFail:t=>(hide("reply_actions"+e),Tickets.showError(t)),showProgress:()=>Object(_web_lib_ui__WEBPACK_IMPORTED_MODULE_7__.lockButton)("save_butn"+e),hideProgress:()=>Object(_web_lib_ui__WEBPACK_IMPORTED_MODULE_7__.unlockButton)("save_butn"+e)}):Object(_web_lib_ui__WEBPACK_IMPORTED_MODULE_7__.notaBene)("reply"+e+"edit")},deleteComment:(e,t,a)=>(ajax.post(Tickets.getRequestUrl()+"?act=a_delete_comment",{ticket_id:e,reply_id:t,hash:a},{onDone(e){var a=Object(_web_lib_dom__WEBPACK_IMPORTED_MODULE_4__.domFC)(ge("reply"+t));a&&(cur.deletedComments||(cur.deletedComments=[]),cur.deletedComments[t]=val(a),val(a,e))},onFail:e=>(hide("reply_actions"+t),Tickets.showError(e))}),!1),restoreComment:(e,t,a)=>(ajax.post(Tickets.getRequestUrl()+"?act=a_restore_comment",{ticket_id:e,cid:t,hash:a},{onDone(e){var a=Object(_web_lib_dom__WEBPACK_IMPORTED_MODULE_4__.domFC)(ge("reply"+t));a&&val(a,cur.deletedComments[t])},onFail:e=>(hide("reply_actions"+t),Tickets.showError(e))}),!1),rateComment:(e,t,a,i)=>(cur.replyRating||(cur.replyRating=!0,ajax.post("support?act=a_rate_comment",{ticket_id:e,reply_id:t,rate:a,hash:i},{onDone(e){delete cur.replyRating,val("reply_actions"+t,e)},onFail(){delete cur.replyRating}})),!1),deleteTicket(e,t){var a=Object(_web_lib_message_box__WEBPACK_IMPORTED_MODULE_12__.showFastBox)({title:getLang("support_delete_title"),dark:!0,bodyStyle:"padding: 20px; line-height: 160%;",width:430},getLang("support_delete_confirm"),getLang("support_delete_button"),(function(){ajax.post(Tickets.getRequestUrl()+"?act=a_delete",{ticket_id:e,hash:t},{progress:a.progress,onFail(){a.hide()}})}),getLang("global_cancel"));return!1},showMsg(e){var t=ge("tickets_msg");if(!t){var a;switch(cur.section){case"list":a=ge("tickets_list");break;case"new_faq":a=ge("tickets_faq_msg"),show("tickets_faq_msg");break;case"show":default:a=ge("tickets_reply_rows")}a&&(t=a.insertBefore(Object(_web_lib_dom__WEBPACK_IMPORTED_MODULE_4__.ce)("div",{id:"tickets_msg",className:"msg"}),a.firstChild))}return Object(_web_lib_dom__WEBPACK_IMPORTED_MODULE_4__.re)("tickets_error"),t&&(t.innerHTML=e,t.style.backgroundColor="#F4EBBD",Object(_web_lib_fx__WEBPACK_IMPORTED_MODULE_10__.animate)(t,{backgroundColor:"#F9F6E7"},2e3)),!0},showError(e){var t=ge("tickets_error");if(!t){var a;switch(cur.section){case"list":a=ge("tickets_list");break;case"new_faq":a=ge("tickets_faq_msg"),show("tickets_faq_msg");break;case"history":case"show":default:a=ge("tickets_reply_rows")}a&&(t=a.insertBefore(Object(_web_lib_dom__WEBPACK_IMPORTED_MODULE_4__.ce)("div",{id:"tickets_error",className:"error"}),a.firstChild))}return Object(_web_lib_dom__WEBPACK_IMPORTED_MODULE_4__.re)("tickets_msg"),hide("tickets_progress"),t&&(t.innerHTML=e,t.style.backgroundColor="#FACEBB",Object(_web_lib_fx__WEBPACK_IMPORTED_MODULE_10__.animate)(t,{backgroundColor:"#FFEFE8"},2e3)),Object(_web_lib_scroll__WEBPACK_IMPORTED_MODULE_13__.scrollToTop)(200),!0},showAllReplies(ticketId){var link=ge("show_all_replies_link"),pr=geByClass1("progress",link),label=geByClass1("label",link);return hide(label),show(pr),ajax.post(Tickets.getRequestUrl()+"?act=show",{id:ticketId,all:1},{onDone(content,script){content&&val("tickets_reply_rows",content),script&&eval(script)},onFail(){show(label),hide(pr)}}),!1},showPhoto(e,t,a){var i=Object(_web_lib_box_utils__WEBPACK_IMPORTED_MODULE_14__.curBox)();if(!i)return showPhoto(e,t,a);var _=[];each(Object(_web_lib_dom__WEBPACK_IMPORTED_MODULE_4__.geByTag)("button",i.bodyNode.nextElementSibling),(function(){_.push([this.innerHTML,this.onclick,hasClass(this,"flat_button")?"yes":"no"])})),cur.boxBackup={body:document.createDocumentFragment(),width:Object(_web_lib_dom__WEBPACK_IMPORTED_MODULE_4__.getSize)(i.bodyNode.parentNode)[0],hideButtons:!Object(_web_lib_dom__WEBPACK_IMPORTED_MODULE_4__.isVisible)(i.bodyNode.nextElementSibling),bodyStyle:i.bodyNode.getAttribute("style"),title:val(geByClass1("box_title",i.bodyNode.previousElementSibling)),btns:_};var o=i.bodyNode;return cur.scrollTopBack=boxLayerWrap.scrollTop,a.onShow=function(){for(;o.firstChild;)cur.boxBackup.body.appendChild(o.firstChild)},a.onHide=function(){var e=Object(_web_lib_message_box__WEBPACK_IMPORTED_MODULE_12__.showFastBox)("","");e.setOptions({hideButtons:cur.boxBackup.hideButtons,title:cur.boxBackup.title,bodyStyle:cur.boxBackup.bodyStyle,width:cur.boxBackup.width}),e.bodyNode.appendChild(cur.boxBackup.body),cur.boxBackup.btns&&(e.removeButtons(),each(cur.boxBackup.btns.reverse(),(function(){e.addButton.apply(e,this)}))),e.setOptions({}),boxLayerWrap.scrollTop=cur.scrollTopBack},showPhoto(e,t,a)},showAddScreenBox(e){var t={title:getLang("support_adding_screen"),width:450,bodyStyle:"padding: 0px",dark:1};return e&&(t.onShow=e),Object(_web_lib_message_box__WEBPACK_IMPORTED_MODULE_12__.showFastBox)(t,cur.screenBox)},showAddDocBox(e){var t={title:getLang("support_adding_doc"),width:450,bodyStyle:"padding: 0px",dark:1};return e&&(t.onShow=e),Object(_web_lib_message_box__WEBPACK_IMPORTED_MODULE_12__.showFastBox)(t,cur.docBox)},showAddExtraFieldFileBox:(e,t)=>Object(_web_lib_message_box__WEBPACK_IMPORTED_MODULE_12__.showFastBox)({onShow:Tickets.initExtraFieldUpload.pbind("tis_add_data",{hideOnStart:!0,fieldIndex:e,withSize:t}),title:getLang("support_adding_image"),width:460,bodyStyle:"padding: 0px",dark:1,hideButtons:!0},cur.extraFieldsBox),choosePhotoUploaded(e,t,a){var i=void 0!==e.ind?e.ind:e,_=(e.fileName||e).replace(/[&<>"']/g,""),o=e.fileName?i+"_"+e.fileName:e,s=ge("upload"+o+"_progress_wrap");s&&hide(geByClass1("progress_x",s)),ajax.post("al_photos.php",extend({act:"choose_uploaded_support"},t),{onDone(e,t){a.chooseMedia("photo",e,extend(t,{upload_ind:i+"_"+_}))},onFail:Tickets.chooseFail.pbind(a,e)})},chooseDocUploaded(e,t,a){var i=void 0!==e.ind?e.ind:e,_=e.fileName?i+"_"+e.fileName:e,o=ge("upload"+_+"_progress_wrap");o&&hide(geByClass1("progress_x",o)),ajax.post("docs.php?act=a_save_doc",extend({from:"choose",support_hash:cur.uploadDocData.support_hash},t),{onDone(e,t,i){Object(_web_lib_dom__WEBPACK_IMPORTED_MODULE_4__.re)("upload"+_+"_progress_wrap");var o=Object(_web_lib_box_utils__WEBPACK_IMPORTED_MODULE_14__.curBox)();o&&(cur.preventBoxHide=!0),a.chooseMedia("doc",e+"_"+t,i),o&&(cur.preventBoxHide=!1)},onFail:Tickets.chooseFail.pbind(a,e)})},chooseExtraFieldUploaded(e,t,a){var i=void 0!==t.ind?t.ind:t,_=(t.fileName||t).replace(/[&<>"']/g,""),o=t.fileName?i+"_"+t.fileName:t,s=ge("upload"+o+"_progress_wrap");s&&hide(geByClass1("progress_x",s)),ajax.post("al_photos.php",extend({act:"choose_uploaded_support"},a),{onDone(t,a){Tickets.chooseExtraFieldComplete(e,t,extend(a,{upload_ind:i+"_"+_}))},onFail(e){Tickets.chooseFail(null,t)},hideProgress:()=>Object(_web_lib_dom__WEBPACK_IMPORTED_MODULE_4__.removeClass)("tickets_new_extra_field__uploaded_"+e,"tickets_new_extra_field__uploaded_p")})},removeExtraFieldFile(e,t){var a=e.target.parentNode;a.tt&&a.tt.hide&&a.tt.hide();var i=ge("tickets_new_extra_field__uploaded_"+t);Object(_web_lib_dom__WEBPACK_IMPORTED_MODULE_4__.removeClass)(i,"tickets_new_extra_field__uploaded_c"),Object(_web_lib_dom__WEBPACK_IMPORTED_MODULE_4__.removeClass)(i,"tickets_new_extra_field__uploaded_p"),Object(_web_lib_dom__WEBPACK_IMPORTED_MODULE_4__.re)("tickets_new_extra_field__file_"+t),hide("tis_add_lnk"),show("tickets_new_extra_field__upload_btn_"+t,"tickets_new_extra_field__example_"+t),Object(_web_lib_dom__WEBPACK_IMPORTED_MODULE_4__.data)(ge("tickets_new_extra_field_"+t),"value","")},allExtraFieldFilesUploaded(){var e=!0,t=ge("tickets_new_extra_fields"),a=t?Object(_web_lib_dom__WEBPACK_IMPORTED_MODULE_4__.geByClass)("_ef_file",t):[];return each(a,(function(t,a){if(!Object(_web_lib_dom__WEBPACK_IMPORTED_MODULE_4__.data)(a,"value"))return e=!1,!1})),e},chooseExtraFieldComplete(e,t,a){if(void 0===a.upload_ind)return!1;isObject(a)||(a={thumb_m:a[0]||"",thumb_s:a[1]||"",list:a[2]||"",view_opts:a[3]||"",upload_ind:a.upload_ind||void 0}),vkImage().src=a.thumb_m;var i="<div onclick=\"return Tickets.showPhoto('"+t+"', '"+a.list+"', "+a.view_opts.replace(/"/g,"&quot;")+');" class="fl_l page_preview_photo"><img class="page_preview_photo" src="'+a.thumb_m+'" /></div>',_=Object(_web_lib_dom__WEBPACK_IMPORTED_MODULE_4__.se)('<div class="page_preview_photo_wrap" id="tickets_new_extra_field__file_'+e+'">'+i+'<div class="page_media_x_wrap inl_bl" '+(browser.msie?"title":"tootltip")+'="'+getLang("dont_attach")+'" onmouseover="if (browser.msie) return; showTooltip(this, {text: this.getAttribute(\'tootltip\'), shift: [13, 3, 3], black: 1})"><div class="page_media_x" onclick="Tickets.removeExtraFieldFile(event, '+e+');"></div></div></div>');Object(_web_lib_dom__WEBPACK_IMPORTED_MODULE_4__.re)("upload"+a.upload_ind+"_progress_wrap"),Object(_web_lib_dom__WEBPACK_IMPORTED_MODULE_4__.data)(ge("tickets_new_extra_field_"+e),"value",t);var o=ge("tickets_new_extra_field__uploaded_"+e);return o.appendChild(_),Object(_web_lib_dom__WEBPACK_IMPORTED_MODULE_4__.removeClass)(o,"tickets_new_extra_field__uploaded_p"),addClass(o,"tickets_new_extra_field__uploaded_c"),cur.fileApiUploadStarted||boxQueue.hideLast(),cur.lastPostMsg=!1,void 0!==a.upload_ind&&delete a.upload_ind,Tickets.allExtraFieldFilesUploaded()&&show("tis_add_lnk"),!1},chooseFail(e,t){var a=void 0!==t.ind?t.ind:t;if("fileApi"==Upload.types[a]&&!Upload.options[a].wiki_editor){var i=t.fileName?a+"_"+t.fileName:t;e&&Object(_web_lib_dom__WEBPACK_IMPORTED_MODULE_4__.re)("upload"+i+"_progress_wrap")}var _="",o=(Upload.options[a]||{}).type||"";"doc"==o?_=getLang("support_upload_fail"):"photo"==o&&(_=getLang("support_photo_upload_fail")),_&&setTimeout(Object(_web_lib_message_box__WEBPACK_IMPORTED_MODULE_12__.showFastBox)({title:getLang("global_error"),dark:1,bodyStyle:"padding: 20px; line-height: 160%;"},_).hide,4e3),topError("Upload failed",{dt:-1,type:102,url:(ge("file_uploader_form"+a)||{}).action}),Upload.embed(a)},initPhotoUpload(el,params){if(el=ge(el),el){var uploadData=cur.uploadPhotoData,opts=(uploadData||{}).options,addMedia;switch(params.target){case"auto":addMedia=cur.ticketsAutoMedia,uploadData=cur.autoUploadData,opts=uploadData.options;break;case"provider_email":addMedia=window.HelpdeskProviderEmail.mediaSelector,uploadData=cur.uploadPhotoData,opts=uploadData.options;break;case"ento_answer":addMedia=cur.ticketsNewMedia,uploadData=cur.uploadPhotoData,opts=uploadData.options;break;case"template":addMedia=cur.ticketsTemplateMedia,uploadData=cur.templateUploadData,opts=uploadData.options;break;case"edit":addMedia=cur.ticketsEditMedia;break;case"pass":addMedia=window.Helpdesk.passMedia;break;case"new":default:addMedia=cur.ticketsNewMedia}if(addMedia)return Upload.init(el,uploadData.url,uploadData.vars,{file_name:"photo",file_size_limit:5242880,file_types_description:"Image files (*.jpg, *.jpeg, *.png, *.gif)",file_types:"*.jpg;*.JPG;*.jpeg;*.JPEG;*.png;*.PNG;*.gif;*.GIF",accept:"image/jpeg,image/png,image/gif",file_match:".(gif|jpg|jpeg|png)$",lang:opts.lang,onUploadStart(e,t){var a=void 0!==e.ind?e.ind:e,i=Upload.options[a];"form"==Upload.types[a]&&(geByClass1("file",el).disabled=!0),"fileApi"==Upload.types[a]&&(cur.notStarted&&(params&&params.hideOnStart&&boxQueue.hideLast(),delete cur.notStarted),i.multi_progress&&this.onUploadProgress(e,0,0))},onUploadComplete(info,res){var params;try{params=eval("("+res+")")}catch(e){params=Object(_shared_lib_convert__WEBPACK_IMPORTED_MODULE_15__.fromQueryString)(res)}params.photos?Tickets.choosePhotoUploaded(info,params,addMedia):Upload.onUploadError(info)},onUploadProgress(e,t,a){var i=void 0!==e.ind?e.ind:e;if("fileApi"==Upload.types[i]){var _=(cur.attachMediaIndexes||{})[i];if(void 0===_||_&&cur.addMedia[_].chosenMedia){var o={loaded:t,total:a};e.fileName&&(o.fileName=e.fileName.replace(/[&<>"']/g,"")),addMedia.showMediaProgress("photo",i,o)}}else if("flash"==Upload.types[i]){if(!ge("form"+i+"_progress")){for(var s=Upload.obj[i],n=Object(_web_lib_dom__WEBPACK_IMPORTED_MODULE_4__.getSize)(s)[1]/2+10,r=s.firstChild;r;)1==r.nodeType&&(r.id=="uploader"+i&&browser.msie?Object(_web_lib_dom__WEBPACK_IMPORTED_MODULE_4__.setStyle)(r,{position:"relative",left:"-5000px"}):Object(_web_lib_dom__WEBPACK_IMPORTED_MODULE_4__.setStyle)(r,{visibility:"hidden"})),r=r.nextSibling;s.appendChild(Object(_web_lib_dom__WEBPACK_IMPORTED_MODULE_4__.ce)("div",{innerHTML:'<div class="tickets_progress_wrap">            <div id="form'+i+'_progress" class="tickets_progress" style="width: 0%;"></div>          </div></div>'},{height:n+"px",marginTop:-n+"px"}))}var l=Object(_web_lib_utils_common__WEBPACK_IMPORTED_MODULE_8__.intval)(t/a*100);Object(_web_lib_dom__WEBPACK_IMPORTED_MODULE_4__.setStyle)(ge("form"+i+"_progress"),{width:l+"%"})}},onUploadError:Tickets.chooseFail.pbind(addMedia),onUploadCompleteAll(e){var t=void 0!==e.ind?e.ind:e;"fileApi"!==Upload.types[t]&&(params.hideOnStart?boxQueue.hideLast():Upload.embed(t))},multiple:1,multi_progress:1,max_files:params&&params.max_files||5,max_files_hide_last:1,clear:1,type:"photo",max_attempts:3,file_input:cur.uploadInput,server:opts.server,error:opts.default_error,error_hash:opts.error_hash,dropbox:"tis_dropbox"})}},initDocUpload(el,params){if(el=ge(el),el){var uploadData=params.uploadData||cur.uploadDocData,opts=uploadData.options,addMedia;switch(params.target){case"auto":addMedia=cur.ticketsAutoMedia;break;case"provider_email":addMedia=window.HelpdeskProviderEmail.mediaSelector;break;case"template":addMedia=cur.ticketsTemplateMedia;break;case"edit":addMedia=cur.ticketsEditMedia;break;case"pass":addMedia=window.Helpdesk.passMedia;break;case"new":default:addMedia=cur.ticketsNewMedia}if(addMedia)return Upload.init(el,uploadData.url,uploadData.vars,{file_name:"file",file_size_limit:1073741824,file_types_description:"Documents",file_types:"*.*;",file_disallowed_types:!!params.disallowedFileTypes&&params.disallowedFileTypes,lang:opts.lang,onUploadStart(e,t){var a=void 0!==e.ind?e.ind:e,i=Upload.options[a];"form"==Upload.types[a]&&(geByClass1("file",el).disabled=!0),"fileApi"==Upload.types[a]&&(cur.notStarted&&(params&&params.hideOnStart&&boxQueue.hideLast(),delete cur.notStarted),i.multi_progress&&this.onUploadProgress(e,0,0))},onUploadComplete(info,res){var params;try{params=eval("("+res+")")}catch(e){params=Object(_shared_lib_convert__WEBPACK_IMPORTED_MODULE_15__.fromQueryString)(res)}params.file?Tickets.chooseDocUploaded(info,params,addMedia):Upload.onUploadError(info)},onUploadProgress(e,t,a){var i=void 0!==e.ind?e.ind:e;if("fileApi"==Upload.types[i]){var _=(cur.attachMediaIndexes||{})[i];if(void 0===_||_&&cur.addMedia[_].chosenMedia){var o={loaded:t,total:a};e.fileName&&(o.fileName=e.fileName.replace(/[&<>"']/g,"")),addMedia.showMediaProgress("doc",i,o)}}else if("flash"==Upload.types[i]){if(!ge("form"+i+"_progress")){for(var s=Upload.obj[i],n=Object(_web_lib_dom__WEBPACK_IMPORTED_MODULE_4__.getSize)(s)[1]/2+10,r=s.firstChild;r;)1==r.nodeType&&(r.id=="uploader"+i&&browser.msie?Object(_web_lib_dom__WEBPACK_IMPORTED_MODULE_4__.setStyle)(r,{position:"relative",left:"-5000px"}):Object(_web_lib_dom__WEBPACK_IMPORTED_MODULE_4__.setStyle)(r,{visibility:"hidden"})),r=r.nextSibling;s.appendChild(Object(_web_lib_dom__WEBPACK_IMPORTED_MODULE_4__.ce)("div",{innerHTML:'<div class="tickets_progress_wrap">            <div id="form'+i+'_progress" class="tickets_progress" style="width: 0%;"></div>          </div></div>'},{height:n+"px",marginTop:-n+"px"}))}var l=Object(_web_lib_utils_common__WEBPACK_IMPORTED_MODULE_8__.intval)(t/a*100);Object(_web_lib_dom__WEBPACK_IMPORTED_MODULE_4__.setStyle)(ge("form"+i+"_progress"),{width:l+"%"})}},onCheckComplete:params&&params.onCheckComplete||!1,onUploadError:Tickets.chooseFail.pbind(addMedia),onUploadCompleteAll(e){var t=void 0!==e.ind?e.ind:e;"fileApi"!==Upload.types[t]&&(params.hideOnStart?boxQueue.hideLast():Upload.embed(t))},multiple:1,multi_progress:1,max_files:params&&params.max_files||5,max_files_hide_last:1,clear:1,type:"doc",max_attempts:3,file_input:cur.uploadInput,server:opts.server,error:opts.default_error,error_hash:opts.error_hash,dropbox:"tis_dropbox"})}},showExtraFieldProgress(e,t,a,i){var _=a.loaded/a.total,o=Object(_web_lib_utils_common__WEBPACK_IMPORTED_MODULE_8__.intval)(100*_),s=(a.fileName||a.name||"").replace(/[&<>"']/g,""),n=s?t+"_"+s:t,r=s?s.length>33?s.substr(0,30)+"...":s:"",l=ge("upload"+n+"_progress");if(l)if(show(l),l.full){var c=a(l,"tween"),d=Object(_web_lib_utils_common__WEBPACK_IMPORTED_MODULE_8__.intval)(l.full*_);c&&c.isTweening?c.to.width=d:Object(_web_lib_fx__WEBPACK_IMPORTED_MODULE_10__.animate)(l,{width:d+"px"},500)}else Object(_web_lib_dom__WEBPACK_IMPORTED_MODULE_4__.setStyle)(l,{width:o+"%"});else{hide("tickets_new_extra_field__upload_btn_"+e,"tickets_new_extra_field__example_"+e);var p=ge("tickets_new_extra_field__uploaded_"+e);addClass(p,"tickets_new_extra_field__uploaded_p"),cur.attachMediaIndexes||(cur.attachMediaIndexes={}),cur.attachMediaIndexes[n]=i;var u='<div><div class="page_attach_progress_wrap">  <div id="upload'+n+'_progress" class="page_attach_progress"></div></div></div></div>'+(r?'<div class="attach_label">'+r+"</div>":"")+'<div class="progress_x" onmouseover="showTooltip(this, {text: \''+getLang("dont_attach")+'\', shift: [6, 3, 3]})" onclick="Upload.terminateUpload('+t+", '"+(s||t)+"');\"></div>";p.appendChild(Object(_web_lib_dom__WEBPACK_IMPORTED_MODULE_4__.ce)("div",{id:"upload"+n+"_progress_wrap",innerHTML:u,className:"clear_fix upload_"+t+"_progress"})),show(p),(l=ge("upload"+n+"_progress")).full=!1,o?Object(_web_lib_dom__WEBPACK_IMPORTED_MODULE_4__.setStyle)(l,{width:l.full?Object(_web_lib_utils_common__WEBPACK_IMPORTED_MODULE_8__.intval)(l.full*_)+"px":o+"%"}):(Object(_web_lib_dom__WEBPACK_IMPORTED_MODULE_4__.setStyle)(l,{width:"1px"}),hide(l))}},initExtraFieldUpload(el,params){if(el=ge(el),el){var about=ge("tis_about");about&&(about.innerHTML=getLang(params.withSize?"support_extra_field_limits_photo":"support_extra_field_limits"));var uploadData=cur.uploadExtraFieldsData,opts=uploadData.options,fieldIndex=params.fieldIndex;return Upload.init(el,uploadData.url,uploadData.vars,{file_name:"file",file_size_limit:10485760,file_types_description:"Image files (*.jpg, *.jpeg, *.png)",file_types:"*.jpg;*.JPG;*.jpeg;*.JPEG;*.png;*.PNG",accept:"image/jpeg,image/png",file_match:".(jpg|jpeg|png)$",lang:opts.lang,onUploadStart(e,t){var a=void 0!==e.ind?e.ind:e,i=Upload.options[a];"form"==Upload.types[a]&&(geByClass1("file",el).disabled=!0),"fileApi"==Upload.types[a]&&(cur.notStarted&&(params&&params.hideOnStart&&boxQueue.hideLast(),delete cur.notStarted),i.multi_progress&&this.onUploadProgress(e,0,0))},onUploadComplete(info,res){var params;try{params=eval("("+res+")")}catch(e){params=Object(_shared_lib_convert__WEBPACK_IMPORTED_MODULE_15__.fromQueryString)(res)}params.photos?Tickets.chooseExtraFieldUploaded(fieldIndex,info,params):Upload.onUploadError(info)},onUploadProgress(e,t,a){var i=void 0!==e.ind?e.ind:e;if("fileApi"==Upload.types[i]){var _=(cur.attachMediaIndexes||{})[i],o={loaded:t,total:a};e.fileName&&(o.fileName=e.fileName.replace(/[&<>"']/g,"")),Tickets.showExtraFieldProgress(fieldIndex,i,o,_)}else if("flash"==Upload.types[i]){if(!ge("form"+i+"_progress")){for(var s=Upload.obj[i],n=Object(_web_lib_dom__WEBPACK_IMPORTED_MODULE_4__.getSize)(s)[1]/2+10,r=s.firstChild;r;)1==r.nodeType&&(r.id=="uploader"+i&&browser.msie?Object(_web_lib_dom__WEBPACK_IMPORTED_MODULE_4__.setStyle)(r,{position:"relative",left:"-5000px"}):Object(_web_lib_dom__WEBPACK_IMPORTED_MODULE_4__.setStyle)(r,{visibility:"hidden"})),r=r.nextSibling;s.appendChild(Object(_web_lib_dom__WEBPACK_IMPORTED_MODULE_4__.ce)("div",{innerHTML:'<div class="tickets_progress_wrap">          <div id="form'+i+'_progress" class="tickets_progress" style="width: 0%;"></div>        </div></div>'},{height:n+"px",marginTop:-n+"px"}))}var l=Object(_web_lib_utils_common__WEBPACK_IMPORTED_MODULE_8__.intval)(t/a*100);Object(_web_lib_dom__WEBPACK_IMPORTED_MODULE_4__.setStyle)(ge("form"+i+"_progress"),{width:l+"%"})}},onCheckComplete:!1,onUploadError(){},onUploadCompleteAll(e){var t=void 0!==e.ind?e.ind:e;"fileApi"!==Upload.types[t]&&(params.hideOnStart?boxQueue.hideLast():Upload.embed(t))},multiple:!1,multi_progress:1,clear:1,type:"photo",max_attempts:3,file_input:null,server:opts.server,error:opts.default_error,error_hash:opts.error_hash,dropbox:"tis_dropbox"})}},__getFormUploadIds(e){switch(e){case"ento_answer":return["tis_upload_ento_answer","tis_uploader_ento_answer"];case"provider_email":return["tis_upload_provider_email","tis_uploader_provider_email"];case"auto":return["tis_upload_auto","tis_uploader_auto"];case"template":return["tis_upload_template","tis_uploader_template"];case"edit":return["tis_upload_edit","tis_uploader_edit"];case"pass":return["tis_upload_pass","tis_uploader_pass"];case"new":default:return["tis_upload","tis_uploader"]}},__photoMediaHandler(e){var t=e.target||"new";stManager.add(jsc("web/upload.js"),(function(){e.photoCallback?(cur.lastMediaTarget=t,e.photoCallback()):e.oneClick?ge("tickets_photo_input"+t).click():Tickets.showAddScreenBox(Tickets.initPhotoUpload.pbind("tis_add_data",{hideOnStart:!0,target:t}))}))},__docMediaHandler(e){var t=e.target||"new";stManager.add(jsc("web/upload.js"),(function(){e.docCallback?(cur.lastMediaTarget=t,e.docCallback()):e.oneClick?ge("tickets_doc_input"+t).click():Tickets.showAddDocBox(Tickets.initDocUpload.pbind("tis_add_data",{hideOnStart:!0,target:t,disallowedFileTypes:cur.disallowedFileTypes}))}))},initAddMedia(e,t,a,i){var _=new MediaSelector(e,t,a,extend(i,{disabledTypes:["share","page"],mediaHandlers:{photo:Tickets.__photoMediaHandler,doc:Tickets.__docMediaHandler}}));return i.oneClick&&(Tickets.__initOneClickMediaUpload("photo",i,Tickets.initPhotoUpload),Tickets.__initOneClickMediaUpload("doc",i,Tickets.initDocUpload)),_},__initOneClickMediaUpload(e,t,a){var i=t.target||"new",_=Tickets.__getFormUploadIds(i),o="tickets_"+e+"_input"+i;ge(o)||ge(_[0]).appendChild(Object(_web_lib_dom__WEBPACK_IMPORTED_MODULE_4__.ce)("input",{type:"file",multiple:"true",id:o,onchange(){Object(_web_lib_dom__WEBPACK_IMPORTED_MODULE_4__.data)(this,"changed",!0),cur.uploadInput=this,a(_[1],{target:i})}}))},getAskQuestionData:e=>"faq_dislike"==e&&cur.askQuestionFaqDislike?cur.askQuestionFaqDislike:cur.askQuestion,showAverageTime(e,t){if(cur.timeShown)Tickets.toggleDetailedForm();else var a=getLang("support_wait_message").replace(/\{time\}/g,e)+'<div class="tickets_wait_img"><img src="/images/pics/support_wait.png" /></div>',i=Object(_web_lib_message_box__WEBPACK_IMPORTED_MODULE_12__.showFastBox)({title:getLang("support_average_wait_time"),width:430,dark:!0,bodyStyle:"padding: 20px; line-height: 160%;"},a,getLang("support_ask_question"),(function(){i.hide(),cur.timeShown=!0,t()}),getLang("support_back_to_faq"))},toggleDetailedForm(e){var t=ge("tickets_title");if(Object(_web_lib_dom__WEBPACK_IMPORTED_MODULE_4__.toggleClass)(ge("tickets_content"),"detailed"),Object(_web_lib_dom__WEBPACK_IMPORTED_MODULE_4__.isVisible)("tickets_detailed_form"))t.setAttribute("placeholder",getLang("support_please_add_title")),Object(_web_lib_dom__WEBPACK_IMPORTED_MODULE_4__.removeClass)(ge("tickets_search_reset"),"shown"),e&&Object(_web_lib_dom__WEBPACK_IMPORTED_MODULE_4__.elfocus)("tickets_text");else{t.setAttribute("placeholder",getLang("support_title_msg"));var a=Object(_web_lib_utils_common__WEBPACK_IMPORTED_MODULE_8__.trim)(val(t));a&&addClass(ge("tickets_search_reset"),"shown"),cur.toggleCanceled=!0,delete cur.toggled,Tickets.searchFAQ(a),Object(_web_lib_dom__WEBPACK_IMPORTED_MODULE_4__.elfocus)(t)}},getSearchQuery(){var e=ge("tickets_title")||ge("faq_search_form__title");return e?e.value:""},getFormQuery(e,t){var a={0:"support",act:e,title:Tickets.getSearchQuery()};return t&&(a.ask=1),a},switchToPayForm:(e,t)=>(Object(_web_lib_ui__WEBPACK_IMPORTED_MODULE_7__.lockButton)("tickets_create_pay"),nav.go(Tickets.getFormQuery("new_pay",t),e)),switchToAdsForm:(e,t)=>(Object(_web_lib_ui__WEBPACK_IMPORTED_MODULE_7__.lockButton)("tickets_create_ads"),nav.go(Tickets.getFormQuery("new_ads",t),e)),switchToNameForm:(e,t)=>(Object(_web_lib_ui__WEBPACK_IMPORTED_MODULE_7__.lockButton)("tickets_create_name"),nav.go(Tickets.getFormQuery("new_name",t),e)),switchToApiForm:(e,t)=>(Object(_web_lib_ui__WEBPACK_IMPORTED_MODULE_7__.lockButton)("tickets_create_api"),nav.go(Tickets.getFormQuery("new_api",t),e)),switchToMobileForm:(e,t)=>(Object(_web_lib_ui__WEBPACK_IMPORTED_MODULE_7__.lockButton)("tickets_create_mobile"),nav.go(Tickets.getFormQuery("new_mobile",t),e)),updateFAQ(e,t){clearTimeout(cur.faqTimeout),cur.faqTimeout=setTimeout((function(){var e=t.value,a=Object(_web_lib_utils_common__WEBPACK_IMPORTED_MODULE_8__.trim)(e),i=a.split(" "),_=ge("tickets_text");e.length>=70&&_&&!_.value&&!cur.flood&&(Object(_web_lib_dom__WEBPACK_IMPORTED_MODULE_4__.isVisible)("tickets_detailed_form")||(Tickets.toggleDetailedForm(),t.value="",_.focus(),_.value=e)),Object(_web_lib_dom__WEBPACK_IMPORTED_MODULE_4__.isVisible)("tickets_detailed_form")||a==cur.searchStr&&(i.length<4||4==i.length&&" "!=e[e.length-1])||(a?addClass(ge("tickets_search_reset"),"shown"):Object(_web_lib_dom__WEBPACK_IMPORTED_MODULE_4__.removeClass)(ge("tickets_search_reset"),"shown"),cur.searchStr=a,clearTimeout(cur.searchFAQTimeout),cur.searchFAQTimeout=setTimeout(Tickets.searchFAQ.pbind(cur.searchStr),300),browser.mobile||Object(_web_lib_scroll__WEBPACK_IMPORTED_MODULE_13__.scrollToTop)())}),10)},searchFAQ(e){" "==e[e.length-1]&&(e[e.length-1]="_"),addClass(ge("tickets_search"),"loading"),Object(_web_lib_dom__WEBPACK_IMPORTED_MODULE_4__.setStyle)(ge("tickets_search_reset"),{opacity:.6});var t=extend({q:e,from:nav.objLoc.act},Tickets.getFromObjLoc(["group_id","app_id","union_id"]));ajax.post("support?act=a_get_faq",t,{cache:1,hideProgress:_web_lib_dom__WEBPACK_IMPORTED_MODULE_4__.removeClass.pbind("tickets_search","loading"),onDone(e,t){var a=val("tickets_title"),i=Object(_web_lib_utils_common__WEBPACK_IMPORTED_MODULE_8__.trim)(a).split(" "),_=!cur.toggleCanceled&&(i.length>4||4==i.length&&" "==a[a.length-1])&&!cur.flood;e?val("tickets_faq_list",Object(_web_lib_dom__WEBPACK_IMPORTED_MODULE_4__.ce)("div",{innerHTML:e}).firstChild.innerHTML):(t&&val("tickets_faq_button",t),_&&(cur.toggled=!0,Tickets.toggleDetailedForm()))}})},clearSearch(e,t){var a=ge("tickets_title");Object(_web_lib_dom__WEBPACK_IMPORTED_MODULE_4__.setStyle)(e,{opacity:.6}),val(a,""),Object(_web_lib_dom__WEBPACK_IMPORTED_MODULE_4__.elfocus)(a),Tickets.updateFAQ(t,a)},saveDraft(e,t){var a=ge("tickets_reply");if(!replyIsSending()&&!browser.mobile&&a&&!a.disabled&&cur.canUseDrafts){var i=val(a),_={txt:Object(_web_lib_utils_common__WEBPACK_IMPORTED_MODULE_8__.trim)(i),medias:[]},o=(cur.ticketsNewMedia||{}).chosenMedias||[];each(o,(function(e,t){t&&_.medias.push([t[0],t[1]])})),_.medias.length||_.txt.length||(_=!1),_shared_lib_ls__WEBPACK_IMPORTED_MODULE_11__.default.set("helpdesk_draft"+vk.id+"_"+e,_),a&&cur.ticketsNewMedia&&("paste"==t||"keyup"==t)&&cur.ticketsNewMedia.checkMessageURLs(i,"keyup"!=t)}},listToggleUnusefulButton(e){toggle(ge("tickets_unuseful"),e)},listShowAltButton(e){each(Object(_web_lib_dom__WEBPACK_IMPORTED_MODULE_4__.geByClass)("secondary",ge("help_table_questions_btn")),(function(t,a){""==e||a.id!=e?hide(a):show(a)}))},goToForm(e,t,a,i){var _={0:"support",act:a};if(e)_.id=e;else{var o=uiSearch.getFieldEl("faq_search_form"),s="";o&&(s=o.value.trim())&&(_.title=s)}return t&&(_.from=t),i&&(_.bhash=i),nav.go(extend(_,Tickets.getFromObjLoc(["union_id","app_id","group_id"]))),!1},listScrollToQuestion(e){var t=null;e&&(t=ge("help_table_question_"+e)),t&&(Object(_web_lib_scroll__WEBPACK_IMPORTED_MODULE_13__.scrollToY)(Object(_web_lib_dom__WEBPACK_IMPORTED_MODULE_4__.getXY)(t)[1]-10),hasClass(t,"help_table_question_visible")||addClass(t,"help_table_question_visible"))},tryAskQuestion(e,t){var a=2,i=Tickets.getAskQuestionData(t);if(i&&(a=i.permission),a){if(1==a)return Tickets.showAverageTime(i.time,e),!1;e()}else setTimeout(Object(_web_lib_message_box__WEBPACK_IMPORTED_MODULE_12__.showFastBox)({dark:1,bodyStyle:"line-height: 160%;",title:getLang("global_error")},getLang("support_flood_error")).hide,4e3);return!1},listNotFoundVisible:()=>hasClass("help_table_questions","help_table_questions_not_found"),listHideNotFound(){Object(_web_lib_dom__WEBPACK_IMPORTED_MODULE_4__.removeClass)("help_table_questions","help_table_questions_not_found")},loadTickets(){var e=ge("tickets_list_load_more"),t=Object(_web_lib_dom__WEBPACK_IMPORTED_MODULE_4__.getXY)(e)[1],a=scrollGetY();if(a<=t&&t<=a+window.innerHeight&&!cur.ticketsLoading&&cur.ticketsLoadMore){var i=extend({act:"",offset:cur.ticketsOffset,load:1},Tickets.getFromObjLoc(["group_id","app_id","union_id"]));ajax.post("support",i,{showProgress(){addClass(e,"tickets_list_load_more_loading"),cur.ticketsLoading=!0},hideProgress(){Object(_web_lib_dom__WEBPACK_IMPORTED_MODULE_4__.removeClass)(e,"tickets_list_load_more_loading"),cur.ticketsLoading=!1},onDone(e,t,a){cur.ticketsOffset=t,cur.ticketsLoadMore=a;var i=ge("tickets_list");Object(_web_lib_dom__WEBPACK_IMPORTED_MODULE_4__.removeClass)(i.lastChild,"last");var _=Object(_web_lib_dom__WEBPACK_IMPORTED_MODULE_4__.sech)(e);each(_,(function(e,t){i.appendChild(t)})),Tickets.loadTickets()}})}},closeMobileNotice(e){Object(_web_lib_fx__WEBPACK_IMPORTED_MODULE_10__.slideUp)("tickets_mobile_notice",200),ajax.post("support?act=a_hide_mobile_notice",{hash:e})},listClearCache(){var e=nav.objLoc;e.cc=1,nav.go(e)},storeOutdatedLeft(e){_shared_lib_ls__WEBPACK_IMPORTED_MODULE_11__.default.set("support_outdated_left",{id:e,ts:Math.floor((new Date).getTime()/1e3)})},showTicketLockedTT(e,t){Object(_web_lib_tooltip_utils__WEBPACK_IMPORTED_MODULE_6__.showTooltip)(e,{dir:"bottom",text:t,typeClass:"tt_black",shift:[15,10,0]})},toggleQuestionHider(e){var t=Object(_web_lib_dom__WEBPACK_IMPORTED_MODULE_4__.domPN)(Object(_web_lib_dom__WEBPACK_IMPORTED_MODULE_4__.domPN)(e)),a=geByClass1("wk_hider_body",t);Object(_web_lib_dom__WEBPACK_IMPORTED_MODULE_4__.toggleClass)(t,"wk_hider_box"),Object(_web_lib_dom__WEBPACK_IMPORTED_MODULE_4__.toggleClass)(t,"wk_hider_box_opened"),hasClass(t,"wk_hider_box_opened")?Object(_web_lib_fx__WEBPACK_IMPORTED_MODULE_10__.slideDown)(a,200):Object(_web_lib_fx__WEBPACK_IMPORTED_MODULE_10__.slideUp)(a,200)},payoutFormTT(e,t){Object(_web_lib_tooltip_utils__WEBPACK_IMPORTED_MODULE_6__.showTooltip)(e,{text:t,dir:"bottom",forcetoup:!0})}}},KkBR:function(e,t,a){"use strict";a.r(t),a.d(t,"Login",(function(){return E}));var i=a("MZbF"),_=a("q1tI"),o=(a("Oyvg"),a("SRfc"),a("pIFo"),a("91GP"),a("17x9"),a("v+DW")),s=a("6krn"),n=a("dV62"),r=a("6raB"),l=a("dLHM"),c=a("+tmx"),d=a("6b4t"),p=a("i8i4"),u=a("pemR"),h=a("clTp");class m extends _.Component{constructor(e){super(e),this.addTooltip=e=>{if(this.el){var t=this.props,a=t.text,i=t.position,_=t.align,o=t.marginTop,s=t.marginLeft,n=Object(h.default)(this.el);this.update({text:a,position:i,align:_,rect:n,marginTop:o,marginLeft:s})}},this.removeTooltip=e=>{document.activeElement!==this.inputEl&&this.update({remove:!0})},this.renderTooltip=()=>{if(!this.state.tooltip)return null;var e=this.state.tooltip,t=e.x,a=e.y,i=e.position,o=e.align,s=e.text,n=e.removed,r=this.props,l=r.appearance,c=r.width,d=Object(u.classNames)("UnblockTooltip","UnblockTooltip--"+i,"UnblockTooltip--"+l,{"UnblockTooltip--removed":!!n,["UnblockTooltip--align-"+o]:"t"===i||"b"===i}),p={top:a,left:t},h=c?{width:c}:{};return _.createElement("div",{className:d,style:p},_.createElement("div",{className:"UnblockTooltip__in",style:h,dangerouslySetInnerHTML:{__html:s}}))},this.state={}}componentDidMount(){this.el=p.findDOMNode(this),this.inputEl="INPUT"===this.el.tagName?this.el:this.el.getElementsByTagName("input")[0],this.backgroundElement=document.getElementById("box_layer_wrap"),this.el.addEventListener("mouseenter",this.addTooltip),this.el.addEventListener("mouseleave",this.removeTooltip),this.inputEl.addEventListener("focus",this.addTooltip),this.inputEl.addEventListener("blur",this.removeTooltip),this.backgroundElement.addEventListener("scroll",this.addTooltip),window.addEventListener("resize",this.addTooltip)}componentWillUnmount(){this.el.removeEventListener("mouseenter",this.addTooltip),this.el.removeEventListener("mouseleave",this.removeTooltip),this.inputEl.removeEventListener("focus",this.addTooltip),this.inputEl.removeEventListener("blur",this.removeTooltip),this.backgroundElement.addEventListener("scroll",this.addTooltip),window.removeEventListener("resize",this.addTooltip)}update(e){var t=e.position,a=e.align,i=e.text,_=e.rect,o=e.marginTop,s=e.marginLeft,n=!_||0===_.top&&0===_.left;if(!0!==e.remove&&this.props.isShown&&!n){var r=_.left,l=_.top;switch(t){case"t":r+=.5*_.width;break;case"r":r+=_.width,l+=.5*_.height;break;case"b":r+=.5*_.width,l+=_.height;break;case"l":l+=.5*_.height}r=Math.round(r+s),l=Math.round(l+o),this.setState({tooltip:{position:t,align:a,text:i,x:r,y:l}})}else this.setState({tooltip:Object.assign({},this.state.tooltip,{removed:!0})})}render(){var e=this.renderTooltip();return e?(this.defaultNode||"undefined"==typeof window||(this.defaultNode=document.createElement("div"),document.body.appendChild(this.defaultNode)),_.createElement(_.Fragment,null,this.props.children,p.createPortal(e,this.defaultNode))):this.props.children}}m.defaultProps={appearance:"black",position:"b",align:"center",marginTop:0,marginLeft:0};var b=a("PjZB"),g=a("wVf2");class f extends _.Component{constructor(e){var t;super(e),t=this,this.componentDidMount=()=>{document.addEventListener("keydown",this.onDocumentKeyDown),this.setInitialState(),this.synchronizeStateWithBackend()},this.componentWillUnmount=()=>{document.removeEventListener("keydown",this.onDocumentKeyDown),this.removeResendCodeButtonTimer()},this.componentDidUpdate=(e,t)=>{this.state.initialLoading||this.state.delayedUnblockExplanation||this.state.delayedUnblockFinished||t.phone===this.state.phone&&t.code===this.state.code&&t.codeSent===this.state.codeSent||this.updateFocus()},this.sendCode=()=>{if(!this.isBusy()){this.resetMessage();var e={act:f.acts.sendCode,phone:this.getPhonePrefix()+this.state.newPhone,hash:this.state.processHash,sure:1};ajax.post(f.controller,e,{onDone:e=>{this.setStateByProcess(e),this.setResendCodeButtonTimer()},onFail:e=>(this.setErrorMessage(e),!0),showProgress:()=>this.setState({mainButtonLoading:!0}),hideProgress:()=>this.setState({mainButtonLoading:!1})})}},this.sendCodeToBoundPhone=()=>{if(!this.isBusy()){this.resetMessage();var e={act:f.acts.sendCodeToBoundPhone,hash:this.state.processHash};ajax.post(f.controller,e,{onDone:e=>{this.setStateByProcess(e),this.setResendCodeButtonTimer()},onFail:e=>(this.setErrorMessage(e),this.synchronizeStateWithBackend(),!0),showProgress:()=>this.setState({mainButtonLoading:!0}),hideProgress:()=>this.setState({mainButtonLoading:!1})})}},this.resetPhone=e=>{this.isBusy()||(this.removeResendCodeButtonTimer(),e&&this.resetMessage(),this.setState({phonePrefixIndex:f.constants.firstCountryIndex,backendCallResetsEnabled:null,phone:"",code:"",newPhone:"",newCode:"",phonePrefixInputNeeded:!0,codeSent:!1,checkCodeAttemptsAmount:void 0}))},this.resetUnblockForm=()=>{if(!this.isBusy()){var e={act:f.acts.resetUnblockForm,hash:this.state.processHash};ajax.post(f.controller,e,{onDone:e=>{this.setStateByProcess(e,{delayedUnblockExplanation:"",delayedUnblockFinished:!1})},onFail:e=>(this.setErrorMessage(e),this.synchronizeStateWithBackend(),!0),showProgress:()=>this.setState({resetUnblockDataButtonLoading:!0}),hideProgress:()=>this.setState({resetUnblockDataButtonLoading:!1})})}},this.checkCode=()=>{if(!this.isBusy())if(this.state.newCode.length<4)Object(o.notaBene)(this.references.validationCodeInput.element);else{this.resetMessage();var e={act:f.acts.checkCode,code:this.state.newCode,hash:this.state.processHash};ajax.post(f.controller,e,{onDone:e=>{this.setStateByProcess(e),this.references.passwordInput.element.focus(),this.setState({mainButtonLoading:!1})},onFail:e=>(this.synchronizeStateWithBackend(()=>{this.setErrorMessage(e),this.setState({mainButtonLoading:!1})}),!0),showProgress:()=>this.setState({mainButtonLoading:!0})})}},this.resendCode=()=>{if(!this.isBusy()){this.resetMessage();var e={act:f.acts.resendCode,hash:this.state.processHash};ajax.post(f.controller,e,{onDone:e=>{this.setStateByProcess(e,{newCode:""}),this.setInfoMessage(this.getResentInfoMessageText()),this.setResendCodeButtonTimer(),this.references.validationCodeInput.element.focus()},onFail:e=>(this.setErrorMessage(e),this.synchronizeStateWithBackend(),!0),showProgress:()=>this.setState({noCodeButtonLoading:!0}),hideProgress:()=>this.setState({noCodeButtonLoading:!1})})}},this.unblock=()=>{if(!this.isBusy())if(f.isBadPassword(this.state.newPassword))Object(o.notaBene)(this.references.passwordInput.element);else{this.resetMessage();var e={act:f.acts.unblock,pass:this.state.newPassword,hash:this.state.unblockHash};ajax.post(f.controller,e,{onDone:e=>{e.delayed_unblock_explanation?this.setState({delayedUnblockExplanation:e.delayed_unblock_explanation,mainButtonLoading:!1}):(this.setState({password:this.state.newPassword}),f.refreshAuthDataAndRedirectToFeed(e.login_hash,e.logout_hash,e.email,this.state.newPassword))},onFail:e=>(this.setErrorMessage(e),this.setState({mainButtonLoading:!1}),this.synchronizeStateWithBackend(),!0),showProgress:()=>this.setState({mainButtonLoading:!0})})}},this.redirectToAuth=()=>{this.setState({redirectToAuthButtonLoading:!0}),window.location.href=document.getElementById("top_logout_link").href},this.synchronizeStateWithBackend=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:()=>{},a={act:f.acts.getStatus};ajax.post(f.controller,a,{onDone:a=>{e(),t.setStateByProcess(a)},onFail:e=>(t.setErrorMessage(e),t.synchronizeStateWithBackend(),!0)})},this.setStateByProcess=function(e){var a=arguments.length>1&&void 0!==arguments[1]&&arguments[1],i=t.getStateByProcess(e);t.state.initialLoading&&(i.initialLoading=!1),a&&Object.assign(i,a),0!==t.state.unbanDataId&&void 0!==t.state.unbanDataId&&i.unbanDataId!==t.state.unbanDataId&&t.setErrorMessage(s.default.getLang("login_unban_data_expired")),t.setState(i),i.delayedUnblockExplanation||i.delayedUnblockFinished||(i.codeSent&&i.resendButtonSecondsLeft&&t.setResendCodeButtonTimer(),0===i.checkCodeAttemptsAmount&&t.resetPhone(!1))},this.getStateByProcess=e=>({phone:e.phone,code:e.code,password:e.password,phonePrefixInputNeeded:!e.phone,canEditPhone:e.can_edit_phone,codeSent:e.code_sent,checkCodeAttemptsAmount:Number(e.check_code_attempts_amount),backendCallResetsEnabled:e.call_resets_enabled,phonePrefixesCallResetsEnabledConfig:e.phone_prefixes_call_resets_enabled_config,phonePrefixesToCountryMapping:e.country_to_phone_prefixes_map,unbanDataId:e.unban_data_id,delayedUnblockExplanation:e.delayed_unblock_explanation,delayedUnblockFinished:e.delayed_unblock_finished,resendCodeTimer:f.constants.noResetCodeTimerEnabled,resendButtonSecondsLeft:e.sms_resend_delay_timer_left,resendAttemptsAmount:e.resend_attempts_amount,resendCodeDelay:e.sms_resend_delay,phonePrefixIndex:this.getInitialPhonePrefixIndex(e.country_to_phone_prefixes_map,e.phone_prefix),newPhone:e.phone,newCode:e.code,newPassword:"",processHash:e.process_hash,unblockHash:e.unblock_hash}),this.areCallResetsEnabled=()=>{if(null!==this.state.backendCallResetsEnabled)return this.state.backendCallResetsEnabled;var e=String(this.state.phonePrefixesToCountryMapping[this.state.phonePrefixIndex][0]),t=Number(e.replace("_",""));return!this.state.phonePrefixesCallResetsEnabledConfig.includes(t)},this.updateFocus=()=>{this.state.phone?this.state.phone&&!this.state.code&&this.state.codeSent?this.references.validationCodeInput.element.focus():this.state.phone&&this.state.code&&this.references.passwordInput.element.focus():this.references.phoneInput.element.focus()},this.setErrorMessage=e=>{this.setState({message:e,isError:!0})},this.setInfoMessage=e=>{this.setState({message:e,isError:!1})},this.resetMessage=()=>{this.setState({message:""})},this.isBusy=()=>this.state.mainButtonLoading||this.state.noCodeButtonLoading||this.state.resetUnblockDataButtonLoading,this.onDocumentKeyDown=e=>{switch(e.keyCode){case KEY.ENTER:this.references.mainButton.props.onClick();break;default:return}e.stopPropagation(),e.preventDefault()},this.setResendCodeButtonTimer=()=>{if(this.state.resendCodeTimer===f.constants.noResetCodeTimerEnabled){var e=this.state.resendButtonSecondsLeft||this.state.resendCodeDelay;this.setState({resendCodeTimer:setInterval(this.resendCodeButtonTimerTick,c.SECOND),resendButtonSecondsLeft:e})}},this.resendCodeButtonTimerTick=()=>{var e=this.state.resendButtonSecondsLeft-1;this.setState({resendButtonSecondsLeft:e}),0===e&&this.removeResendCodeButtonTimer()},this.removeResendCodeButtonTimer=()=>{clearInterval(this.state.resendCodeTimer),this.setState({resendCodeTimer:f.constants.noResetCodeTimerEnabled,resendButtonSecondsLeft:0})},this.noResendsWereMade=()=>this.state.resendAttemptsAmount===f.constants.noCodeResentAmount,this.isLastResendStep=()=>this.state.resendAttemptsAmount===f.constants.maxCodeResentAmount,this.shouldRenderCallResetsSteps=()=>this.areCallResetsEnabled()?this.noResendsWereMade():this.isLastResendStep(),this.getCodeBlockHeaderLabel=()=>this.shouldRenderCallResetsSteps()?s.default.getLang("login_authcheck_called_phone_label"):s.default.getLang("login_confirmation_code"),this.getCodeBlockTooltipLabel=()=>this.shouldRenderCallResetsSteps()?this.props.tooltips.codeCallReset:this.props.tooltips.code,this.getResentInfoMessageText=()=>this.shouldRenderCallResetsSteps()?s.default.getLang("login_authcheck_call_reset_sent"):s.default.getLang("login_authcheck_sms_resent"),this.getResendCodeWaitingLabel=()=>{var e;e=this.areCallResetsEnabled()?this.noResendsWereMade()?s.default.getLang("join_send_code_via_sms_time"):s.default.getLang("join_resend_code_time"):this.noResendsWereMade()?s.default.getLang("join_resend_code_time"):s.default.getLang("login_authcheck_send_call_reset_delay");var t=Math.floor(this.state.resendButtonSecondsLeft/60)+":"+(this.state.resendButtonSecondsLeft%60<10?"0":"")+this.state.resendButtonSecondsLeft%60;return e.replace("%s",t)},this.getResendCodeButtonLabel=()=>this.areCallResetsEnabled()?this.noResendsWereMade()?s.default.getLang("join_send_code_via_sms"):s.default.getLang("join_no_code"):this.noResendsWereMade()?s.default.getLang("join_no_code"):s.default.getLang("login_authcheck_send_call_reset_message"),this.getInitialPhonePrefixIndex=(e,t)=>{var a=e.findIndex(e=>e[3]==t);return-1===a&&(a=f.constants.firstCountryIndex),a},this.mapPhonePrefixesToOption=()=>this.state.phonePrefixesToCountryMapping.map((e,t)=>({constant:t,name:e[1]})),this.getPhonePrefix=()=>this.state.phonePrefixesToCountryMapping[this.state.phonePrefixIndex][3],this.renderResendCodeButton=()=>{var e;if(this.state.resendAttemptsAmount===f.constants.maxCodeResentAmount)e=_.createElement("div",{className:"resend_button resend_button--waiting"},s.default.getLang("reg_code_limit_exceeded"));else if(0===this.state.resendButtonSecondsLeft)e=_.createElement(r.default,{appearance:"link",loading:this.state.noCodeButtonLoading,className:"resend_button",onClick:this.resendCode},this.getResendCodeButtonLabel());else{var t=this.getResendCodeWaitingLabel();e=_.createElement("div",{className:"resend_button resend_button--waiting"},t)}return _.createElement("div",{className:"resend_button_wrap"},e)},this.renderPhonePrefixBlock=()=>{if(!this.state.phonePrefixInputNeeded)return"";var e=this.state.phone?f.constants.finishedClass:"";return _.createElement("div",{className:"input phone_number_prefix_input "+e},_.createElement("div",{className:"label"},s.default.getLang("join_country_label")),_.createElement(d.default,{className:"dark phone_number_prefix _phone_input_tooltip "+e,config:{id:"phone_number_prefix",placeholder:"",selected:[this.state.phonePrefixIndex],options:this.mapPhonePrefixesToOption()},singleSelectCrutch:!0,onFilterChange:(e,t)=>{this.setState({phonePrefixIndex:null===t?this.state.phonePrefixIndex:t})},readOnly:!!this.state.phone}))},this.renderPhoneBlock=()=>{var e=this.state.phone&&!this.state.code&&this.state.canEditPhone?_.createElement("a",{className:"_change_phone_button",onClick:()=>this.resetPhone(!0)},s.default.getLang("login_unblock_form_change_phone")):"",t=this.state.phonePrefixInputNeeded?this.getPhonePrefix():"",a=this.state.phone?f.constants.finishedClass:"",i=!this.state.phone&&!this.state.code&&this.state.phonePrefixInputNeeded,o=this.state.newPhone;return _.createElement("div",{className:"input phone_number_input"},_.createElement("div",{className:"label"},s.default.getLang("login_mobile_phone")),e,_.createElement(m,{text:this.getPhoneBlockTooltipLabel(),appearance:f.constants.tooltipAppearance,position:f.constants.tooltipPosition,width:f.constants.tooltipWidth,marginLeft:f.constants.tooltipMarginLeft,isShown:i},_.createElement("div",{id:"join_phone_prefixed",className:"prefix_input_wrap "+a},_.createElement("div",{id:"join_phone_prefix",className:"prefix_input_prefix"},_.createElement("nobr",null,t)),_.createElement("div",{className:"prefix_input_field"},_.createElement(l.default,{className:"prefix_input phone_number _phone_input_tooltip "+a,value:o,readOnly:!!this.state.phone,onChange:e=>this.setState({newPhone:e.target.value}),ref:e=>{this.references.phoneInput=e}}),_.createElement("div",{className:"prefix_input_border"})))))},this.renderCodeBlock=()=>{if(!this.state.phone)return"";if(!this.state.codeSent)return"";var e=this.getCodeBlockHeaderLabel(),t=this.state.code?f.constants.finishedClass:"",a=this.state.phone&&!this.state.code,i=!!this.state.code;return _.createElement("div",{className:"input verification_code_input"},_.createElement("div",{className:"label"},e),_.createElement(m,{text:this.getCodeBlockTooltipLabel(),appearance:f.constants.tooltipAppearance,position:f.constants.tooltipPosition,width:f.constants.tooltipWidth,marginLeft:f.constants.tooltipMarginLeft,isShown:a},_.createElement(l.default,{className:"verification_code _verification_code_input_tooltip dark "+t,ref:e=>{this.references.validationCodeInput=e},placeholder:s.default.getLang("login_authcheck_enter_code"),value:this.state.newCode,readOnly:i,onChange:e=>this.setState({newCode:e.target.value})})))},this.renderPasswordBlock=()=>{if(!this.state.phone||!this.state.code)return"";var e=f.checkPasswordStrength(this.state.newPassword),t=this.state.newPassword?_.createElement("div",{id:"blocked_about_pass",className:"blocked_pwd_level"+e}):"",a=this.state.newPassword?_.createElement("div",{className:"blocked_pass_strength blocked_about_login"},s.default.getLang("join_pwd_level"+e)):"",i=!this.state.password;return _.createElement("div",{className:"input new_password_input"},_.createElement("div",{className:"label"},s.default.getLang("login_new_password_label")),_.createElement(m,{text:this.props.tooltips.password,appearance:f.constants.tooltipAppearance,position:f.constants.tooltipPosition,width:f.constants.tooltipWidth,marginLeft:f.constants.tooltipMarginLeft,isShown:i},_.createElement(l.default,{className:"dark new_password _password_input_tooltip",ref:e=>{this.references.passwordInput=e},placeholder:s.default.getLang("login_enter_password"),value:this.state.newPassword,onChange:e=>this.setState({newPassword:e.target.value})})),t,a)},this.renderMainButton=()=>{var e,t,a,i=this.areCallResetsEnabled()?s.default.getLang("reg_validate_call_reset_button"):s.default.getLang("login_receive_code");if(this.state.phone||this.state.code)if(this.state.phone&&!this.state.code)this.state.codeSent?(e=this.checkCode,t=s.default.getLang("login_check_code"),a=this.renderResendCodeButton()):(e=this.sendCodeToBoundPhone,t=i,a="");else{if(!this.state.phone||!this.state.code)return"";e=this.unblock,t=s.default.getLang("login_blocked_unblock_page"),a=""}else e=this.sendCode,t=i,a="";return _.createElement("div",null,_.createElement(r.default,{className:"UnblockForm__mainButton",loading:this.state.mainButtonLoading,onClick:e,ref:e=>{this.references.mainButton=e}},t),a)},this.renderMessage=()=>{if(!this.state.message)return"";var e=this.state.isError?"error":"";return _.createElement("div",{id:"unblock_box_errors_block"},_.createElement("div",{className:"msg submit_error "+e,dangerouslySetInnerHTML:{__html:this.state.message}}))},this.renderContent=()=>this.state.initialLoading?f.renderInitialLoading():this.state.delayedUnblockExplanation?this.renderDelayedWaitExplanation():this.state.delayedUnblockFinished?this.renderDelayedUnblockFinishedScreen():_.createElement("div",{className:"UnblockForm__content__inputs"},this.renderPhonePrefixBlock(),this.renderPhoneBlock(),this.renderCodeBlock(),this.renderPasswordBlock(),this.renderMainButton()),this.renderDelayedWaitExplanation=()=>_.createElement("div",{className:"DelayedWaitExplanation"},_.createElement("div",{className:"DelayedWaitExplanation__message msg submit_error ",dangerouslySetInnerHTML:{__html:s.default.getLang("restore_change_phone_done_wait_banned").replace("{date}",this.state.delayedUnblockExplanation)}}),_.createElement("div",{className:"DelayedWaitExplanation__progressWrap"},_.createElement(r.default,{appearance:"tertiary",loading:this.state.resetUnblockDataButtonLoading,onClick:this.resetUnblockForm},s.default.getLang("login_delayed_its_not_me")))),this.renderDelayedUnblockFinishedScreen=()=>_.createElement("div",{id:"unblock_box_errors_block"},_.createElement("div",{className:"msg submit_error ",dangerouslySetInnerHTML:{__html:s.default.getLang("login_delayed_request_finished")}}),_.createElement("div",{className:"DelayedRequestFinished__button"},_.createElement(r.default,{loading:this.state.redirectToAuthButtonLoading,onClick:this.redirectToAuth},s.default.getLang("login_unblock_redirect_to_auth"))),_.createElement("div",{className:"DelayedRequestFinished__notMeButton"},_.createElement(r.default,{appearance:"tertiary",loading:this.state.resetUnblockDataButtonLoading,onClick:this.resetUnblockForm},s.default.getLang("login_delayed_its_not_me")))),this.render=()=>_.createElement("div",{className:"UnblockForm"},_.createElement("div",{className:"UnblockForm__header box_title_wrap"},_.createElement("div",{className:"box_x_button",role:"button",onClick:n.destroyComponentInBox}),_.createElement("div",{className:"box_title"},s.default.getLang("login_blocked_call_title"))),_.createElement("div",{className:"UnblockForm__content box_body clear_fix"},_.createElement("div",{className:"login_blocked_wrap"},_.createElement("div",{className:"unblock_form"},_.createElement("div",{className:"UnblockForm__content__header"},_.createElement("div",{className:"antispam_team_logo"}),_.createElement("div",{className:"reason"},s.default.getLang("login_unblock_form_explanation"))),this.renderMessage(),this.renderContent())))),this.state={initialLoading:!0},this.references={phoneInput:null,validationCodeInput:null,passwordInput:null,mainButton:null}}setInitialState(){this.setState({message:"",isError:!1,initialLoading:!0,mainButtonLoading:!1,noCodeButtonLoading:!1,resetUnblockDataButtonLoading:!1,redirectToAuthButtonLoading:!1})}getPhoneBlockTooltipLabel(){return this.areCallResetsEnabled()?this.props.tooltips.phoneCallReset:this.props.tooltips.phone}}f.controller="/al_login.php",f.acts={getStatus:"get_unblock_process_status",sendCode:"send_unblock_code",sendCodeToBoundPhone:"send_unblock_code_to_bound_phone",resendCode:"resend_unblock_code",checkCode:"check_unblock_code",unblock:"unblock",resetUnblockForm:"reset_unblock_form"},f.constants={finishedClass:"finished",maxCodeResentAmount:2,noCodeResentAmount:0,firstCountryIndex:0,noResetCodeTimerEnabled:0,tooltipWidth:250,tooltipMarginLeft:5,tooltipAppearance:"white",tooltipPosition:"r",passwordStrengths:{none:-1,incorrectTooShort:0,weakTypical:1,good:2,veryGood:3,excellent:4,incorrectHasSpaces:5}},f.refreshAuthDataAndRedirectToFeed=(e,t,a,i)=>{var _=utilsNode.appendChild(ce("div",{innerHTML:'\n      <form id="login_block_auth_form" target="login_block_auth_frame" action="" method="POST">\n        <input type="hidden" name="_origin" id="login_server_origin" />\n        <input type="hidden" name="email" id="login_block_email" />\n        <input type="hidden" name="pass" id="login_block_pass" />\n      </form>\n      <iframe name="login_block_auth_frame" id="login_block_auth_frame"></iframe>'})),o=window.onLoginDone,s=ge("login_block_auth_form");s.action=Object(g.getLoginDomain)()+"?act=login&ip_h="+t+"&lg_h="+e+"&redirect=1&role=al_frame",val("login_block_email",winToUtf(a)),val("login_block_pass",winToUtf(i)),val("login_server_origin",cur.serverOrigin),s.submit(),cur.destroy.push(()=>{re(_),window.onLoginDone=o}),window.onLoginDone=()=>{re(_),nav.go("/feed",!0)}},f.isBadPassword=e=>{var t=[f.constants.passwordStrengths.incorrectHasSpaces,f.constants.passwordStrengths.incorrectTooShort],a=f.checkPasswordStrength(e);return t.includes(a)},f.checkPasswordStrength=e=>{var t=f.constants.passwordStrengths.none,a=["qwerty","йцукен","gfhjkm","пароль","password","abc123","fuckyou","123abc","baseball","football","soccer","monkey","liverpool","princess","jordan","slipknot","superman","iloveyou"];if(e.length<6)t=f.constants.passwordStrengths.incorrectTooShort;else if(/\s/.test(e))t=f.constants.passwordStrengths.incorrectHasSpaces;else if(e.match(/^\d+$/)||a.indexOf(e)>=0||e.substr(-1).match(/\d/)&&a.indexOf(e.substr(0,e.length-1))>=0)t=f.constants.passwordStrengths.weakTypical;else{for(var i=[/[^a-z]/g,/[^A-Z]/g,/[^а-яё]/g,/[^А-ЯЁ]/g,/[^0-9]/g,/[a-zA-Zа-яА-ЯёЁ0-9]/g],_=[],o=0,s=0,n=i.length;s<n;++s){var r=e.replace(i[s],"").length;r&&(r>1&&o++,_.push({group:s,cnt:r}))}if(_.length<3&&_[_.length-1].group!=i.length-1&&o<2&&(t=f.constants.passwordStrengths.good),(o>2||_.length>2&&_[_.length-1].group==i.length-1)&&(t=f.constants.passwordStrengths.excellent),t<0&&o>1){var l=e.replace(i[i.length-1],"");l.length>1&&l.replace(new RegExp(escapeRE(l.charAt(0)),"g"),"").length&&(t=f.constants.passwordStrengths.excellent)}t<0&&(t=f.constants.passwordStrengths.veryGood),t&&t<3&&e.length>13&&t++}return t},f.renderInitialLoading=()=>_.createElement("div",{className:"InitialLoading"},_.createElement(b.default,null));var E={init(){each(geByClass("big_text","login_form_wrap"),(e,t)=>{placeholderInit(t)}),setTimeout(elfocus.pbind(!isVisible("email")||val("email")?"pass":"email"),0);var e=ge("login_form"),t=ge("email"),a=ge("pass"),i=val("login_ul");return e.onsubmit=()=>{if(!window.submitQuickLoginForm)return!0;if(!i&&!trim(t.value))return notaBene(t),!1;if(!trim(a.value))return notaBene(a),!1;var e={expire_input:val("expire_input")};return i&&(e.ul=i),submitQuickLoginForm(t.value,a.value,{prg:"login_button",params:e}),!1},window.loginByCredential&&!i&&(t.onclick=loginByCredential,a.onclick=loginByCredential),!0},initBlockedPage(){i.FAQTutorial.tryInit()},initBox(){var e=curBox();e.changed=!0,e.setOptions({width:560,onClean:()=>{},hideButtons:!0,bodyStyle:"padding: 0"});var t=document.querySelector(".LoginBoxForm"),a=document.querySelector(".LoginBoxForm__expire"),i=document.querySelector(".LoginBoxForm__buttonSignIn"),_=document.querySelector(".LoginBoxForm__buttonSignUp");placeholderInit(t.elements.email),placeholderInit(t.elements.pass),a.onclick=()=>(checkbox(a),!1),_.onclick=()=>(showBox("join.php",{act:"box",from:nav.strLoc}),!1),t.onsubmit=e=>{if(isButtonLocked(i))return!1;if(!window.submitQuickLoginForm)return!0;var _=trim(t.elements.email.value),o=trim(t.elements.pass.value),s=intval(isChecked(a));return _?trim(t.elements.pass.value)?(submitQuickLoginForm(_,o,{prg:"login_button",params:{expire_input:s}}),lockButton(i),!1):(notaBene(t.elements.pass),!1):(notaBene(t.elements.email),!1)},setTimeout(()=>t.elements.email.focus(),0)},changeMail(e,t,a){var i=trim(val("login_new_mail")),_=1;return i?(e&&(a=cur.changeMailHash),-1==i.indexOf("@")?showMsg("login_change_mail_error",getLang("reg0_error_bad_email"),"error"):(e&&(_=0),void ajax.post("/login?act=a_change_mail",{newmail:i,hash:a,from_page:_},{onDone(t){var a="login_change_mail_form";e&&(a="login_change_mail_box",curBox().removeButtons(),curBox().addButton(getLang("global_cancel"),null,"no")),val(a,t)},onFail:e=>(showMsg("login_change_mail_error",e,"error"),!0),showProgress:lockButton.pbind(t),hideProgress:unlockButton.pbind(t)}))):notaBene("login_new_mail")},initChangeMailBox(){curBox().removeButtons(),curBox().addButton(getLang("global_cancel"),null,"no"),curBox().addButton(getLang("reg0_change_mail"),E.changeMail.pbind(1)),elfocus("change_mail_new")},isBanExpired:()=>cur.unblockDate<Date.now()/1e3,canUnblockFast:()=>!0===cur.canUnblockFast,showUnblockForm(){Object(n.showComponentInBox)(_.createElement(f,{tooltips:{phone:cur.phoneTooltip,phoneCallReset:cur.phoneCallResetTooltip,code:cur.verificationCodeTooltip,codeCallReset:cur.verificationCodeCallResetTooltip,password:cur.passwordTooltip}}))},fastUnblock:e=>{var t={act:"fast_unblock",hash:e},a=document.getElementsByClassName("unblock_button--fast")[0];a?ajax.post("/al_login.php",t,{onDone:function(){showDoneBox(getLang("login_fast_unblocked_wait_description"),{out:5e3}),nav.reload()},onFail:function(e){return unlockButton(a),showDoneBox(e),!0},showProgress:()=>lockButton(a)}):showFastBox(getLang("global_error"))},showDeletePageBox(){showFastBox(getLang("login_blocked_delete_page_header"),getLang("login_blocked_sure_delete_page_question"),getLang("box_yes"),()=>{ajax.post("al_settings.php",{act:"a_deactivate",hash:cur.deactivate_hash},{onDone:e=>{showDoneBox(e),nav.go("/id"+vk.id)},onFail:e=>{showDoneBox(e),curBox().hideProgress()}})},getLang("box_no"))}}},MZbF:function(e,t,a){"use strict";a.r(t),a.d(t,"FAQTutorial",(function(){return n}));var i=a("zxIV"),_=a("KkBR"),o=a("v+DW");function s(){var e=geByClass("tutorial_step").slice(-1)[0],t=geByClass1("content",e);t.innerHTML=getTemplate("login_tutorial_finish_appeal")+t.innerHTML}var n={tryInit(){geByClass1("tutorial_step")&&s()},select(e,t,a){var n=arguments.length>3&&void 0!==arguments[3]&&arguments[3];if(!cur.tutorialProcessing&&!isChecked(e)){var r=gpeByClass("tutorial_step",e);hasClass(r,"finished")||(removeClass(geByClass1("on",r),"on"),addClass(e,"on"),ajax.post("support?act=a_select_tutorial",{name:t,id:a,load:1,ban:nav.objLoc.ban||0},{onDone(e,t){n||addClass(r,"finished");var a,o=!0,l=ge("page_body").offsetHeight+(vk.staticheader?0:Object(i.getH)(ge("page_header_cont")));if(n)do{(a=domNS(r))&&(re(a),o=!1)}while(a);if(ge("login_blocked_wrap").innerHTML+=e,s(),"login"===nav.objLoc[0]&&t){var c=document.querySelectorAll(".tutorial_step"),d=c[c.length-1];if(_.Login.isBanExpired()){_.Login.canUnblockFast()?d.innerHTML+=getTemplate("login_unblock_by_phone_fast"):d.innerHTML+=getTemplate("login_unblock_by_phone");var p=c[c.length-1].querySelector(".help_table_question__m");p&&hide(p)}else d.innerHTML+=getTemplate("login_wait_for_ban_expiration_message")}o&&scrollToY(l)},onFail:e=>(showDoneBox(e),!1),showProgress(){cur.tutorialProcessing=!0,Object(o.lockButton)(e)},hideProgress(){cur.tutorialProcessing=!1,Object(o.unlockButton)(e)}}))}},home:()=>{nav.go("/support?act=home")},back:e=>{var t=geByClass("tutorial_step"),a=t[t.length-1];2===t.length&&hide(e),hide(a),removeClass(geByClass1("on",t[t.length-2]),"on")}}},PjZB:function(e,t,a){"use strict";a.r(t),a.d(t,"default",(function(){return o}));a("rGqo"),a("a1Th"),a("Btvt");var i=a("q1tI"),_=(a("17x9"),a("pemR"));class o extends i.Component{constructor(e){super(e),this.id=Math.round(1e6*Math.random()).toString(16),this.setSpinnerParams(e)}componentWillReceiveProps(e){this.setSpinnerParams(e)}setSpinnerParams(e){this.offset=Math.round(Math.PI*e.size),this.c=.5*e.size,this.animation=function(e,t){if(!e||!t)return"";var a=Object.keys(t).map(e=>e+" {"+Object.keys(t[e]).map(a=>a+":"+t[e][a]).join(";")+"}").join("");return`@-webkit-keyframes ${e} {${a}} @keyframes ${e} {${a}}`}("dash"+this.id,{"0%":{"stroke-dashoffset":this.offset},"50%":{"stroke-dashoffset":Math.round(.25*this.offset),transform:"rotate(135deg)"},"100%":{"stroke-dashoffset":this.offset,transform:"rotate(360deg)"}})}render(){var e=this.props,t=e.style,a=e.color,o=e.size,s=e.duration,n=e.strokeWidth,r=e.className,l=this.id,c=this.offset,d=this.animation,p=Object(_.classNames)("Spinner",r);return i.createElement("div",{className:p,style:t},i.createElement("svg",{className:"Spinner__svg",width:o,height:o,viewBox:`0 0 ${o} ${o}`,xmlns:"http://www.w3.org/2000/svg"},i.createElement("g",{style:{width:o,height:o,transformOrigin:.5*o+"px "+.5*o+"px"}},i.createElement("style",{dangerouslySetInnerHTML:{__html:d}}),i.createElement("circle",{className:"Spinner__path",fill:"none",stroke:a,strokeDasharray:c,strokeDashoffset:c,strokeWidth:n,style:{animationName:"dash"+l,animationTimingFunction:"ease-in-out",animationDuration:s+"s",animationIterationCount:"infinite"},cx:.5*o,cy:.5*o,r:.5*o-.5*n}))))}}o.defaultProps={color:"#5181b8",size:19,strokeWidth:2,duration:1.4,className:""}},aicB:function(e,t,a){"use strict";a.r(t),a.d(t,"TicketsEF",(function(){return r}));a("a1Th"),a("Btvt");var i=a("Glos"),_=a("zxIV"),o=a("v+DW"),s=a("t7n3"),n=a("Egk5"),r={_getInput:function(e){return ge("tickets_new_extra_field_"+e+"_inp")},_getValues:function(e){return cur.extraFieldsValues[e]},init:function(){r._runOverAll((function(e,t){var a=r._getInput(t),i=cur.extraFieldsNotes[t],o=r._getValues(t),s=r._getType(e,a,o);switch(Object(_.data)(e,"ef-type",s),s){case"plain":r._initPlain(e,a,i);break;case"select":r._initSelect(e,a,i,o);break;case"radio":r._initRadio(e,a,t);break;case"date":r._initDate(e,a);break;case"datetime":r._initDatetime(e,a);break;case"checkbox":break;case"hidden":r._initPlain(e);break;default:console.log("Failed to define type of field=%s",t)}})),r._checkBlocking()},_runOverAll:function(e){if(e){var t=ge("tickets_new_extra_fields"),a=t?Object(_.geByClass)("_extra_field",t):[];each(a,(function(t,a){e(a,attr(a,"ef-index"))}))}},_getType:function(e,t,a){return t?Object(_.hasClass)(t,"_date")?Object(_.geByClass1)("_time",e)?"datetime":"date":a.length>0?"select":e&&Object(_.geByClass1)("checkbox",e)?"checkbox":"plain":e&&Object(_.geByClass1)("radiobtn",e)?"radio":"hidden"},_getDefinedType:function(e){return Object(_.data)(e,"ef-type")},_initPlain:function(e,t,a){t?a&&""!==a&&(Object(n.addEvent)(t,"focus",(function(e){var t=e.target;i.Tickets.showTooltip(t,a,"extra_field","right",!0)})),Object(n.addEvent)(t,"blur",i.Tickets.hideTooltip.pbind(t))):Object(_.data)(e,"value","")},_initHidden:function(e){Object(_.data)(e,"value","")},_initSelect:function(e,t,a,i){if(t){var o=attr(t,"placeholder"),s=new Dropdown(t,i,{introText:o,placeholder:o,width:getSize(t)[0],big:1,autocomplete:!0,multiselect:!1,zeroPlaceholder:!0});Object(_.data)(e,"dd",s)}else Object(_.data)(e,"value","")},_getRadioName:function(e){return"efRadio"+e},_getCheckbox:function(e){return e.querySelector(".checkbox")},_initRadio:function(e,t,a){var i=Object(_.geByClass1)("on",e);window.radioBtns[r._getRadioName(a)]={val:i?Object(s.intval)(attr(i,"ef-value")):"",els:Object(_.geByClass)("radiobtn",e)}},_initDatetime:function(e,t,a){var o=Object(_.geByClass1)("_time",e);new Datepicker(t,{time:o,width:207}),""!==a&&Object(n.addEvent)(e,"focus",(function(t){i.Tickets.showTooltip(e,a,"extra_field","right",!0)}))},_initDate:function(e,t){var a=attr(t,"placeholder").toString();new Datepicker(t,{width:348}),""!==a&&Object(n.addEvent)(e,"focus",(function(t){i.Tickets.showTooltip(e,a,"extra_field","right",!0)}))},radioClick:function(e){var t=Object(_.gpeByClass)("_extra_field",e);t&&(radiobtn(e,attr(e,"ef-value"),r._getRadioName(attr(t,"ef-index"))),r._checkBlocking(),r._checkVisible())},_checkBlocking:function(){var e=!1;r._runOverAll((function(t,a){Object(_.isVisible)(t)&&r._isBlocking(t,a)&&(e=!0)})),toggle("tickets_new_controls",!e)},_checkVisible:function(){r._runOverAll((function(e,t){var a=cur.extraFieldsVisible[t];if(a){var i=!0;each(a,(function(e,t){if("_"!==e){var a=r._getValueByIndex(e);""!==a&&Object(s.inArray)(Object(s.intval)(a),t)||(i=!1)}})),toggle(e,i)}}))},_isBlocking:function(e,t){var a=r._getInput(t),i=r._getValues(t);if("radio"===r._getDefinedType(e,a,i)){var _=Object(s.intval)(Object(o.radioval)(r._getRadioName(t))),n=cur.extraFieldsBlocking[t];return Object(s.inArray)(_,n)}return!1},_getValueByIndex:function(e){var t=ge("tickets_new_extra_field_"+e),a=r._getInput(e);return t?r._getValue(t,e,a,r._getDefinedType(t,a,r._getValues(e))):""},_getValue:function(e,t,a,i){var n="";switch(i){case"plain":case"date":case"datetime":n=Object(s.trim)(Object(_.val)(a));break;case"select":var l=e?Object(_.data)(e,"dd"):null;l&&(n=l.val());break;case"radio":n=Object(o.radioval)(r._getRadioName(t));break;case"checkbox":n=Object(o.isChecked)(r._getCheckbox(e));break;case"hidden":n=Object(_.data)(e,"value")}return n},_getNotableBlock:function(e,t,a){var i=t;switch(a){case"select":var o=Object(_.data)(e,"dd");o&&(i=o.container);break;case"radio":case"hidden":i=e}return i},getValues:function(){var e={},t=!0;return r._runOverAll((function(a,i){var s=r._getInput(i),n=Object(_.hasClass)(a,"_ef_required"),l=Object(_.hasClass)(a,"_ef_check_url");if(Object(_.isVisible)(a)&&!Object(_.hasClass)(a,"_ef_note")){var c=r._getDefinedType(a,s,r._getValues(i)),d=r._getValue(a,i,s,c);if(n&&(""===d||l&&-1===d.indexOf("vk.com")||r._isBlocking(a,i))){var p=r._getNotableBlock(a,s,c);p&&Object(o.notaBene)(p,!1,!t),t=!1}e["extra_field_"+i]=d}})),!!t&&e}}},clTp:function(e,t,a){"use strict";function i(e){var t=e.getBoundingClientRect(),a=document.body,i=document.documentElement,_=window.pageYOffset||i.scrollTop||a.scrollTop,o=window.pageXOffset||i.scrollLeft||a.scrollLeft,s=i.clientTop||a.clientTop||0,n=i.clientLeft||a.clientLeft||0;return{top:Math.round(t.top+_-s),left:Math.round(t.left+o-n),width:e.offsetWidth,height:e.offsetHeight}}a.r(t),a.d(t,"default",(function(){return i}))},dLHM:function(e,t,a){"use strict";a.r(t),a.d(t,"default",(function(){return n}));a("91GP"),a("ioFf"),a("rGqo"),a("Btvt");var i=a("q1tI"),_=(a("17x9"),a("pemR"));function o(){return(o=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var a=arguments[t];for(var i in a)Object.prototype.hasOwnProperty.call(a,i)&&(e[i]=a[i])}return e}).apply(this,arguments)}function s(e,t){if(null==e)return{};var a,i,_=function(e,t){if(null==e)return{};var a,i,_={},o=Object.keys(e);for(i=0;i<o.length;i++)a=o[i],t.indexOf(a)>=0||(_[a]=e[a]);return _}(e,t);if(Object.getOwnPropertySymbols){var o=Object.getOwnPropertySymbols(e);for(i=0;i<o.length;i++)a=o[i],t.indexOf(a)>=0||Object.prototype.propertyIsEnumerable.call(e,a)&&(_[a]=e[a])}return _}class n extends i.Component{constructor(e){super(e),this.onChange=e=>{this.isControlledOutside||this.setState({value:e.target.value}),this.props.onChange&&this.props.onChange(e)},this.getRef=e=>{this.element=e},void 0!==e.value||e.isControlledOutside?this.isControlledOutside=!0:this.state={value:e.initialValue||""}}render(){var e=this.props,t=e.alignment,a=e.value,n=(e.onChange,e.initialValue,e.className),r=(e.isControlledOutside,s(e,["alignment","value","onChange","initialValue","className","isControlledOutside"])),l={"Input--left":"left"===t,"Input--center":"center"===t,"Input--right":"right"===t};return i.createElement("input",o({},r,{className:Object(_.classNames)("Input",l,n),ref:this.getRef,value:this.isControlledOutside?a:this.state.value,onChange:this.onChange}))}}n.defaultProps={type:"text",initialValue:"",alignment:"left"}},dV62:function(e,t,a){"use strict";a.r(t),a.d(t,"rootId",(function(){return _})),a.d(t,"registerReactApplication",(function(){return o})),a.d(t,"showComponentInBox",(function(){return s})),a.d(t,"destroyComponentInBox",(function(){return n}));var i=a("i8i4"),_="react_root";function o(e,t){window.applicationInitFunctions[e]=t,window.reactInitQueue[e]&&window.reactInitQueue[e].length&&(window.reactInitQueue[e].forEach(t=>{window.initReactApplication(e,t)}),window.reactInitQueue[e]=[])}function s(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};t.onDestroy||(t.onDestroy=n),window.showFastBox(t);var a=document.querySelectorAll(".box_layout"),_=a[a.length-1];i.render(e,_),r()}function n(e){var t=document.querySelector(".box_layout");t&&i.unmountComponentAtNode(t);var a=window.curBox();a&&a.hide(e)}function r(){var e=document.querySelector(".popup_box_container");boxRefreshCoords(e)}window.applicationInitFunctions||(window.applicationInitFunctions={}),window.reactInitQueue||(window.reactInitQueue={}),window.initReactApplication=(e,t)=>{window.applicationInitFunctions[e]?window.applicationInitFunctions[e](t):(window.reactInitQueue[e]||(window.reactInitQueue[e]=[]),window.reactInitQueue[e].push(t))}}});